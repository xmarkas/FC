{"ast":null,"code":"import _objectSpread from\"C:\\\\Users\\\\xmark\\\\Desktop\\\\Code\\\\Servers\\\\FC-SERVER\\\\food-commune\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"C:\\\\Users\\\\xmark\\\\Desktop\\\\Code\\\\Servers\\\\FC-SERVER\\\\food-commune\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"C:\\\\Users\\\\xmark\\\\Desktop\\\\Code\\\\Servers\\\\FC-SERVER\\\\food-commune\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\xmark\\\\Desktop\\\\Code\\\\Servers\\\\FC-SERVER\\\\food-commune\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\xmark\\\\Desktop\\\\Code\\\\Servers\\\\FC-SERVER\\\\food-commune\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\xmark\\\\Desktop\\\\Code\\\\Servers\\\\FC-SERVER\\\\food-commune\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{connect}from\"react-redux\";import AddDeal from\"./AddDeal\";import Profile from\"./Profile\";import Buys from\"./Buys\";import Deals from\"./Deals\";import MyGroups from\"./MyGroups\";var mapStateToProps=function mapStateToProps(state){return{user:state.user,token:state.token};};var DashboardView=/*#__PURE__*/function(_Component){_inherits(DashboardView,_Component);var _super=_createSuper(DashboardView);function DashboardView(){var _this;_classCallCheck(this,DashboardView);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={// token: null,\n// user: null,\ndata:null,showAddDeal:false,editDeal:null};_this.newDeal=function(payload){insertDeal(_this.props.token,_this.props.user.id,payload).then(function(resolved){console.log(resolved);_this.setState(function(prevState){var Deals=_toConsumableArray(prevState.data.Deals);Deals.push(payload);var data=_objectSpread({},prevState.data,{Deals:Deals});return{data:data};},function(){_this.setState({showAddDeal:false});});}).catch(function(err){console.log(err);});};_this.updateDeal=function(payload){updateDealEdit(_this.props.token,_this.props.user.id,payload).then(function(resolved){console.log(resolved);_this.setState(function(prevState){var Deals=_toConsumableArray(prevState.data.Deals);var deal=Deals.findIndex(function(obj){return obj.id===payload.id;});Deals[deal]=payload;var data=_objectSpread({},prevState.data,{Deals:Deals});return{data:data};},function(){_this.setState({showAddDeal:false});});}).catch(function(err){console.log(err);});};_this.removeDeal=function(payload){removeDealDB(_this.props.token,_this.props.user.id,payload).then(function(resolved){console.log(resolved);_this.setState(function(prevState){var Deals=_toConsumableArray(prevState.data.Deals);var deal=Deals.findIndex(function(obj){return obj.id===payload;});Deals.splice(deal,1);var data=_objectSpread({},prevState.data,{Deals:Deals});return{data:data};});}).catch(function(err){console.log(err);});};_this.showAddDeal=function(toggle){_this.setState({showAddDeal:_this.state.showAddDeal?false:true,editDeal:null});};_this.editDeal=function(index){_this.setState({editDeal:_this.state.data.Deals[index],showAddDeal:true});};_this.updateProfile=function(payload){updateUserProfile(_this.props.token,_this.props.user.id,payload).then(function(resolved){console.log(resolved);_this.setState(function(prevState){var user=_objectSpread({},prevState.user);var keys=Object.keys(payload);keys.forEach(function(k){user[k]=payload[k];});return{user:user};});}).catch(function(err){console.log(err);});};_this.leaveGroup=function(clanId){removeUserFromGroup(_this.props.token,_this.props.user,clanId).then(function(resolved){console.log(resolved);_this.setState(function(prevState){var clans=_toConsumableArray(prevState.data.MyClans);var clanIndex=clans.findIndex(function(obj){return obj.id===clanId;});clans.splice(clanIndex,1);var data=_objectSpread({},prevState.data,{MyClans:clans});return{data:data};});}).catch(function(err){console.log(err);});};_this.removeFromWishList=function(itemId){console.log(\"wish list nix\");removeItemFromWishList(_this.props.token,_this.props.user,itemId).then(function(resolved){console.log(resolved);_this.setState(function(prevState){var buys=_toConsumableArray(prevState.data.Buys);var itemIndex=buys.findIndex(function(obj){return obj.id===itemId;});buys.splice(itemIndex,1);var data=_objectSpread({},prevState.data,{Buys:buys});return{data:data};});}).catch(function(err){console.log(err);});};return _this;}_createClass(DashboardView,[{key:\"componentWillMount\",value:function componentWillMount(){var _this2=this;fetchData(this.props.token,this.props.user.id).then(function(resolved){console.log(resolved);_this2.setState({data:resolved});}).catch(function(err){console.log(err);});}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{id:\"dashboard\",className:\"row row-border justify-content-center\"},this.state.showAddDeal&&/*#__PURE__*/React.createElement(AddDeal,{editDeal:this.state.editDeal,showAddDeal:this.showAddDeal,user:this.props.user,newDeal:this.newDeal,updateDeal:this.updateDeal}),/*#__PURE__*/React.createElement(\"div\",{id:\"main-content\",className:\"col-sm-12 col-md-10 spartan py-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{id:\"profile-card\",className:\"col-sm-12 col-lg-6 d-flex\"},/*#__PURE__*/React.createElement(Profile,{updateProfile:this.updateProfile})),/*#__PURE__*/React.createElement(\"div\",{id:\"groups-card\",className:\"col-sm-12 col-lg-6 d-flex\"},/*#__PURE__*/React.createElement(MyGroups,{data:this.state.data,leaveGroup:this.leaveGroup}))),/*#__PURE__*/React.createElement(\"div\",{className:\"row mt-4\"},/*#__PURE__*/React.createElement(\"div\",{id:\"buys-card\",className:\"col-12\"},/*#__PURE__*/React.createElement(Buys,{data:this.state.data,showAddDeal:this.showAddDeal,editDeal:this.editDeal,removeDeal:this.removeDeal,user:this.props.user,token:this.props.token,removeFromWishList:this.removeFromWishList}))))));}}]);return DashboardView;}(Component);export default connect(mapStateToProps)(DashboardView);function fetchData(token,userid){console.log(\"fetching data......\",token,userid);return new Promise(function(resolve,reject){var request={userId:userid};var options={method:\"POST\",headers:new Headers({Authorization:\"Bearer \"+token,\"Content-Type\":\"application/json\"}),body:JSON.stringify({entity:request})};fetch(\"/accounts/dashboard\",options).then(function(res){if(res)return res.json();}).then(function(res){if(!res.success){// Return to account detail and display error message\nresolve(res);}else{reject(\"Unable to retrieve data\");}});});}function insertDeal(token,userid,payload){console.log(\"fetching data......\",token,userid);payload.user_id=userid;// Append user_id to payload\nreturn new Promise(function(resolve,reject){var options={method:\"POST\",headers:new Headers({Authorization:\"Bearer \"+token,\"Content-Type\":\"application/json\"}),body:JSON.stringify({entity:payload})};fetch(\"/accounts/insertDeal\",options).then(function(res){return res.json();}).then(function(res){if(res.success){// Return to account detail and display error message\nresolve(res);}else{reject(res);}});});}function updateDealEdit(token,userid,payload){console.log(\"fetching data......\",token,userid);payload.user_id=userid;// Append user_id to payload\nreturn new Promise(function(resolve,reject){var options={method:\"POST\",headers:new Headers({Authorization:\"Bearer \"+token,\"Content-Type\":\"application/json\"}),body:JSON.stringify({entity:payload})};fetch(\"/accounts/updateDeal\",options).then(function(res){return res.json();}).then(function(res){if(res.success){// Return to account detail and display error message\nresolve(res);}else{reject(res);}});});}function removeDealDB(token,userid,payload){return new Promise(function(resolve,reject){var options={method:\"POST\",headers:new Headers({Authorization:\"Bearer \"+token,\"Content-Type\":\"application/json\"}),body:JSON.stringify({entity:{dealId:payload}})};fetch(\"/accounts/removeDealDB\",options).then(function(res){return res.json();}).then(function(res){if(res.success){// Return to account detail and display error message\nresolve(res);}else{reject(res);}});});}function updateUserProfile(token,userid,payload){var payloadObj={userId:userid,values:payload};console.log(\"fetching data......\",token,userid);return new Promise(function(resolve,reject){var options={method:\"POST\",headers:new Headers({Authorization:\"Bearer \"+token,\"Content-Type\":\"application/json\"}),body:JSON.stringify({entity:payloadObj})};fetch(\"/accounts/updateUserProfile\",options).then(function(res){return res.json();}).then(function(res){if(res.success){// Return to account detail and display error message\nresolve(res);}else{reject(res);}});});}function removeUserFromGroup(token,user,clanId){console.log(\"fetching data......\");return new Promise(function(resolve,reject){var request={user:user,clanId:clanId};var options={method:\"POST\",headers:new Headers({Authorization:\"Bearer \"+token,\"Content-Type\":\"application/json\"}),body:JSON.stringify({entity:request})};fetch(\"/accounts/removeUserFromClan\",options).then(function(res){return res.json();}).then(function(res){console.log(res);if(res.success){// Return to account detail and display error message\nresolve(res);}else{reject(\"Unable to retrieve data\");}});});}function removeItemFromWishList(token,user,itemId){console.log(\"fetching data......\");return new Promise(function(resolve,reject){var request={user:user,itemId:itemId};var options={method:\"POST\",headers:new Headers({Authorization:\"Bearer \"+token,\"Content-Type\":\"application/json\"}),body:JSON.stringify({entity:request})};fetch(\"/accounts/deleteWishListBuy\",options).then(function(res){return res.json();}).then(function(res){console.log(res);if(res.success){// Return to account detail and display error message\nresolve(res);}else{reject(\"Unable to retrieve data\");}});});}","map":{"version":3,"sources":["C:/Users/xmark/Desktop/Code/Servers/FC-SERVER/food-commune/src/components/DashboardView.jsx"],"names":["React","Component","connect","AddDeal","Profile","Buys","Deals","MyGroups","mapStateToProps","state","user","token","DashboardView","data","showAddDeal","editDeal","newDeal","payload","insertDeal","props","id","then","resolved","console","log","setState","prevState","push","catch","err","updateDeal","updateDealEdit","deal","findIndex","obj","removeDeal","removeDealDB","splice","toggle","index","updateProfile","updateUserProfile","keys","Object","forEach","k","leaveGroup","clanId","removeUserFromGroup","clans","MyClans","clanIndex","removeFromWishList","itemId","removeItemFromWishList","buys","itemIndex","fetchData","userid","Promise","resolve","reject","request","userId","options","method","headers","Headers","Authorization","body","JSON","stringify","entity","fetch","res","json","success","user_id","dealId","payloadObj","values"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport AddDeal from \"./AddDeal\";\r\nimport Profile from \"./Profile\";\r\nimport Buys from \"./Buys\";\r\nimport Deals from \"./Deals\";\r\nimport MyGroups from \"./MyGroups\";\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    user: state.user,\r\n    token: state.token\r\n  };\r\n};\r\n\r\nclass DashboardView extends Component {\r\n  state = {\r\n    // token: null,\r\n    // user: null,\r\n    data: null,\r\n    showAddDeal: false,\r\n    editDeal: null\r\n  };\r\n\r\n  componentWillMount() {\r\n    fetchData(this.props.token, this.props.user.id)\r\n      .then(resolved => {\r\n        console.log(resolved);\r\n        this.setState({ data: resolved });\r\n      })\r\n      .catch(err => {\r\n        console.log(err);\r\n      });\r\n  }\r\n\r\n  newDeal = payload => {\r\n    insertDeal(this.props.token, this.props.user.id, payload)\r\n      .then(resolved => {\r\n        console.log(resolved);\r\n        this.setState(\r\n          prevState => {\r\n            let Deals = [...prevState.data.Deals];\r\n\r\n            Deals.push(payload);\r\n            let data = { ...prevState.data, Deals: Deals };\r\n            return { data: data };\r\n          },\r\n          () => {\r\n            this.setState({ showAddDeal: false });\r\n          }\r\n        );\r\n      })\r\n      .catch(err => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  updateDeal = payload => {\r\n    updateDealEdit(this.props.token, this.props.user.id, payload)\r\n      .then(resolved => {\r\n        console.log(resolved);\r\n        this.setState(\r\n          prevState => {\r\n            let Deals = [...prevState.data.Deals];\r\n            let deal = Deals.findIndex(obj => {\r\n              return obj.id === payload.id;\r\n            });\r\n            Deals[deal] = payload;\r\n\r\n            let data = { ...prevState.data, Deals: Deals };\r\n            return { data: data };\r\n          },\r\n          () => {\r\n            this.setState({ showAddDeal: false });\r\n          }\r\n        );\r\n      })\r\n      .catch(err => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  removeDeal = payload => {\r\n    removeDealDB(this.props.token, this.props.user.id, payload)\r\n      .then(resolved => {\r\n        console.log(resolved);\r\n        this.setState(\r\n          prevState => {\r\n            let Deals = [...prevState.data.Deals];\r\n            let deal = Deals.findIndex(obj => {\r\n              return obj.id === payload;\r\n            });\r\n            Deals.splice(deal, 1);\r\n\r\n            let data = { ...prevState.data, Deals: Deals };\r\n            return { data: data };\r\n          }\r\n        );\r\n      })\r\n      .catch(err => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  showAddDeal = toggle => {\r\n    this.setState({\r\n      showAddDeal: this.state.showAddDeal ? false : true,\r\n      editDeal: null\r\n    });\r\n  };\r\n\r\n  editDeal = index => {\r\n    this.setState({\r\n      editDeal: this.state.data.Deals[index],\r\n      showAddDeal: true\r\n    });\r\n  };\r\n\r\n  updateProfile = payload => {\r\n    updateUserProfile(this.props.token, this.props.user.id, payload)\r\n      .then(resolved => {\r\n        console.log(resolved);\r\n        this.setState(prevState => {\r\n          let user = { ...prevState.user };\r\n          let keys = Object.keys(payload);\r\n          keys.forEach(k => {\r\n            user[k] = payload[k];\r\n          });\r\n\r\n          return { user: user };\r\n        });\r\n      })\r\n      .catch(err => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  leaveGroup = (clanId) => {\r\n    removeUserFromGroup(\r\n      this.props.token,\r\n      this.props.user,\r\n      clanId\r\n    )\r\n      .then(resolved => {\r\n        console.log(resolved);\r\n        this.setState((prevState) => {\r\n          let clans = [...prevState.data.MyClans];\r\n          let clanIndex = clans.findIndex(obj => obj.id === clanId);\r\n          clans.splice(clanIndex, 1);\r\n          let data = { ...prevState.data, MyClans: clans };\r\n          return { data: data };\r\n        })\r\n      })\r\n      .catch(err => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  removeFromWishList = (itemId) => {\r\n    console.log(\"wish list nix\");\r\n    removeItemFromWishList(\r\n      this.props.token,\r\n      this.props.user,\r\n      itemId\r\n    )\r\n      .then(resolved => {\r\n        console.log(resolved);\r\n        this.setState((prevState) => {\r\n          let buys = [...prevState.data.Buys];\r\n          let itemIndex = buys.findIndex(obj => obj.id === itemId);\r\n          buys.splice(itemIndex, 1);\r\n          let data = { ...prevState.data, Buys: buys };\r\n          return { data: data };\r\n        })\r\n      })\r\n      .catch(err => {\r\n        console.log(err);\r\n      });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <React.Fragment>\r\n        {/* Dashboard */}\r\n        <div id=\"dashboard\" className=\"row row-border justify-content-center\">\r\n          {/* Add Deal */}\r\n          {this.state.showAddDeal && (\r\n            <AddDeal\r\n              editDeal={this.state.editDeal}\r\n              showAddDeal={this.showAddDeal}\r\n              user={this.props.user}\r\n              newDeal={this.newDeal}\r\n              updateDeal={this.updateDeal}\r\n            />\r\n          )}\r\n          <div id=\"main-content\" className=\"col-sm-12 col-md-10 spartan py-4\">\r\n            <div className=\"row\">\r\n              <div id=\"profile-card\" className=\"col-sm-12 col-lg-6 d-flex\">\r\n                {/* <!-- PROFILE --> */}\r\n\r\n                <Profile updateProfile={this.updateProfile} />\r\n              </div>\r\n\r\n              <div id=\"groups-card\" className=\"col-sm-12 col-lg-6 d-flex\">\r\n                {/* <!-- GROUPS --> */}\r\n                <MyGroups data={this.state.data} leaveGroup={this.leaveGroup} />\r\n              </div>\r\n            </div>\r\n            <div className=\"row mt-4\">\r\n              <div id=\"buys-card\" className=\"col-12\">\r\n                {/* <!-- BUYS --> */}\r\n                <Buys\r\n                  data={this.state.data}\r\n                  showAddDeal={this.showAddDeal}\r\n                  editDeal={this.editDeal}\r\n                  removeDeal={this.removeDeal}\r\n                  user={this.props.user}\r\n                  token={this.props.token}\r\n                  removeFromWishList={this.removeFromWishList}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(DashboardView);\r\n\r\nfunction fetchData(token, userid) {\r\n  console.log(\"fetching data......\", token, userid);\r\n  return new Promise((resolve, reject) => {\r\n    let request = { userId: userid };\r\n    let options = {\r\n      method: \"POST\",\r\n      headers: new Headers({\r\n        Authorization: \"Bearer \" + token,\r\n        \"Content-Type\": \"application/json\"\r\n      }),\r\n      body: JSON.stringify({\r\n        entity: request\r\n      })\r\n    };\r\n    fetch(\"/accounts/dashboard\", options)\r\n      .then(res => {\r\n        if (res) return res.json();\r\n      })\r\n      .then(res => {\r\n        if (!res.success) {\r\n          // Return to account detail and display error message\r\n          resolve(res);\r\n        } else {\r\n          reject(\"Unable to retrieve data\");\r\n        }\r\n      });\r\n  });\r\n}\r\n\r\nfunction insertDeal(token, userid, payload) {\r\n  console.log(\"fetching data......\", token, userid);\r\n  payload.user_id = userid; // Append user_id to payload\r\n  return new Promise((resolve, reject) => {\r\n    let options = {\r\n      method: \"POST\",\r\n      headers: new Headers({\r\n        Authorization: \"Bearer \" + token,\r\n        \"Content-Type\": \"application/json\"\r\n      }),\r\n      body: JSON.stringify({\r\n        entity: payload\r\n      })\r\n    };\r\n    fetch(\"/accounts/insertDeal\", options)\r\n      .then(res => {\r\n        return res.json();\r\n      })\r\n      .then(res => {\r\n        if (res.success) {\r\n          // Return to account detail and display error message\r\n          resolve(res);\r\n        } else {\r\n          reject(res);\r\n        }\r\n      });\r\n  });\r\n}\r\n\r\nfunction updateDealEdit(token, userid, payload) {\r\n  console.log(\"fetching data......\", token, userid);\r\n  payload.user_id = userid; // Append user_id to payload\r\n  return new Promise((resolve, reject) => {\r\n    let options = {\r\n      method: \"POST\",\r\n      headers: new Headers({\r\n        Authorization: \"Bearer \" + token,\r\n        \"Content-Type\": \"application/json\"\r\n      }),\r\n      body: JSON.stringify({\r\n        entity: payload\r\n      })\r\n    };\r\n    fetch(\"/accounts/updateDeal\", options)\r\n      .then(res => {\r\n        return res.json();\r\n      })\r\n      .then(res => {\r\n        if (res.success) {\r\n          // Return to account detail and display error message\r\n          resolve(res);\r\n        } else {\r\n          reject(res);\r\n        }\r\n      });\r\n  });\r\n}\r\n\r\nfunction removeDealDB(token, userid, payload) {\r\n  return new Promise((resolve, reject) => {\r\n    let options = {\r\n      method: \"POST\",\r\n      headers: new Headers({\r\n        Authorization: \"Bearer \" + token,\r\n        \"Content-Type\": \"application/json\"\r\n      }),\r\n      body: JSON.stringify({\r\n        entity: { dealId: payload }\r\n      })\r\n    };\r\n    fetch(\"/accounts/removeDealDB\", options)\r\n      .then(res => {\r\n        return res.json();\r\n      })\r\n      .then(res => {\r\n        if (res.success) {\r\n          // Return to account detail and display error message\r\n          resolve(res);\r\n        } else {\r\n          reject(res);\r\n        }\r\n      });\r\n  });\r\n}\r\n\r\nfunction updateUserProfile(token, userid, payload) {\r\n  let payloadObj = { userId: userid, values: payload };\r\n  console.log(\"fetching data......\", token, userid);\r\n  return new Promise((resolve, reject) => {\r\n    let options = {\r\n      method: \"POST\",\r\n      headers: new Headers({\r\n        Authorization: \"Bearer \" + token,\r\n        \"Content-Type\": \"application/json\"\r\n      }),\r\n      body: JSON.stringify({\r\n        entity: payloadObj\r\n      })\r\n    };\r\n    fetch(\"/accounts/updateUserProfile\", options)\r\n      .then(res => {\r\n        return res.json();\r\n      })\r\n      .then(res => {\r\n        if (res.success) {\r\n          // Return to account detail and display error message\r\n          resolve(res);\r\n        } else {\r\n          reject(res);\r\n        }\r\n      });\r\n  });\r\n}\r\n\r\nfunction removeUserFromGroup(token, user, clanId) {\r\n  console.log(\"fetching data......\");\r\n  return new Promise((resolve, reject) => {\r\n    let request = { user: user, clanId: clanId };\r\n    let options = {\r\n      method: \"POST\",\r\n      headers: new Headers({\r\n        Authorization: \"Bearer \" + token,\r\n        \"Content-Type\": \"application/json\"\r\n      }),\r\n      body: JSON.stringify({\r\n        entity: request\r\n      })\r\n    };\r\n    fetch(\"/accounts/removeUserFromClan\", options)\r\n      .then(res => {\r\n        return res.json();\r\n      })\r\n      .then(res => {\r\n        console.log(res);\r\n        if (res.success) {\r\n          // Return to account detail and display error message\r\n          resolve(res);\r\n        } else {\r\n          reject(\"Unable to retrieve data\");\r\n        }\r\n      });\r\n  });\r\n}\r\n\r\nfunction removeItemFromWishList(token, user, itemId) {\r\n  console.log(\"fetching data......\");\r\n  return new Promise((resolve, reject) => {\r\n    let request = { user: user, itemId: itemId };\r\n    let options = {\r\n      method: \"POST\",\r\n      headers: new Headers({\r\n        Authorization: \"Bearer \" + token,\r\n        \"Content-Type\": \"application/json\"\r\n      }),\r\n      body: JSON.stringify({\r\n        entity: request\r\n      })\r\n    };\r\n    fetch(\"/accounts/deleteWishListBuy\", options)\r\n      .then(res => {\r\n        return res.json();\r\n      })\r\n      .then(res => {\r\n        console.log(res);\r\n        if (res.success) {\r\n          // Return to account detail and display error message\r\n          resolve(res);\r\n        } else {\r\n          reject(\"Unable to retrieve data\");\r\n        }\r\n      });\r\n  });\r\n}"]},"metadata":{},"sourceType":"module"}