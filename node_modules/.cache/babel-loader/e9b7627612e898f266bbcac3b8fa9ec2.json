{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\xmark\\\\Desktop\\\\Code\\\\Servers\\\\Qumoc\\\\food-commune\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\xmark\\\\Desktop\\\\Code\\\\Servers\\\\Qumoc\\\\food-commune\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\xmark\\\\Desktop\\\\Code\\\\Servers\\\\Qumoc\\\\food-commune\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\xmark\\\\Desktop\\\\Code\\\\Servers\\\\Qumoc\\\\food-commune\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{connect}from\"react-redux\";import{oktaSession}from\"../store/actions/index\";import{session,getToken,signOut}from\"../util/okta\";import{Link,Redirect,Route}from\"react-router-dom\";import DashboardView from\"./DashboardView\";var mapStateToProps=function mapStateToProps(state){return{sessionExists:state.sessionExists,provisional:state.provisional,user:state.user,tokenExpiresAt:state.tokenExpiresAt,expiringSession:state.expiringSession};};function mapDispatchToProps(dispatch){return{};}var UserStatus=/*#__PURE__*/function(_Component){_inherits(UserStatus,_Component);var _super=_createSuper(UserStatus);function UserStatus(){var _this;_classCallCheck(this,UserStatus);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={userMenu:false};_this.userMenu=function(){console.log(\"clicked\");_this.setState({userMenu:_this.state.userMenu?false:true});};_this.continueSession=function(){getToken({user:{profile:{login:_this.props.user.email}}});};_this.endSession=function(){signOut();};return _this;}_createClass(UserStatus,[{key:\"componentWillMount\",value:function componentWillMount(){session();}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(React.Fragment,null,this.props.expiringSession&&/*#__PURE__*/React.createElement(\"div\",{className:\"session-exp-warning\"},/*#__PURE__*/React.createElement(\"span\",{style:{color:\"red\"}},\"Your session is about to expire!\"),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-around mt-5\"},/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-sm btn-danger\",onClick:this.endSession},\"Log Out\"),/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-sm btn-success\",onClick:this.continueSession},\"Continue\"))),this.props.user&&/*#__PURE__*/React.createElement(Route,null,/*#__PURE__*/React.createElement(Redirect,{to:{pathname:\"/foodcommune/dashboard\"}})),!this.props.user&&/*#__PURE__*/React.createElement(Route,null,/*#__PURE__*/React.createElement(Redirect,{to:{pathname:\"/foodcommune\"}})),!this.props.user&&/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"span\",{id:\"open-account\",className:\"nav-item nav-link\",onClick:this.props.createAccount},\"Create Account\"),/*#__PURE__*/React.createElement(\"span\",{id:\"open-signin\",className:\"nav-item nav-link\"},/*#__PURE__*/React.createElement(Link,{to:\"/foodcommune/SignIn\",className:\"link-gray\"},\"Log In\"))),this.props.user&&/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{onClick:this.userMenu,style:{display:\"flex\",alignItems:\"center\",position:\"relative\"}},this.props.user.image_url&&/*#__PURE__*/React.createElement(\"div\",{className:\"img-wrap-xs mr-1\"},/*#__PURE__*/React.createElement(\"img\",{src:\"/foodcommune/Uploads/Profile_Images/\".concat(this.props.user.image_url),style:{width:\"inherit\"}})),!this.props.user.image_url&&/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-user-circle fa-2x mr-1 fc-green\"}),/*#__PURE__*/React.createElement(\"span\",{id:\"user\",style:{color:\"dimgray\"}},this.props.user.first_name),/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-caret-down ml-3\"}),this.state.userMenu&&/*#__PURE__*/React.createElement(\"div\",{id:\"user-menu\"},/*#__PURE__*/React.createElement(\"ul\",{style:{listStyle:\"none\",padding:\"10px\"}},/*#__PURE__*/React.createElement(\"li\",{style:{cursor:\"pointer\"},onClick:this.endSession},\"Sign Out\"),/*#__PURE__*/React.createElement(\"li\",{style:{cursor:\"pointer\"}},/*#__PURE__*/React.createElement(Link,{to:\"/foodcommune/dashboard\"},\"Dashboard\")),/*#__PURE__*/React.createElement(\"li\",{style:{cursor:\"pointer\"},onClick:this.tokenExpireCheck},\"Settings\"))))));}}]);return UserStatus;}(Component);export default connect(mapStateToProps,mapDispatchToProps)(UserStatus);","map":{"version":3,"sources":["C:/Users/xmark/Desktop/Code/Servers/Qumoc/food-commune/src/components/UserStatus.jsx"],"names":["React","Component","connect","oktaSession","session","getToken","signOut","Link","Redirect","Route","DashboardView","mapStateToProps","state","sessionExists","provisional","user","tokenExpiresAt","expiringSession","mapDispatchToProps","dispatch","UserStatus","userMenu","console","log","setState","continueSession","profile","login","props","email","endSession","color","pathname","createAccount","display","alignItems","position","image_url","width","first_name","listStyle","padding","cursor","tokenExpireCheck"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { oktaSession } from \"../store/actions/index\";\r\nimport { session, getToken, signOut } from \"../util/okta\";\r\nimport { Link, Redirect, Route } from \"react-router-dom\";\r\nimport DashboardView from \"./DashboardView\";\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    sessionExists: state.sessionExists,\r\n    provisional: state.provisional,\r\n    user: state.user,\r\n    tokenExpiresAt: state.tokenExpiresAt,\r\n    expiringSession: state.expiringSession\r\n  };\r\n};\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n  return {};\r\n}\r\n\r\nclass UserStatus extends Component {\r\n  state = {\r\n    userMenu: false\r\n  };\r\n\r\n  componentWillMount() {\r\n    session();\r\n  }\r\n\r\n  userMenu = () => {\r\n    console.log(\"clicked\");\r\n    this.setState({ userMenu: this.state.userMenu ? false : true });\r\n  };\r\n\r\n  continueSession = () => {\r\n    getToken({ user: { profile: { login: this.props.user.email } } });\r\n  };\r\n\r\n  endSession = () => {\r\n    signOut();\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <React.Fragment>\r\n        {/* WARNING - SESSION EXPIRING */}\r\n        {this.props.expiringSession && (\r\n          <div className=\"session-exp-warning\">\r\n            <span style={{ color: \"red\" }}>\r\n              Your session is about to expire!\r\n            </span>\r\n            <div className=\"d-flex justify-content-around mt-5\">\r\n              <button\r\n                className=\"btn btn-sm btn-danger\"\r\n                onClick={this.endSession}\r\n              >\r\n                Log Out\r\n              </button>\r\n              <button\r\n                className=\"btn btn-sm btn-success\"\r\n                onClick={this.continueSession}\r\n              >\r\n                Continue\r\n              </button>\r\n            </div>\r\n          </div>\r\n        )}\r\n        {/* REDIRECT SIGNED IN USER */}\r\n        {this.props.user && (\r\n          <Route>\r\n            <Redirect to={{ pathname: \"/foodcommune/dashboard\" }}></Redirect>\r\n          </Route>\r\n        )}\r\n        {/* USER SIGNED OUT REDIRECT */}\r\n        {!this.props.user && (\r\n          <Route>\r\n            <Redirect to={{ pathname: \"/foodcommune\" }}></Redirect>\r\n          </Route>\r\n        )}\r\n        {/* User sign in/create account */}\r\n        {!this.props.user && (\r\n          <React.Fragment>\r\n            <span\r\n              id=\"open-account\"\r\n              className=\"nav-item nav-link\"\r\n              onClick={this.props.createAccount}\r\n            >\r\n              Create Account\r\n            </span>\r\n            <span id=\"open-signin\" className=\"nav-item nav-link\">\r\n              <Link to=\"/foodcommune/SignIn\" className=\"link-gray\">\r\n                Log In\r\n              </Link>\r\n            </span>\r\n          </React.Fragment>\r\n        )}\r\n        {/* User signed in */}\r\n        {this.props.user && (\r\n          <div>\r\n            <div\r\n              onClick={this.userMenu}\r\n              style={{\r\n                display: \"flex\",\r\n                alignItems: \"center\",\r\n                position: \"relative\"\r\n              }}\r\n            >\r\n              {this.props.user.image_url && (\r\n                <div className=\"img-wrap-xs mr-1\">\r\n                  <img\r\n                    src={`/foodcommune/Uploads/Profile_Images/${this.props.user.image_url}`}\r\n                    style={{ width: \"inherit\" }}\r\n                  ></img>\r\n                </div>\r\n              )}\r\n              {!this.props.user.image_url && (\r\n                <i className=\"fas fa-user-circle fa-2x mr-1 fc-green\"></i>\r\n              )}\r\n              <span id=\"user\" style={{ color: \"dimgray\" }}>\r\n                {this.props.user.first_name}\r\n              </span>\r\n              <i className=\"fas fa-caret-down ml-3\"></i>\r\n              {this.state.userMenu && (\r\n                <div id=\"user-menu\">\r\n                  <ul style={{ listStyle: \"none\", padding: \"10px\" }}>\r\n                    <li\r\n                      style={{ cursor: \"pointer\" }}\r\n                      onClick={this.endSession}\r\n                    >\r\n                      Sign Out\r\n                    </li>\r\n                    <li style={{ cursor: \"pointer\" }}>\r\n                      <Link to=\"/foodcommune/dashboard\">Dashboard</Link>\r\n                    </li>\r\n                    <li\r\n                      style={{ cursor: \"pointer\" }}\r\n                      onClick={this.tokenExpireCheck}\r\n                    >\r\n                      Settings\r\n                    </li>\r\n                  </ul>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        )}\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(UserStatus);\r\n"]},"metadata":{},"sourceType":"module"}