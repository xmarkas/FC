{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\xmark\\\\Desktop\\\\Code\\\\Servers\\\\Qumoc\\\\food-commune\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\xmark\\\\Desktop\\\\Code\\\\Servers\\\\Qumoc\\\\food-commune\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\xmark\\\\Desktop\\\\Code\\\\Servers\\\\Qumoc\\\\food-commune\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\xmark\\\\Desktop\\\\Code\\\\Servers\\\\Qumoc\\\\food-commune\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';var MyGroupProfile=/*#__PURE__*/function(_Component){_inherits(MyGroupProfile,_Component);var _super=_createSuper(MyGroupProfile);function MyGroupProfile(){var _this;_classCallCheck(this,MyGroupProfile);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={edit:false,area:\"_\",imageFile:null,imgUpload:false};_this.stars=function(groupScore){var score=[];for(var s=0;s<5;s++){if(s<groupScore){score.push(/*#__PURE__*/React.createElement(\"i\",{key:s,className:\"fas fa-star sY\"}));}else{score.push(/*#__PURE__*/React.createElement(\"i\",{key:s,className:\"fas fa-star sG\"}));}}return score;};_this.saveProfile=function(){_this.setState({edit:false});var payload={};// Append area if has value\nif(_this.state.area!==\"_\")payload.area=_this.state.area;// Append file name and user id to payload\nif(_this.state.imageFile){var groupName=_this.props.data.Clan[0].name.replace(/\\s|\"|'/g,\"\");var file=_this.state.imageFile;var formData=new FormData();formData.append(\"file\",file);payload.image_url=\"\".concat(groupName,\"@\").concat(file.name);payload.image_url=payload.image_url.replace(/\\s|\"|'/g,\"\");console.log(payload);// Send image\nfetch(\"/foodcommune/imageUpload/group?groupname=\".concat(groupName),{body:formData,method:\"POST\"}).then(function(res){return res.json();}).then(function(res){console.log(res);});}if(Object.keys(payload).length!==0)_this.props.updateClan(payload);};_this.groupImgUpload=function(){_this.setState(function(prevState){return{imgUpload:true};},function(){// $(\"#image\").trigger(\"click\");\n});};_this.imgPreview=function(ev){var file=document.getElementById(\"image\").files[0];_this.setState({imageFile:file});var Reader=new FileReader();Reader.onloadend=function(e){// $(\"#preview\").attr(\"src\", e.target.result);\n};Reader.readAsDataURL(file);};return _this;}_createClass(MyGroupProfile,[{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"card bg-light\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card-header\",style:{display:\"flex\",justifyContent:\"space-between\"}},/*#__PURE__*/React.createElement(\"div\",null,\"Group Page\"),/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-sm btn-primary\",onClick:function onClick(){return window.location.href=\"/foodcommune/groups.html\";}},\"groups\"),!this.props.userIsMember&&/*#__PURE__*/React.createElement(\"div\",null,!this.state.edit?/*#__PURE__*/React.createElement(\"div\",{id:\"edit\"},/*#__PURE__*/React.createElement(\"i\",{style:{cursor:\"pointer\"},className:\"fas fa-pencil-alt\",onClick:function onClick(){_this2.setState({edit:true});}})):/*#__PURE__*/React.createElement(\"button\",{id:\"save\",onClick:this.saveProfile,className:\"btn btn-sm btn-success\",style:{font:\"small-caption\"}},\"save\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"card-body\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"input\",{id:\"image\",type:\"file\",style:{display:\"none\"},onChange:this.imgPreview}),/*#__PURE__*/React.createElement(\"div\",{className:\"col-6 text-center d-flex justify-content-center\"},this.state.edit&&/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-camera-retro fa-3x\",onClick:this.groupImgUpload}),!this.state.imgUpload&&!this.props.data.Clan[0].image_url&&/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-users fa-7x\"}),!this.state.imgUpload&&this.props.data.Clan[0].image_url&&/*#__PURE__*/React.createElement(\"div\",{className:\"img-wrap-lg\"},/*#__PURE__*/React.createElement(\"img\",{src:\"./Uploads/Group_Images/\".concat(this.props.data.Clan[0].image_url),style:{width:\"inherit\"}})),this.state.imgUpload&&/*#__PURE__*/React.createElement(\"div\",{className:\"img-wrap-lg\"},/*#__PURE__*/React.createElement(\"img\",{id:\"preview\",src:\"\",style:{width:\"inherit\"}}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-6 align-self-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row justify-content-center text-center\"},this.props.data.Clan[0].name),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col text-center\"},this.stars(this.props.data.Clan[0].score))))),/*#__PURE__*/React.createElement(\"div\",{id:\"user-details\",className:\"row mt-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-6\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row justify-content-center\"},\"Area\"),/*#__PURE__*/React.createElement(\"div\",{className:\"row justify-content-center text-muted\"},this.state.edit?/*#__PURE__*/React.createElement(\"input\",{id:\"area\",placeholder:\"general location\",onChange:function onChange(ev){return _this2.setState({area:ev.target.value});}}):this.props.data.Clan[0].area))))));}}]);return MyGroupProfile;}(Component);export default MyGroupProfile;","map":{"version":3,"sources":["C:/Users/xmark/Desktop/Code/Servers/Qumoc/food-commune/src/components/MyGroupProfile.jsx"],"names":["React","Component","MyGroupProfile","state","edit","area","imageFile","imgUpload","stars","groupScore","score","s","push","saveProfile","setState","payload","groupName","props","data","Clan","name","replace","file","formData","FormData","append","image_url","console","log","fetch","body","method","then","res","json","Object","keys","length","updateClan","groupImgUpload","prevState","imgPreview","ev","document","getElementById","files","Reader","FileReader","onloadend","e","readAsDataURL","display","justifyContent","window","location","href","userIsMember","cursor","font","width","target","value"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\n\r\nclass MyGroupProfile extends Component {\r\n  state = {\r\n    edit: false,\r\n    area: \"_\",\r\n    imageFile: null,\r\n    imgUpload: false\r\n  };\r\n\r\n  stars = groupScore => {\r\n    let score = [];\r\n    for (let s = 0; s < 5; s++) {\r\n      if (s < groupScore) {\r\n        score.push(<i key={s} className=\"fas fa-star sY\"></i>);\r\n      } else {\r\n        score.push(<i key={s} className=\"fas fa-star sG\"></i>);\r\n      }\r\n    }\r\n    return score;\r\n  };\r\n\r\n  saveProfile = () => {\r\n    this.setState({ edit: false });\r\n\r\n    let payload = {};\r\n\r\n    // Append area if has value\r\n    if (this.state.area !== \"_\") payload.area = this.state.area;\r\n\r\n    // Append file name and user id to payload\r\n    if (this.state.imageFile) {\r\n      let groupName = this.props.data.Clan[0].name.replace(/\\s|\"|'/g, \"\");\r\n      let file = this.state.imageFile;\r\n      let formData = new FormData();\r\n      formData.append(\"file\", file);\r\n\r\n      payload.image_url = `${groupName}@${file.name}`;\r\n      payload.image_url = payload.image_url.replace(/\\s|\"|'/g, \"\");\r\n      console.log(payload);\r\n\r\n      // Send image\r\n      fetch(`/foodcommune/imageUpload/group?groupname=${groupName}`, {\r\n        body: formData,\r\n        method: \"POST\"\r\n      })\r\n        .then(res => {\r\n          return res.json();\r\n        })\r\n        .then(res => {\r\n          console.log(res);\r\n        });\r\n    }\r\n    \r\n    if (Object.keys(payload).length !== 0) this.props.updateClan(payload);\r\n  };\r\n\r\n  groupImgUpload = () => {\r\n    this.setState(\r\n      prevState => {\r\n        return { imgUpload: true };\r\n      },\r\n      () => {\r\n        // $(\"#image\").trigger(\"click\");\r\n      }\r\n    );\r\n  };\r\n\r\n  imgPreview = ev => {\r\n    let file = document.getElementById(\"image\").files[0];\r\n    this.setState({ imageFile: file });\r\n    let Reader = new FileReader();\r\n\r\n    Reader.onloadend = function(e) {\r\n      // $(\"#preview\").attr(\"src\", e.target.result);\r\n    };\r\n\r\n    Reader.readAsDataURL(file);\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <React.Fragment>\r\n        <div className=\"card bg-light\">\r\n          <div\r\n            className=\"card-header\"\r\n            style={{ display: \"flex\", justifyContent: \"space-between\" }}\r\n          >\r\n            <div>Group Page</div>\r\n            <button\r\n              className=\"btn btn-sm btn-primary\"\r\n              onClick={() =>\r\n                (window.location.href = \"/foodcommune/groups.html\")\r\n              }\r\n            >\r\n              groups\r\n            </button>\r\n            {!this.props.userIsMember && (\r\n              <div>\r\n                {!this.state.edit ? (\r\n                  <div id=\"edit\">\r\n                    <i\r\n                    style={{cursor: \"pointer\"}}\r\n                      className=\"fas fa-pencil-alt\"\r\n                      onClick={() => {\r\n                        this.setState({ edit: true });\r\n                      }}\r\n                    ></i>\r\n                  </div>\r\n                ) : (\r\n                  <button\r\n                    id=\"save\"\r\n                    onClick={this.saveProfile}\r\n                    className=\"btn btn-sm btn-success\"\r\n                    style={{ font: \"small-caption\" }}\r\n                  >\r\n                    save\r\n                  </button>\r\n                )}\r\n              </div>\r\n            )}\r\n          </div>\r\n          <div className=\"card-body\">\r\n            {/* ROW */}\r\n            <div className=\"row\">\r\n              <input\r\n                id=\"image\"\r\n                type=\"file\"\r\n                style={{ display: \"none\" }}\r\n                onChange={this.imgPreview}\r\n              ></input>\r\n              <div className=\"col-6 text-center d-flex justify-content-center\">\r\n                {this.state.edit && (\r\n                  <i\r\n                    className=\"fas fa-camera-retro fa-3x\"\r\n                    onClick={this.groupImgUpload}\r\n                  ></i>\r\n                )}\r\n                {!this.state.imgUpload &&\r\n                  !this.props.data.Clan[0].image_url && (\r\n                    <i className=\"fas fa-users fa-7x\"></i>\r\n                  )}\r\n                {!this.state.imgUpload && this.props.data.Clan[0].image_url && (\r\n                  <div className=\"img-wrap-lg\">\r\n                    <img\r\n                      src={`./Uploads/Group_Images/${this.props.data.Clan[0].image_url}`}\r\n                      style={{ width: \"inherit\" }}\r\n                    ></img>\r\n                  </div>\r\n                )}\r\n                {this.state.imgUpload && (\r\n                  <div className=\"img-wrap-lg\">\r\n                    <img id=\"preview\" src=\"\" style={{ width: \"inherit\" }}></img>\r\n                  </div>\r\n                )}\r\n              </div>\r\n              <div className=\"col-6 align-self-center\">\r\n                <div className=\"row justify-content-center text-center\">\r\n                  {this.props.data.Clan[0].name}\r\n                </div>\r\n                <div className=\"row\">\r\n                  <div className=\"col text-center\">\r\n                    {this.stars(this.props.data.Clan[0].score)}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            {/* ROW */}\r\n            <div id=\"user-details\" className=\"row mt-4\">\r\n              <div className=\"col-6\">\r\n                <div className=\"row justify-content-center\">Area</div>\r\n                <div className=\"row justify-content-center text-muted\">\r\n                  {this.state.edit ? (\r\n                    <input\r\n                      id=\"area\"\r\n                      placeholder=\"general location\"\r\n                      onChange={ev => this.setState({ area: ev.target.value })}\r\n                    ></input>\r\n                  ) : (\r\n                    this.props.data.Clan[0].area\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nexport default MyGroupProfile;"]},"metadata":{},"sourceType":"module"}