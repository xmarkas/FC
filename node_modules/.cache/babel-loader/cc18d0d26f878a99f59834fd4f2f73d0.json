{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\xmark\\\\Desktop\\\\Code\\\\Servers\\\\FC-SERVER\\\\food-commune\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\xmark\\\\Desktop\\\\Code\\\\Servers\\\\FC-SERVER\\\\food-commune\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\xmark\\\\Desktop\\\\Code\\\\Servers\\\\FC-SERVER\\\\food-commune\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\xmark\\\\Desktop\\\\Code\\\\Servers\\\\FC-SERVER\\\\food-commune\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";var AddDeal=/*#__PURE__*/function(_Component){_inherits(AddDeal,_Component);var _super=_createSuper(AddDeal);function AddDeal(props){var _this;_classCallCheck(this,AddDeal);_this=_super.call(this,props);_this.state={description:\"\",summary:\"\",category:\"\",unit_measure:\"\",units:\"\",price:\"\",public:0,imageName:\"\"};_this.onFormChange=function(ev){var set={};set[ev.target.id]=ev.target.value;_this.setState(set);};_this.createDeal=function(){var payload={};Object.keys(_this.state).forEach(function(k){payload[k]=_this.state[k];});var file=document.getElementById(\"image_url\").files[0];var formData=new FormData();formData.append(\"file\",file);// Append file name and user id to payload\nif(file){payload.image_url=\"\".concat(_this.props.user.id,\"@\").concat(file.name);payload.user_id=_this.props.user.id;console.log(payload);// Send image\nfetch(\"/foodcommune/imageUpload?userid=\".concat(_this.props.user.id),{body:formData,method:\"POST\"}).then(function(res){return res.json();}).then(function(res){console.log(res);});}if(_this.props.editDeal){// Update Deal\nconsole.log(payload);_this.props.updateDeal(payload);}else{// Insert Deal\nconsole.log(\"---> NEW DEAL\");_this.props.newDeal(payload);}};_this.uploadImage=function(ev){console.log(\"IMAGE ALT\");console.log(ev.target.value);_this.setState({imageName:\"testImageFile\"});};if(props.editDeal){_this.state=props.editDeal;console.log(props.editDeal);}return _this;}_createClass(AddDeal,[{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/React.createElement(\"div\",{id:\"item-view-container\",onClick:function onClick(ev){if(ev.target.id===\"item-view-container\")_this2.props.showAddDeal();},className:\"view-container\",style:{overflowY:\"auto\",position:\"absolute\",height:\"100%\",width:\"100%\",zIndex:\"1000\",top:\"0\"}},/*#__PURE__*/React.createElement(\"div\",{className:\"modal-dialog\",role:\"document\",style:{boxShadow:\"0 0 16px 2px rgba(0,0,0,.3)\",maxWidth:\"425pm!important\"}},/*#__PURE__*/React.createElement(\"div\",{className:\"modal-content\"},/*#__PURE__*/React.createElement(\"div\",{className:\"modal-close\",onClick:this.props.showAddDeal},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-window-close modal-close\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"header spartan d-flex align-items-center justify-content-center\",style:{backgroundColor:\"#346802\",color:\"white\",padding:\"12px\"}},/*#__PURE__*/React.createElement(\"img\",{width:\"40px\",src:\"./media/logoAlpha.gif\",alt:\"\"}),\" \",/*#__PURE__*/React.createElement(\"div\",null,this.props.editDeal?\"Editing Deal\":\"New Deal\")),/*#__PURE__*/React.createElement(\"div\",{className:\"modal-body\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",null,\"Description\"),/*#__PURE__*/React.createElement(\"input\",{onChange:function onChange(ev){return _this2.onFormChange(ev);},value:this.state.description,type:\"text\",className:\"form-control\",id:\"description\"}),/*#__PURE__*/React.createElement(\"small\",{className:\"text-muted\"},\"maximum length 30 characters\")),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",null,\"Summary - Tell them about your deal\"),/*#__PURE__*/React.createElement(\"textarea\",{onChange:function onChange(ev){return _this2.onFormChange(ev);},value:this.state.summary,type:\"text\",className:\"form-control\",id:\"summary\"}),/*#__PURE__*/React.createElement(\"small\",{className:\"text-muted\"},\"maximum length 250 characters\")),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",null,\"Category\"),/*#__PURE__*/React.createElement(\"select\",{onChange:function onChange(ev){return _this2.onFormChange(ev);},value:this.state.category,id:\"category\",className:\"form-control form-control-sm\"},/*#__PURE__*/React.createElement(\"option\",null,\"Fruit\"),/*#__PURE__*/React.createElement(\"option\",null,\"Vegetables\"),/*#__PURE__*/React.createElement(\"option\",null,\"Spices and Stuff\"),/*#__PURE__*/React.createElement(\"option\",null,\"Chesse and Dairy\"),/*#__PURE__*/React.createElement(\"option\",null,\"Meats and Poultry\"),/*#__PURE__*/React.createElement(\"option\",null,\"Seafood\")))),/*#__PURE__*/React.createElement(\"div\",{className:\"col\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",null,\"Unit measure\"),/*#__PURE__*/React.createElement(\"select\",{onChange:function onChange(ev){return _this2.onFormChange(ev);},value:this.state.unit_measure,id:\"unit_measure\",className:\"form-control form-control-sm\"},/*#__PURE__*/React.createElement(\"option\",{value:\"lbs\"},\"lbs (pounds)\"),/*#__PURE__*/React.createElement(\"option\",{value:\"oz\"},\"oz (ounces)\"),/*#__PURE__*/React.createElement(\"option\",{value:\"kg\"},\"kg (kilograms)\"),/*#__PURE__*/React.createElement(\"option\",{value:\"g\"},\"g (grams)\"),/*#__PURE__*/React.createElement(\"option\",{value:\"gal\"},\"gal (gallons)\"),/*#__PURE__*/React.createElement(\"option\",{value:\"qt\"},\"qt (quarts)\"),/*#__PURE__*/React.createElement(\"option\",{value:\"case\"},\"case\"),/*#__PURE__*/React.createElement(\"option\",{value:\"doz\"},\"doz (dozen)\"))))),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",null,\"Price\"),/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-group-prepend\"},/*#__PURE__*/React.createElement(\"span\",{className:\"input-group-text\",style:{backgroundColor:\"#f8f9fa\",fontSize:\".8rem\"}},\"$\")),/*#__PURE__*/React.createElement(\"input\",{onChange:function onChange(ev){return _this2.onFormChange(ev);},value:this.state.price,type:\"number\",className:\"form-control\",id:\"price\",style:{fontSize:\".8rem\"}})))),/*#__PURE__*/React.createElement(\"div\",{className:\"col\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",null,\"Units\"),/*#__PURE__*/React.createElement(\"input\",{onChange:function onChange(ev){return _this2.onFormChange(ev);},value:this.state.units,type:\"number\",className:\"form-control\",id:\"units\",style:{fontSize:\".8rem\"}}),/*#__PURE__*/React.createElement(\"small\",{className:\"text-muted\"},\"Number of units included in your item\")))),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 col-md-6\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-group-prepend\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-group-text\",style:{backgroundColor:\"#f8f9fa\"}},/*#__PURE__*/React.createElement(\"input\",{type:\"checkbox\",style:{fontSize:\".8rem\"}}))),/*#__PURE__*/React.createElement(\"span\",{type:\"text\",className:\"form-control\",\"aria-label\":\"Text input with checkbox\",style:{fontSize:\".8rem\"}},\"Make this offer public\")))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",null,\"Upload an image of your product\"),/*#__PURE__*/React.createElement(\"input\",{//   value={this.state.image_url}\ntype:\"file\",className:\"form-control-file\",id:\"image_url\"})),/*#__PURE__*/React.createElement(\"div\",{class:\"input-group mb-3\"},/*#__PURE__*/React.createElement(\"div\",{class:\"input-group-prepend\"},/*#__PURE__*/React.createElement(\"span\",{class:\"input-group-text\",id:\"uploadInput\"},\"Upload\")),/*#__PURE__*/React.createElement(\"div\",{class:\"custom-file\"},/*#__PURE__*/React.createElement(\"input\",{type:\"file\",class:\"custom-file-input\",id:\"image_url1\",\"aria-describedby\":\"uploadInput\",onChange:function onChange(ev){return _this2.uploadImage(ev);}}),/*#__PURE__*/React.createElement(\"label\",{class:\"custom-file-label\",for:\"image_url1\"},this.state.imageName===\"\"?\"Choose File\":this.state.imageName)))),/*#__PURE__*/React.createElement(\"div\",{className:\"modal-footer\",style:{justifyContent:\"space-evenly\"}},!this.props.editDeal&&/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-sm btn-primary\",onClick:this.createDeal},\"Create\"),this.props.editDeal&&/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-sm btn-primary\",onClick:this.createDeal},\"Update\")))));}}]);return AddDeal;}(Component);export default AddDeal;","map":{"version":3,"sources":["C:/Users/xmark/Desktop/Code/Servers/FC-SERVER/food-commune/src/components/AddDeal.jsx"],"names":["React","Component","AddDeal","props","state","description","summary","category","unit_measure","units","price","public","imageName","onFormChange","ev","set","target","id","value","setState","createDeal","payload","Object","keys","forEach","k","file","document","getElementById","files","formData","FormData","append","image_url","user","name","user_id","console","log","fetch","body","method","then","res","json","editDeal","updateDeal","newDeal","uploadImage","showAddDeal","overflowY","position","height","width","zIndex","top","boxShadow","maxWidth","backgroundColor","color","padding","fontSize","justifyContent"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\n\r\nclass AddDeal extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    if (props.editDeal) {\r\n      this.state = props.editDeal;\r\n      console.log(props.editDeal);\r\n    }\r\n  }\r\n  state = {\r\n    description: \"\",\r\n    summary: \"\",\r\n    category: \"\",\r\n    unit_measure: \"\",\r\n    units: \"\",\r\n    price: \"\",\r\n    public: 0,\r\n    imageName: \"\"\r\n  };\r\n\r\n  onFormChange = (ev) => {\r\n    let set = {};\r\n    set[ev.target.id] = ev.target.value;\r\n    this.setState(set);\r\n  };\r\n\r\n  createDeal = () => {\r\n    let payload = {};\r\n    Object.keys(this.state).forEach((k) => {\r\n      payload[k] = this.state[k];\r\n    });\r\n\r\n    let file = document.getElementById(\"image_url\").files[0];\r\n    let formData = new FormData();\r\n    formData.append(\"file\", file);\r\n\r\n    // Append file name and user id to payload\r\n    if (file) {\r\n      payload.image_url = `${this.props.user.id}@${file.name}`;\r\n      payload.user_id = this.props.user.id;\r\n      console.log(payload);\r\n\r\n      // Send image\r\n      fetch(`/foodcommune/imageUpload?userid=${this.props.user.id}`, {\r\n        body: formData,\r\n        method: \"POST\",\r\n      })\r\n        .then((res) => {\r\n          return res.json();\r\n        })\r\n        .then((res) => {\r\n          console.log(res);\r\n        });\r\n    }\r\n\r\n    if (this.props.editDeal) {\r\n      // Update Deal\r\n      console.log(payload);\r\n      this.props.updateDeal(payload);\r\n    } else {\r\n      // Insert Deal\r\n      console.log(\"---> NEW DEAL\");\r\n      this.props.newDeal(payload);\r\n    }\r\n  };\r\n\r\n  uploadImage = (ev) => {\r\n    console.log(\"IMAGE ALT\")\r\n    console.log(ev.target.value);\r\n    this.setState({ imageName: \"testImageFile\" });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div\r\n        id=\"item-view-container\"\r\n        onClick={(ev) => {\r\n          if (ev.target.id === \"item-view-container\") this.props.showAddDeal();\r\n        }}\r\n        className=\"view-container\"\r\n        style={{\r\n          overflowY: \"auto\",\r\n          position: \"absolute\",\r\n          height: \"100%\",\r\n          width: \"100%\",\r\n          zIndex: \"1000\",\r\n          top: \"0\",\r\n        }}\r\n      >\r\n        <div\r\n          className=\"modal-dialog\"\r\n          role=\"document\"\r\n          style={{\r\n            boxShadow: \"0 0 16px 2px rgba(0,0,0,.3)\",\r\n            maxWidth: \"425pm!important\",\r\n          }}\r\n        >\r\n          <div className=\"modal-content\">\r\n            <div className=\"modal-close\" onClick={this.props.showAddDeal}>\r\n              <i className=\"fas fa-window-close modal-close\"></i>\r\n            </div>\r\n            <div\r\n              className=\"header spartan d-flex align-items-center justify-content-center\"\r\n              style={{\r\n                backgroundColor: \"#346802\",\r\n                color: \"white\",\r\n                padding: \"12px\",\r\n              }}\r\n            >\r\n              <img width=\"40px\" src=\"./media/logoAlpha.gif\" alt=\"\" />{\" \"}\r\n              <div>{this.props.editDeal ? \"Editing Deal\" : \"New Deal\"}</div>\r\n            </div>\r\n            <div className=\"modal-body\">\r\n              {/* Description */}\r\n              <div className=\"form-group\">\r\n                <label>Description</label>\r\n                <input\r\n                  onChange={(ev) => this.onFormChange(ev)}\r\n                  value={this.state.description}\r\n                  type=\"text\"\r\n                  className=\"form-control\"\r\n                  id=\"description\"\r\n                ></input>\r\n                <small className=\"text-muted\">\r\n                  maximum length 30 characters\r\n                </small>\r\n              </div>\r\n              {/* Summary  */}\r\n              <div className=\"form-group\">\r\n                <label>Summary - Tell them about your deal</label>\r\n                <textarea\r\n                  onChange={(ev) => this.onFormChange(ev)}\r\n                  value={this.state.summary}\r\n                  type=\"text\"\r\n                  className=\"form-control\"\r\n                  id=\"summary\"\r\n                ></textarea>\r\n                <small className=\"text-muted\">\r\n                  maximum length 250 characters\r\n                </small>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"col\">\r\n                  {/* Category */}\r\n                  <div className=\"form-group\">\r\n                    <label>Category</label>\r\n                    <select\r\n                      onChange={(ev) => this.onFormChange(ev)}\r\n                      value={this.state.category}\r\n                      id=\"category\"\r\n                      className=\"form-control form-control-sm\"\r\n                    >\r\n                      <option>Fruit</option>\r\n                      <option>Vegetables</option>\r\n                      <option>Spices and Stuff</option>\r\n                      <option>Chesse and Dairy</option>\r\n                      <option>Meats and Poultry</option>\r\n                      <option>Seafood</option>\r\n                    </select>\r\n                  </div>\r\n                </div>\r\n                <div className=\"col\">\r\n                  {/* Unit Measure*/}\r\n                  <div className=\"form-group\">\r\n                    <label>Unit measure</label>\r\n                    <select\r\n                      onChange={(ev) => this.onFormChange(ev)}\r\n                      value={this.state.unit_measure}\r\n                      id=\"unit_measure\"\r\n                      className=\"form-control form-control-sm\"\r\n                    >\r\n                      <option value=\"lbs\">lbs (pounds)</option>\r\n                      <option value=\"oz\">oz (ounces)</option>\r\n                      <option value=\"kg\">kg (kilograms)</option>\r\n                      <option value=\"g\">g (grams)</option>\r\n                      <option value=\"gal\">gal (gallons)</option>\r\n                      <option value=\"qt\">qt (quarts)</option>\r\n                      <option value=\"case\">case</option>\r\n                      <option value=\"doz\">doz (dozen)</option>\r\n                    </select>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"row\">\r\n                <div className=\"col\">\r\n                  {/* Price */}\r\n                  <div className=\"form-group\">\r\n                    <label>Price</label>\r\n                    <div className=\"input-group\">\r\n                      <div className=\"input-group-prepend\">\r\n                        <span\r\n                          className=\"input-group-text\"\r\n                          style={{\r\n                            backgroundColor: \"#f8f9fa\",\r\n                            fontSize: \".8rem\",\r\n                          }}\r\n                        >\r\n                          $\r\n                        </span>\r\n                      </div>\r\n                      <input\r\n                        onChange={(ev) => this.onFormChange(ev)}\r\n                        value={this.state.price}\r\n                        type=\"number\"\r\n                        className=\"form-control\"\r\n                        id=\"price\"\r\n                        style={{ fontSize: \".8rem\" }}\r\n                      ></input>\r\n\r\n                      {/* <small className=\"text-muted\">\r\n                      No need to include a '$' symbol\r\n                    </small> */}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"col\">\r\n                  {/* Units */}\r\n                  <div className=\"form-group\">\r\n                    <label>Units</label>\r\n                    <input\r\n                      onChange={(ev) => this.onFormChange(ev)}\r\n                      value={this.state.units}\r\n                      type=\"number\"\r\n                      className=\"form-control\"\r\n                      id=\"units\"\r\n                      style={{ fontSize: \".8rem\" }}\r\n                    ></input>\r\n                    <small className=\"text-muted\">\r\n                      Number of units included in your item\r\n                    </small>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Public setting */}\r\n              <div className=\"row\">\r\n                <div className=\"col-12 col-md-6\">\r\n                  <div className=\"input-group\">\r\n                    <div className=\"input-group-prepend\">\r\n                      <div\r\n                        className=\"input-group-text\"\r\n                        style={{ backgroundColor: \"#f8f9fa\" }}\r\n                      >\r\n                        <input\r\n                          type=\"checkbox\"\r\n                          style={{ fontSize: \".8rem\" }}\r\n                        ></input>\r\n                      </div>\r\n                    </div>\r\n                    <span\r\n                      type=\"text\"\r\n                      className=\"form-control\"\r\n                      aria-label=\"Text input with checkbox\"\r\n                      style={{ fontSize: \".8rem\" }}\r\n                    >\r\n                      Make this offer public\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Upload image */}\r\n              <div className=\"form-group\">\r\n                <label>Upload an image of your product</label>\r\n                <input\r\n                  //   value={this.state.image_url}\r\n                  type=\"file\"\r\n                  className=\"form-control-file\"\r\n                  id=\"image_url\"\r\n                ></input>\r\n              </div>\r\n\r\n              {/* Upload image alt */}\r\n              <div class=\"input-group mb-3\">\r\n                <div class=\"input-group-prepend\">\r\n                  <span class=\"input-group-text\" id=\"uploadInput\">\r\n                    Upload\r\n                  </span>\r\n                </div>\r\n                <div class=\"custom-file\">\r\n                  <input\r\n                    type=\"file\"\r\n                    class=\"custom-file-input\"\r\n                    id=\"image_url1\"\r\n                    aria-describedby=\"uploadInput\"\r\n                    onChange={(ev) => this.uploadImage(ev)}\r\n                  ></input>\r\n                  <label class=\"custom-file-label\" for=\"image_url1\">\r\n                    {this.state.imageName === \"\" ? \"Choose File\" : this.state.imageName}\r\n                  </label>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Footer */}\r\n            <div\r\n              className=\"modal-footer\"\r\n              style={{ justifyContent: \"space-evenly\" }}\r\n            >\r\n              {!this.props.editDeal && (\r\n                <button\r\n                  className=\"btn btn-sm btn-primary\"\r\n                  onClick={this.createDeal}\r\n                >\r\n                  Create\r\n                </button>\r\n              )}\r\n              {this.props.editDeal && (\r\n                <button\r\n                  className=\"btn btn-sm btn-primary\"\r\n                  onClick={this.createDeal}\r\n                >\r\n                  Update\r\n                </button>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default AddDeal;\r\n"]},"metadata":{},"sourceType":"module"}