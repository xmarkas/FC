{"ast":null,"code":"import _objectSpread from\"C:\\\\Users\\\\xmark\\\\Desktop\\\\Code\\\\Servers\\\\FC-SERVER\\\\food-commune\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"C:\\\\Users\\\\xmark\\\\Desktop\\\\Code\\\\Servers\\\\FC-SERVER\\\\food-commune\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\xmark\\\\Desktop\\\\Code\\\\Servers\\\\FC-SERVER\\\\food-commune\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\xmark\\\\Desktop\\\\Code\\\\Servers\\\\FC-SERVER\\\\food-commune\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\xmark\\\\Desktop\\\\Code\\\\Servers\\\\FC-SERVER\\\\food-commune\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import ItemView from\"./ItemView\";import MyGroupHeader from\"./MyGroupHeader\";import MyGroupProfile from\"./MyGroupProfile\";import MyGroupBuys from\"./MyGroupBuys\";import MyGroupMembers from\"./MyGroupMemebers\";import MyGroupNews from\"./MyGroupNews\";import{connect}from\"react-redux\";/**\r\n * Roles: How user views are affected my their ROLE level\r\n *\r\n * Description: state.userIsMember determines the ROLL.\r\n *              userIsMember = 0 is Admin priviledges.\r\n *              userIsMember = 1 is Non-Admin group user. Cannot see admin options.\r\n *              userIsMember > 1 (2 is not a member, but possible requested to join group).\r\n *\r\n *              Currently only using 0, 1, and 2 for ROLES.\r\n */var mapStateToProps=function mapStateToProps(state){return{provisional:state.provisional,user:state.user,token:state.token};};var MyGroupPage=/*#__PURE__*/function(_Component){_inherits(MyGroupPage,_Component);var _super=_createSuper(MyGroupPage);function MyGroupPage(){var _this;_classCallCheck(this,MyGroupPage);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={modal:null,modalUpdate:null,joinRequested:false,userIsMember:3};_this.itemView=function(deal){var updateBuy=_this.state.data.Purchases.find(function(obj){return obj.user_id===_this.props.user.id&&obj.deal_id===deal.id;});console.log(updateBuy);if(updateBuy){_this.setState({modalUpdate:updateBuy,modal:deal});}else{_this.setState({modal:deal});}};_this.closeModal=function(){_this.setState({modal:null});};_this.sendJoinRequest=function(){joinRequest(_this.props.token,_this.props.user,_this.state.data.Clan[0].id).then(function(resolved){console.log(resolved);_this.setState({joinRequested:true});}).catch(function(err){console.log(err);});};_this.memberRequest=function(user_id,memberState){handleMemberRequest(_this.props.token,user_id,_this.state.data.Clan[0].id,memberState).then(function(resolved){console.log(resolved);if(memberState===1){_this.setState(function(prevState){var data=_objectSpread({},prevState.data);var requestIndex=data.JoinRequests.findIndex(function(obj){return obj.id===user_id;});var joinRequest=data.JoinRequests.splice(requestIndex,1);joinRequest[0].user_is_admin=0;data.Members.push(joinRequest[0]);return{data:data};});}else if(memberState===3){}}).catch(function(err){console.log(err);});};_this.makeRevokeAdmin=function(user_id,adminValue){adminToggle(_this.props.token,user_id,_this.state.data.Clan[0].id,adminValue).then(function(resolved){console.log(resolved);_this.setState(function(prevState){var data=_objectSpread({},prevState.data);var memberIndex=data.Members.findIndex(function(obj){return obj.id===user_id;});data.Members[memberIndex].user_is_admin=adminValue;return{data:data};});}).catch(function(err){console.log(err);});};_this.removeMember=function(user_id){deleteMember(_this.props.token,user_id,_this.state.data.Clan[0].id).then(function(resolved){console.log(resolved);_this.setState(function(prevState){var data=_objectSpread({},prevState.data);var memberIndex=data.Members.findIndex(function(obj){return obj.id===user_id;});data.Members.splice(memberIndex,1);return{data:data};});}).catch(function(err){console.log(err);});};_this.updateClan=function(payload){updateClanFields(_this.props.token,_this.state.data.Clan[0].id,payload).then(function(resolved){console.log(resolved);_this.setState(function(prevState){var data=_objectSpread({},prevState.data);var keys=Object.keys(payload);keys.forEach(function(k){data.Clan[0][k]=payload[k];});return{data:data};});}).catch(function(err){console.log(err);});};_this.removeBuy=function(dealId){deleteGroupBuy(_this.props.token,_this.state.data.Clan[0].id,dealId).then(function(resolved){console.log(resolved);console.log(\"BUY ID = \",dealId);_this.setState(function(prevState){var data=_objectSpread({},prevState.data);var buyIndex=data.Buys.findIndex(function(obj){return obj.id===dealId;});console.log(buyIndex);data.Buys.splice(buyIndex,1);return{data:data};});}).catch(function(err){console.log(err);});};_this.addNewNews=function(message){insertNews(_this.props.token,_this.state.data.Clan[0].id,message).then(function(resolved){console.log(resolved);_this.setState(function(prevState){var data=_objectSpread({},prevState.data);data.News.unshift({message:message});return{data:data};});}).catch(function(err){console.log(err);});};_this.placeOrder=function(deal,purchaseUnits){var request={userId:_this.props.user.id,clanId:_this.state.data.Clan[0].id,dealId:deal.id,sellerId:deal.user_id,purchaseUnits:purchaseUnits,unitPrice:deal.price,units:deal.units};var options={method:\"POST\",headers:new Headers({Authorization:\"Bearer \"+_this.props.token,\"Content-Type\":\"application/json\"}),body:JSON.stringify({entity:request})};fetch(\"/foodcommune/accounts/groupPurchase\",options).then(function(res){return res.json();}).then(function(res){console.log(res);if(res.success){// Return to account detail and display error message\nconsole.log(res);}else{console.log(\"Unable to retrieve data\");}});};_this.updateOrder=function(deal,purchaseUnits,Purchase){console.log('p-line',Purchase);var request={purchaseUnits:purchaseUnits,unitPrice:deal.price,units:deal.units,purchase_id:Purchase.id};var options={method:\"POST\",headers:new Headers({Authorization:\"Bearer \"+_this.props.token,\"Content-Type\":\"application/json\"}),body:JSON.stringify({entity:request})};fetch(\"/foodcommune/accounts/groupPurchaseUpdate\",options).then(function(res){return res.json();}).then(function(res){console.log(res);if(res.success){// Return to account detail and display error message\nconsole.log(res);}else{console.log(\"Unable to retrieve data\");}});};return _this;}_createClass(MyGroupPage,[{key:\"componentWillMount\",value:function componentWillMount(){var _this2=this;var params=new URLSearchParams(window.location.search);var ref=params.get(\"ref\");fetchData(this.props.token,this.props.user.id,ref).then(function(resolved){console.log(resolved);_this2.setState({data:resolved});// Is User a Clan member?\nvar user=resolved.Members.find(function(obj){return obj.id===_this2.props.user.id;});if(user){_this2.setState({userIsMember:user.user_is_admin===1?0:1});}else{_this2.setState({userIsMember:2});}// Did User request to join Clan?\nvar joinRequest=resolved.JoinRequests.find(function(obj){if(obj.id===_this2.props.user.id){_this2.setState({joinRequested:true});}});}).catch(function(err){console.log(err);});}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{id:\"mygroup-page\",className:\"row row-border justify-content-center mb-4\"},/*#__PURE__*/React.createElement(\"div\",{id:\"main-content\",className:\"col spartan\"},this.state.modal&&/*#__PURE__*/React.createElement(ItemView,{modal:this.state.modal,closeModal:this.closeModal// options={GroupPageActions(\n//   this.state.token,\n//   this.state.user.id,\n//   this.state.data.Clan[0].id,\n//   this.state.modal,\n//   this.state.modalUpdate\n// )}\n}),/*#__PURE__*/React.createElement(MyGroupHeader,{sendJoinRequest:this.sendJoinRequest,joinRequested:this.state.joinRequested,data:this.state.data,userIsMember:this.state.userIsMember,updateClan:this.updateClan}),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{id:\"mygroup-profile\",className:\"col-sm-12 col-lg-6 d-flex\"},this.state.data&&/*#__PURE__*/React.createElement(MyGroupProfile,{data:this.state.data,userIsMember:this.state.userIsMember,updateClan:this.updateClan})),/*#__PURE__*/React.createElement(\"div\",{id:\"mygroup-buys\",className:\"col-sm-12 col-lg-6 d-flex\"},/*#__PURE__*/React.createElement(MyGroupBuys,{itemView:this.itemView,data:this.state.data,removeBuy:this.removeBuy,userIsMember:this.state.userIsMember,placeOrder:this.placeOrder,updateOrder:this.updateOrder,userId:this.props.user.id}))),/*#__PURE__*/React.createElement(\"div\",{className:\"row mt-4\"},/*#__PURE__*/React.createElement(\"div\",{id:\"members-card\",className:\"col-sm-12 col-lg-6 d-flex\"},/*#__PURE__*/React.createElement(MyGroupMembers,{data:this.state.data,memberRequest:this.memberRequest,userIsMember:this.state.userIsMember,makeRevokeAdmin:this.makeRevokeAdmin,removeMember:this.removeMember})),/*#__PURE__*/React.createElement(\"div\",{id:\"news-card\",className:\"col-sm-12 col-lg-6 d-flex\"},/*#__PURE__*/React.createElement(MyGroupNews,{addNewNews:this.addNewNews,data:this.state.data}))))));}}]);return MyGroupPage;}(Component);export default connect(mapStateToProps)(MyGroupPage);function fetchData(token,userid,ref){console.log(\"fetching data......\",token,userid);return new Promise(function(resolve,reject){var request={userId:userid,clanId:ref};var options={method:\"POST\",headers:new Headers({Authorization:\"Bearer \"+token,\"Content-Type\":\"application/json\"}),body:JSON.stringify({entity:request})};fetch(\"/foodcommune/accounts/clanView\",options).then(function(res){return res.json();}).then(function(res){console.log(res);if(!res.success){// Return to account detail and display error message\nresolve(res);}else{reject(\"Unable to retrieve data\");}});});}function joinRequest(token,user,clanId){console.log(\"fetching data......\");return new Promise(function(resolve,reject){var request={user:user,clanId:clanId};var options={method:\"POST\",headers:new Headers({Authorization:\"Bearer \"+token,\"Content-Type\":\"application/json\"}),body:JSON.stringify({entity:request})};fetch(\"/foodcommune/accounts/joinClanRequest\",options).then(function(res){return res.json();}).then(function(res){console.log(res);if(res.success){// Return to account detail and display error message\nresolve(res);}else{reject(\"Unable to retrieve data\");}});});}function handleMemberRequest(token,user,clanId,memberState){return new Promise(function(resolve,reject){var request={user:user,clanId:clanId,memberState:memberState};var options={method:\"POST\",headers:new Headers({Authorization:\"Bearer \"+token,\"Content-Type\":\"application/json\"}),body:JSON.stringify({entity:request})};fetch(\"/foodcommune/accounts/addUserToGroup\",options).then(function(res){return res.json();}).then(function(res){console.log(res);if(res.success){// Return to account detail and display error message\nresolve(res);}else{reject(\"Unable to retrieve data\");}});});}function adminToggle(token,user,clanId,adminValue){return new Promise(function(resolve,reject){var request={user:user,clanId:clanId,adminValue:adminValue};var options={method:\"POST\",headers:new Headers({Authorization:\"Bearer \"+token,\"Content-Type\":\"application/json\"}),body:JSON.stringify({entity:request})};fetch(\"/foodcommune/accounts/adminToggle\",options).then(function(res){return res.json();}).then(function(res){console.log(res);if(res.success){// Return to account detail and display error message\nresolve(res);}else{reject(\"Unable to retrieve data\");}});});}function deleteMember(token,user,clanId){return new Promise(function(resolve,reject){var request={user:user,clanId:clanId};var options={method:\"POST\",headers:new Headers({Authorization:\"Bearer \"+token,\"Content-Type\":\"application/json\"}),body:JSON.stringify({entity:request})};fetch(\"/foodcommune/accounts/deleteMember\",options).then(function(res){return res.json();}).then(function(res){console.log(res);if(res.success){// Return to account detail and display error message\nresolve(res);}else{reject(\"Unable to retrieve data\");}});});}function updateClanFields(token,clanId,payload){return new Promise(function(resolve,reject){var request={values:payload,clanId:clanId};var options={method:\"POST\",headers:new Headers({Authorization:\"Bearer \"+token,\"Content-Type\":\"application/json\"}),body:JSON.stringify({entity:request})};fetch(\"/foodcommune/accounts/updateClanFields\",options).then(function(res){return res.json();}).then(function(res){console.log(res);if(res.success){// Return to account detail and display error message\nresolve(res);}else{reject(\"Unable to retrieve data\");}});});}function deleteGroupBuy(token,clanId,dealId){return new Promise(function(resolve,reject){var request={clanId:clanId,dealId:dealId};var options={method:\"POST\",headers:new Headers({Authorization:\"Bearer \"+token,\"Content-Type\":\"application/json\"}),body:JSON.stringify({entity:request})};fetch(\"/foodcommune/accounts/deleteGroupBuy\",options).then(function(res){return res.json();}).then(function(res){console.log(res);if(res.success){// Return to account detail and display error message\nresolve(res);}else{reject(\"Unable to retrieve data\");}});});}function insertNews(token,clanId,message){return new Promise(function(resolve,reject){var request={clanId:clanId,message:message};var options={method:\"POST\",headers:new Headers({Authorization:\"Bearer \"+token,\"Content-Type\":\"application/json\"}),body:JSON.stringify({entity:request})};fetch(\"/foodcommune/accounts/insertNews\",options).then(function(res){return res.json();}).then(function(res){console.log(res);if(res.success){// Return to account detail and display error message\nresolve(res);}else{reject(\"Unable to retrieve data\");}});});}","map":{"version":3,"sources":["C:/Users/xmark/Desktop/Code/Servers/FC-SERVER/food-commune/src/components/MyGroupPage.jsx"],"names":["React","Component","ItemView","MyGroupHeader","MyGroupProfile","MyGroupBuys","MyGroupMembers","MyGroupNews","connect","mapStateToProps","state","provisional","user","token","MyGroupPage","modal","modalUpdate","joinRequested","userIsMember","itemView","deal","updateBuy","data","Purchases","find","obj","user_id","props","id","deal_id","console","log","setState","closeModal","sendJoinRequest","joinRequest","Clan","then","resolved","catch","err","memberRequest","memberState","handleMemberRequest","prevState","requestIndex","JoinRequests","findIndex","splice","user_is_admin","Members","push","makeRevokeAdmin","adminValue","adminToggle","memberIndex","removeMember","deleteMember","updateClan","payload","updateClanFields","keys","Object","forEach","k","removeBuy","dealId","deleteGroupBuy","buyIndex","Buys","addNewNews","message","insertNews","News","unshift","placeOrder","purchaseUnits","request","userId","clanId","sellerId","unitPrice","price","units","options","method","headers","Headers","Authorization","body","JSON","stringify","entity","fetch","res","json","success","updateOrder","Purchase","purchase_id","params","URLSearchParams","window","location","search","ref","get","fetchData","userid","Promise","resolve","reject","values"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport ItemView from \"./ItemView\";\r\nimport MyGroupHeader from \"./MyGroupHeader\";\r\nimport MyGroupProfile from \"./MyGroupProfile\";\r\nimport MyGroupBuys from \"./MyGroupBuys\";\r\nimport MyGroupMembers from \"./MyGroupMemebers\";\r\nimport MyGroupNews from \"./MyGroupNews\";\r\nimport { connect } from \"react-redux\";\r\n\r\n/**\r\n * Roles: How user views are affected my their ROLE level\r\n *\r\n * Description: state.userIsMember determines the ROLL.\r\n *              userIsMember = 0 is Admin priviledges.\r\n *              userIsMember = 1 is Non-Admin group user. Cannot see admin options.\r\n *              userIsMember > 1 (2 is not a member, but possible requested to join group).\r\n *\r\n *              Currently only using 0, 1, and 2 for ROLES.\r\n */\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    provisional: state.provisional,\r\n    user: state.user,\r\n    token: state.token,\r\n  };\r\n};\r\n\r\nclass MyGroupPage extends Component {\r\n  state = {\r\n    modal: null,\r\n    modalUpdate: null,\r\n    joinRequested: false,\r\n    userIsMember: 3,\r\n  };\r\n\r\n  componentWillMount() {\r\n    let params = new URLSearchParams(window.location.search);\r\n    let ref = params.get(\"ref\");\r\n\r\n    fetchData(this.props.token, this.props.user.id, ref)\r\n      .then((resolved) => {\r\n        console.log(resolved);\r\n        this.setState({ data: resolved });\r\n\r\n        // Is User a Clan member?\r\n        let user = resolved.Members.find((obj) => {\r\n          return obj.id === this.props.user.id;\r\n        });\r\n        if (user) {\r\n          this.setState({ userIsMember: user.user_is_admin === 1 ? 0 : 1 });\r\n        } else {\r\n          this.setState({ userIsMember: 2 });\r\n        }\r\n\r\n        // Did User request to join Clan?\r\n        let joinRequest = resolved.JoinRequests.find((obj) => {\r\n          if (obj.id === this.props.user.id) {\r\n            this.setState({ joinRequested: true });\r\n          }\r\n        });\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  }\r\n\r\n  itemView = (deal) => {\r\n    let updateBuy = this.state.data.Purchases.find((obj) => {\r\n      return obj.user_id === this.props.user.id && obj.deal_id === deal.id;\r\n    });\r\n    console.log(updateBuy);\r\n    if (updateBuy) {\r\n      this.setState({ modalUpdate: updateBuy, modal: deal });\r\n    } else {\r\n      this.setState({ modal: deal });\r\n    }\r\n  };\r\n\r\n  closeModal = () => {\r\n    this.setState({ modal: null });\r\n  };\r\n\r\n  sendJoinRequest = () => {\r\n    joinRequest(this.props.token, this.props.user, this.state.data.Clan[0].id)\r\n      .then((resolved) => {\r\n        console.log(resolved);\r\n        this.setState({ joinRequested: true });\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  memberRequest = (user_id, memberState) => {\r\n    handleMemberRequest(\r\n      this.props.token,\r\n      user_id,\r\n      this.state.data.Clan[0].id,\r\n      memberState\r\n    )\r\n      .then((resolved) => {\r\n        console.log(resolved);\r\n        if (memberState === 1) {\r\n          this.setState((prevState) => {\r\n            let data = { ...prevState.data };\r\n            let requestIndex = data.JoinRequests.findIndex((obj) => {\r\n              return obj.id === user_id;\r\n            });\r\n            let joinRequest = data.JoinRequests.splice(requestIndex, 1);\r\n            joinRequest[0].user_is_admin = 0;\r\n            data.Members.push(joinRequest[0]);\r\n            return { data: data };\r\n          });\r\n        } else if (memberState === 3) {\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  makeRevokeAdmin = (user_id, adminValue) => {\r\n    adminToggle(\r\n      this.props.token,\r\n      user_id,\r\n      this.state.data.Clan[0].id,\r\n      adminValue\r\n    )\r\n      .then((resolved) => {\r\n        console.log(resolved);\r\n\r\n        this.setState((prevState) => {\r\n          let data = { ...prevState.data };\r\n          let memberIndex = data.Members.findIndex((obj) => {\r\n            return obj.id === user_id;\r\n          });\r\n          data.Members[memberIndex].user_is_admin = adminValue;\r\n\r\n          return { data: data };\r\n        });\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  removeMember = (user_id) => {\r\n    deleteMember(this.props.token, user_id, this.state.data.Clan[0].id)\r\n      .then((resolved) => {\r\n        console.log(resolved);\r\n\r\n        this.setState((prevState) => {\r\n          let data = { ...prevState.data };\r\n          let memberIndex = data.Members.findIndex((obj) => {\r\n            return obj.id === user_id;\r\n          });\r\n          data.Members.splice(memberIndex, 1);\r\n          return { data: data };\r\n        });\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  updateClan = (payload) => {\r\n    updateClanFields(this.props.token, this.state.data.Clan[0].id, payload)\r\n      .then((resolved) => {\r\n        console.log(resolved);\r\n\r\n        this.setState((prevState) => {\r\n          let data = { ...prevState.data };\r\n          let keys = Object.keys(payload);\r\n          keys.forEach((k) => {\r\n            data.Clan[0][k] = payload[k];\r\n          });\r\n\r\n          return { data: data };\r\n        });\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  removeBuy = (dealId) => {\r\n    deleteGroupBuy(this.props.token, this.state.data.Clan[0].id, dealId)\r\n      .then((resolved) => {\r\n        console.log(resolved);\r\n        console.log(\"BUY ID = \", dealId);\r\n        this.setState((prevState) => {\r\n          let data = { ...prevState.data };\r\n          let buyIndex = data.Buys.findIndex((obj) => {\r\n            return obj.id === dealId;\r\n          });\r\n          console.log(buyIndex);\r\n          data.Buys.splice(buyIndex, 1);\r\n          return { data: data };\r\n        });\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  addNewNews = (message) => {\r\n    insertNews(this.props.token, this.state.data.Clan[0].id, message)\r\n      .then((resolved) => {\r\n        console.log(resolved);\r\n        this.setState((prevState) => {\r\n          let data = { ...prevState.data };\r\n          data.News.unshift({ message: message });\r\n          return { data: data };\r\n        });\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  placeOrder = (deal, purchaseUnits) => {\r\n    let request = {\r\n      userId: this.props.user.id,\r\n      clanId: this.state.data.Clan[0].id,\r\n      dealId: deal.id,\r\n      sellerId: deal.user_id,\r\n      purchaseUnits: purchaseUnits,\r\n      unitPrice: deal.price,\r\n      units: deal.units,\r\n    };\r\n    let options = {\r\n      method: \"POST\",\r\n      headers: new Headers({\r\n        Authorization: \"Bearer \" + this.props.token,\r\n        \"Content-Type\": \"application/json\",\r\n      }),\r\n      body: JSON.stringify({\r\n        entity: request,\r\n      }),\r\n    };\r\n    fetch(\"/foodcommune/accounts/groupPurchase\", options)\r\n      .then((res) => {\r\n        return res.json();\r\n      })\r\n      .then((res) => {\r\n        console.log(res);\r\n        if (res.success) {\r\n          // Return to account detail and display error message\r\n          console.log(res);\r\n        } else {\r\n          console.log(\"Unable to retrieve data\");\r\n        }\r\n      });\r\n  };\r\n\r\n  updateOrder = (deal, purchaseUnits, Purchase) => {\r\n    console.log('p-line', Purchase);\r\n    let request = {\r\n      purchaseUnits: purchaseUnits,\r\n      unitPrice: deal.price,\r\n      units: deal.units,\r\n      purchase_id: Purchase.id\r\n    };\r\n\r\n    let options = {\r\n      method: \"POST\",\r\n      headers: new Headers({\r\n        Authorization: \"Bearer \" + this.props.token,\r\n        \"Content-Type\": \"application/json\",\r\n      }),\r\n      body: JSON.stringify({\r\n        entity: request,\r\n      }),\r\n    };\r\n\r\n    fetch(\"/foodcommune/accounts/groupPurchaseUpdate\", options)\r\n      .then((res) => {\r\n        return res.json();\r\n      })\r\n      .then((res) => {\r\n        console.log(res);\r\n        if (res.success) {\r\n          // Return to account detail and display error message\r\n          console.log(res);\r\n        } else {\r\n          console.log(\"Unable to retrieve data\");\r\n        }\r\n      });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <React.Fragment>\r\n        <div\r\n          id=\"mygroup-page\"\r\n          className=\"row row-border justify-content-center mb-4\"\r\n        >\r\n          <div id=\"main-content\" className=\"col spartan\">\r\n            {this.state.modal && (\r\n              <ItemView\r\n                modal={this.state.modal}\r\n                closeModal={this.closeModal}\r\n                // options={GroupPageActions(\r\n                //   this.state.token,\r\n                //   this.state.user.id,\r\n                //   this.state.data.Clan[0].id,\r\n                //   this.state.modal,\r\n                //   this.state.modalUpdate\r\n                // )}\r\n              />\r\n            )}\r\n\r\n            <MyGroupHeader\r\n              sendJoinRequest={this.sendJoinRequest}\r\n              joinRequested={this.state.joinRequested}\r\n              data={this.state.data}\r\n              userIsMember={this.state.userIsMember}\r\n              updateClan={this.updateClan}\r\n            />\r\n\r\n            <div className=\"row\">\r\n              <div id=\"mygroup-profile\" className=\"col-sm-12 col-lg-6 d-flex\">\r\n                {this.state.data && (\r\n                  <MyGroupProfile\r\n                    data={this.state.data}\r\n                    userIsMember={this.state.userIsMember}\r\n                    updateClan={this.updateClan}\r\n                  />\r\n                )}\r\n              </div>\r\n\r\n              <div id=\"mygroup-buys\" className=\"col-sm-12 col-lg-6 d-flex\">\r\n                <MyGroupBuys\r\n                  itemView={this.itemView}\r\n                  data={this.state.data}\r\n                  removeBuy={this.removeBuy}\r\n                  userIsMember={this.state.userIsMember}\r\n                  placeOrder={this.placeOrder}\r\n                  updateOrder={this.updateOrder}\r\n                  userId={this.props.user.id}\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"row mt-4\">\r\n              <div id=\"members-card\" className=\"col-sm-12 col-lg-6 d-flex\">\r\n                <MyGroupMembers\r\n                  data={this.state.data}\r\n                  memberRequest={this.memberRequest}\r\n                  userIsMember={this.state.userIsMember}\r\n                  makeRevokeAdmin={this.makeRevokeAdmin}\r\n                  removeMember={this.removeMember}\r\n                />\r\n              </div>\r\n              <div id=\"news-card\" className=\"col-sm-12 col-lg-6 d-flex\">\r\n                <MyGroupNews\r\n                  addNewNews={this.addNewNews}\r\n                  data={this.state.data}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(MyGroupPage);\r\n\r\nfunction fetchData(token, userid, ref) {\r\n  console.log(\"fetching data......\", token, userid);\r\n  return new Promise((resolve, reject) => {\r\n    let request = { userId: userid, clanId: ref };\r\n    let options = {\r\n      method: \"POST\",\r\n      headers: new Headers({\r\n        Authorization: \"Bearer \" + token,\r\n        \"Content-Type\": \"application/json\",\r\n      }),\r\n      body: JSON.stringify({\r\n        entity: request,\r\n      }),\r\n    };\r\n    fetch(\"/foodcommune/accounts/clanView\", options)\r\n      .then((res) => {\r\n        return res.json();\r\n      })\r\n      .then((res) => {\r\n        console.log(res);\r\n        if (!res.success) {\r\n          // Return to account detail and display error message\r\n          resolve(res);\r\n        } else {\r\n          reject(\"Unable to retrieve data\");\r\n        }\r\n      });\r\n  });\r\n}\r\n\r\nfunction joinRequest(token, user, clanId) {\r\n  console.log(\"fetching data......\");\r\n  return new Promise((resolve, reject) => {\r\n    let request = { user: user, clanId: clanId };\r\n    let options = {\r\n      method: \"POST\",\r\n      headers: new Headers({\r\n        Authorization: \"Bearer \" + token,\r\n        \"Content-Type\": \"application/json\",\r\n      }),\r\n      body: JSON.stringify({\r\n        entity: request,\r\n      }),\r\n    };\r\n    fetch(\"/foodcommune/accounts/joinClanRequest\", options)\r\n      .then((res) => {\r\n        return res.json();\r\n      })\r\n      .then((res) => {\r\n        console.log(res);\r\n        if (res.success) {\r\n          // Return to account detail and display error message\r\n          resolve(res);\r\n        } else {\r\n          reject(\"Unable to retrieve data\");\r\n        }\r\n      });\r\n  });\r\n}\r\n\r\nfunction handleMemberRequest(token, user, clanId, memberState) {\r\n  return new Promise((resolve, reject) => {\r\n    let request = { user: user, clanId: clanId, memberState: memberState };\r\n    let options = {\r\n      method: \"POST\",\r\n      headers: new Headers({\r\n        Authorization: \"Bearer \" + token,\r\n        \"Content-Type\": \"application/json\",\r\n      }),\r\n      body: JSON.stringify({\r\n        entity: request,\r\n      }),\r\n    };\r\n    fetch(\"/foodcommune/accounts/addUserToGroup\", options)\r\n      .then((res) => {\r\n        return res.json();\r\n      })\r\n      .then((res) => {\r\n        console.log(res);\r\n        if (res.success) {\r\n          // Return to account detail and display error message\r\n          resolve(res);\r\n        } else {\r\n          reject(\"Unable to retrieve data\");\r\n        }\r\n      });\r\n  });\r\n}\r\n\r\nfunction adminToggle(token, user, clanId, adminValue) {\r\n  return new Promise((resolve, reject) => {\r\n    let request = { user: user, clanId: clanId, adminValue: adminValue };\r\n    let options = {\r\n      method: \"POST\",\r\n      headers: new Headers({\r\n        Authorization: \"Bearer \" + token,\r\n        \"Content-Type\": \"application/json\",\r\n      }),\r\n      body: JSON.stringify({\r\n        entity: request,\r\n      }),\r\n    };\r\n    fetch(\"/foodcommune/accounts/adminToggle\", options)\r\n      .then((res) => {\r\n        return res.json();\r\n      })\r\n      .then((res) => {\r\n        console.log(res);\r\n        if (res.success) {\r\n          // Return to account detail and display error message\r\n          resolve(res);\r\n        } else {\r\n          reject(\"Unable to retrieve data\");\r\n        }\r\n      });\r\n  });\r\n}\r\n\r\nfunction deleteMember(token, user, clanId) {\r\n  return new Promise((resolve, reject) => {\r\n    let request = { user: user, clanId: clanId };\r\n    let options = {\r\n      method: \"POST\",\r\n      headers: new Headers({\r\n        Authorization: \"Bearer \" + token,\r\n        \"Content-Type\": \"application/json\",\r\n      }),\r\n      body: JSON.stringify({\r\n        entity: request,\r\n      }),\r\n    };\r\n    fetch(\"/foodcommune/accounts/deleteMember\", options)\r\n      .then((res) => {\r\n        return res.json();\r\n      })\r\n      .then((res) => {\r\n        console.log(res);\r\n        if (res.success) {\r\n          // Return to account detail and display error message\r\n          resolve(res);\r\n        } else {\r\n          reject(\"Unable to retrieve data\");\r\n        }\r\n      });\r\n  });\r\n}\r\n\r\nfunction updateClanFields(token, clanId, payload) {\r\n  return new Promise((resolve, reject) => {\r\n    let request = { values: payload, clanId: clanId };\r\n    let options = {\r\n      method: \"POST\",\r\n      headers: new Headers({\r\n        Authorization: \"Bearer \" + token,\r\n        \"Content-Type\": \"application/json\",\r\n      }),\r\n      body: JSON.stringify({\r\n        entity: request,\r\n      }),\r\n    };\r\n    fetch(\"/foodcommune/accounts/updateClanFields\", options)\r\n      .then((res) => {\r\n        return res.json();\r\n      })\r\n      .then((res) => {\r\n        console.log(res);\r\n        if (res.success) {\r\n          // Return to account detail and display error message\r\n          resolve(res);\r\n        } else {\r\n          reject(\"Unable to retrieve data\");\r\n        }\r\n      });\r\n  });\r\n}\r\n\r\nfunction deleteGroupBuy(token, clanId, dealId) {\r\n  return new Promise((resolve, reject) => {\r\n    let request = { clanId: clanId, dealId: dealId };\r\n    let options = {\r\n      method: \"POST\",\r\n      headers: new Headers({\r\n        Authorization: \"Bearer \" + token,\r\n        \"Content-Type\": \"application/json\",\r\n      }),\r\n      body: JSON.stringify({\r\n        entity: request,\r\n      }),\r\n    };\r\n    fetch(\"/foodcommune/accounts/deleteGroupBuy\", options)\r\n      .then((res) => {\r\n        return res.json();\r\n      })\r\n      .then((res) => {\r\n        console.log(res);\r\n        if (res.success) {\r\n          // Return to account detail and display error message\r\n          resolve(res);\r\n        } else {\r\n          reject(\"Unable to retrieve data\");\r\n        }\r\n      });\r\n  });\r\n}\r\n\r\nfunction insertNews(token, clanId, message) {\r\n  return new Promise((resolve, reject) => {\r\n    let request = { clanId: clanId, message: message };\r\n    let options = {\r\n      method: \"POST\",\r\n      headers: new Headers({\r\n        Authorization: \"Bearer \" + token,\r\n        \"Content-Type\": \"application/json\",\r\n      }),\r\n      body: JSON.stringify({\r\n        entity: request,\r\n      }),\r\n    };\r\n    fetch(\"/foodcommune/accounts/insertNews\", options)\r\n      .then((res) => {\r\n        return res.json();\r\n      })\r\n      .then((res) => {\r\n        console.log(res);\r\n        if (res.success) {\r\n          // Return to account detail and display error message\r\n          resolve(res);\r\n        } else {\r\n          reject(\"Unable to retrieve data\");\r\n        }\r\n      });\r\n  });\r\n}\r\n"]},"metadata":{},"sourceType":"module"}