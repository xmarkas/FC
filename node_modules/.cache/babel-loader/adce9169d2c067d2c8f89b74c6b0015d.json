{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\xmark\\\\Desktop\\\\Code\\\\Servers\\\\Qumoc\\\\food-commune\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\xmark\\\\Desktop\\\\Code\\\\Servers\\\\Qumoc\\\\food-commune\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:\\\\Users\\\\xmark\\\\Desktop\\\\Code\\\\Servers\\\\Qumoc\\\\food-commune\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\xmark\\\\Desktop\\\\Code\\\\Servers\\\\Qumoc\\\\food-commune\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\xmark\\\\Desktop\\\\Code\\\\Servers\\\\Qumoc\\\\food-commune\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\xmark\\\\Desktop\\\\Code\\\\Servers\\\\Qumoc\\\\food-commune\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';var SignIn=/*#__PURE__*/function(_Component){_inherits(SignIn,_Component);var _super=_createSuper(SignIn);function SignIn(){var _this;_classCallCheck(this,SignIn);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={email:\"\",password:\"\",errMsg:\"\"};_this.closeSignInWindow=function(ev){if(ev.target.id===\"sign-in-wrapper\")_this.props.signIn();};_this.inputEmail=function(ev){_this.setState({email:ev.target.value});};_this.inputPassword=function(ev){_this.setState({password:ev.target.value});};_this.signInAuthenticate=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var authClient,transaction;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:authClient=_this.props.authClient;_context.next=3;return authClient.signIn({username:_this.state.email,password:_this.state.password}).catch(function(err){_this.setState({errMsg:\"Email or password is incorrect!\"});console.log(err);});case 3:transaction=_context.sent;if(transaction&&transaction.status===\"SUCCESS\"){console.log(\"SUCCESS\",transaction);authClient.session.setCookieAndRedirect(transaction.sessionToken,\"https://qumoc.com/foodcommune/mydashboard.html\");// Sets a cookie on redirect\n}case 5:case\"end\":return _context.stop();}}},_callee);}));return _this;}_createClass(SignIn,[{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/ (// <!-- Sign In  -->\nReact.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{id:\"sign-in-wrapper\",className:this.props.signInToggle?\"show-sign-in\":\"\",onClick:function onClick(ev){return _this2.closeSignInWindow(ev);}},/*#__PURE__*/React.createElement(\"div\",{id:\"sign-in\"},/*#__PURE__*/React.createElement(\"div\",{className:\"header spartan\"},/*#__PURE__*/React.createElement(\"img\",{width:\"40px\",src:require(\"../media/logoAlpha.gif\"),alt:\"\"}),/*#__PURE__*/React.createElement(\"div\",null,\"Sign In\")),/*#__PURE__*/React.createElement(\"div\",{className:\"content spartan\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",null,\"Email\"),/*#__PURE__*/React.createElement(\"input\",{onChange:function onChange(ev){return _this2.inputEmail(ev);},type:\"email\",className:\"form-control\",id:\"sign-in-email\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"label\",null,\"Password\"),/*#__PURE__*/React.createElement(\"input\",{onChange:function onChange(ev){return _this2.inputPassword(ev);},type:\"password\",className:\"form-control\",id:\"sign-in-password\"})),/*#__PURE__*/React.createElement(\"button\",{id:\"signin-go\",className:\"btn btn-primary\",onClick:this.signInAuthenticate},\"Sign-In\"),/*#__PURE__*/React.createElement(\"div\",{id:\"sign-in-form-error\",className:\"spartan pt-2\",style:{fontSize:\"x-small\",color:\"red\",textAlign:\"center\"}},this.state.errMsg),/*#__PURE__*/React.createElement(\"div\",{id:\"password-reset\",className:\"py-1\"},/*#__PURE__*/React.createElement(\"small\",{onClick:function onClick(){window.location.href=\"/foodcommune/account-login-help.html\";},style:{fontWeight:\"500\",cursor:\"pointer\"}},\"Reset Password\")))))));}}]);return SignIn;}(Component);export default SignIn;","map":{"version":3,"sources":["C:/Users/xmark/Desktop/Code/Servers/Qumoc/food-commune/src/components/SignIn.jsx"],"names":["React","Component","SignIn","state","email","password","errMsg","closeSignInWindow","ev","target","id","props","signIn","inputEmail","setState","value","inputPassword","signInAuthenticate","authClient","username","catch","err","console","log","transaction","status","session","setCookieAndRedirect","sessionToken","signInToggle","require","fontSize","color","textAlign","window","location","href","fontWeight","cursor"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\n\r\nclass SignIn extends Component {\r\n  state = {\r\n    email: \"\",\r\n    password: \"\",\r\n    errMsg: \"\"\r\n  };\r\n\r\n  closeSignInWindow = ev => {\r\n    if (ev.target.id === \"sign-in-wrapper\") this.props.signIn();\r\n  };\r\n\r\n  inputEmail = ev => {\r\n    this.setState({ email: ev.target.value });\r\n  };\r\n\r\n  inputPassword = ev => {\r\n    this.setState({ password: ev.target.value });\r\n  };\r\n\r\n  signInAuthenticate = async () => {\r\n    let authClient = this.props.authClient;\r\n\r\n    let transaction = await authClient\r\n      .signIn({\r\n        username: this.state.email,\r\n        password: this.state.password\r\n      })\r\n      .catch(err => {\r\n        this.setState({ errMsg: \"Email or password is incorrect!\" });\r\n        console.log(err);\r\n      });\r\n\r\n    if (transaction && transaction.status === \"SUCCESS\") {\r\n      console.log(\"SUCCESS\", transaction);\r\n      authClient.session.setCookieAndRedirect(\r\n        transaction.sessionToken,\r\n        \"https://qumoc.com/foodcommune/mydashboard.html\"\r\n      ); // Sets a cookie on redirect\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      // <!-- Sign In  -->\r\n\r\n      <React.Fragment>\r\n        <div\r\n          id=\"sign-in-wrapper\"\r\n          className={this.props.signInToggle ? \"show-sign-in\" : \"\"}\r\n          onClick={ev => this.closeSignInWindow(ev)}\r\n        >\r\n          <div id=\"sign-in\">\r\n            <div className=\"header spartan\">\r\n              <img width=\"40px\" src={require(\"../media/logoAlpha.gif\")} alt=\"\" />\r\n              <div>Sign In</div>\r\n            </div>\r\n            <div className=\"content spartan\">\r\n              {/* <!-- email --> */}\r\n              <div className=\"form-group\">\r\n                <label>Email</label>\r\n                <input\r\n                  onChange={ev => this.inputEmail(ev)}\r\n                  type=\"email\"\r\n                  className=\"form-control\"\r\n                  id=\"sign-in-email\"\r\n                ></input>\r\n              </div>\r\n              {/* <!-- password --> */}\r\n              <div className=\"form-group\">\r\n                <label>Password</label>\r\n                <input\r\n                  onChange={ev => this.inputPassword(ev)}\r\n                  type=\"password\"\r\n                  className=\"form-control\"\r\n                  id=\"sign-in-password\"\r\n                ></input>\r\n              </div>\r\n              <button\r\n                id=\"signin-go\"\r\n                className=\"btn btn-primary\"\r\n                onClick={this.signInAuthenticate}\r\n              >\r\n                Sign-In\r\n              </button>\r\n\r\n              <div\r\n                id=\"sign-in-form-error\"\r\n                className=\"spartan pt-2\"\r\n                style={{\r\n                  fontSize: \"x-small\",\r\n                  color: \"red\",\r\n                  textAlign: \"center\"\r\n                }}\r\n              >\r\n                {this.state.errMsg}\r\n              </div>\r\n              <div id=\"password-reset\" className=\"py-1\">\r\n                <small\r\n                  onClick={() => {\r\n                    window.location.href =\r\n                      \"/foodcommune/account-login-help.html\";\r\n                  }}\r\n                  style={{ fontWeight: \"500\", cursor: \"pointer\" }}\r\n                >\r\n                  Reset Password\r\n                </small>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nexport default SignIn;"]},"metadata":{},"sourceType":"module"}