{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\xmark\\\\Desktop\\\\Code\\\\Servers\\\\FC-SERVER\\\\food-commune\\\\src\\\\components\\\\MyGroupPage.jsx\";\nimport React, { Component } from \"react\";\nimport ItemView from \"./ItemView\";\nimport MyGroupHeader from \"./MyGroupHeader\";\nimport MyGroupProfile from \"./MyGroupProfile\";\nimport MyGroupBuys from \"./MyGroupBuys\";\nimport MyGroupMembers from \"./MyGroupMemebers\";\nimport MyGroupNews from \"./MyGroupNews\";\nimport { connect } from \"react-redux\";\nimport { withRouter } from 'react-router-dom';\n/**\r\n * Roles: How user views are affected my their ROLE level\r\n *\r\n * Description: state.userIsMember determines the ROLL.\r\n *              userIsMember = 0 is Admin priviledges.\r\n *              userIsMember = 1 is Non-Admin group user. Cannot see admin options.\r\n *              userIsMember > 1 (2 is not a member, but possible requested to join group).\r\n *\r\n *              Currently only using 0, 1, and 2 for ROLES.\r\n */\n\nconst mapStateToProps = state => {\n  return {\n    provisional: state.provisional,\n    user: state.user,\n    token: state.token\n  };\n};\n\nclass MyGroupPage extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      modal: null,\n      modalUpdate: null,\n      joinRequested: false,\n      userIsMember: 3\n    };\n\n    this.itemView = deal => {\n      let updateBuy = this.state.data.Purchases.find(obj => {\n        return obj.user_id === this.props.user.id && obj.deal_id === deal.id;\n      });\n      console.log(updateBuy);\n\n      if (updateBuy) {\n        this.setState({\n          modalUpdate: updateBuy,\n          modal: deal\n        });\n      } else {\n        this.setState({\n          modal: deal\n        });\n      }\n    };\n\n    this.closeModal = () => {\n      this.setState({\n        modal: null\n      });\n    };\n\n    this.sendJoinRequest = () => {\n      joinRequest(this.props.token, this.props.user, this.state.data.Clan[0].id).then(resolved => {\n        console.log(resolved);\n        this.setState({\n          joinRequested: true\n        });\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.memberRequest = (user_id, memberState) => {\n      handleMemberRequest(this.props.token, user_id, this.state.data.Clan[0].id, memberState).then(resolved => {\n        console.log(resolved);\n\n        if (memberState === 1) {\n          this.setState(prevState => {\n            let data = { ...prevState.data\n            };\n            let requestIndex = data.JoinRequests.findIndex(obj => {\n              return obj.id === user_id;\n            });\n            let joinRequest = data.JoinRequests.splice(requestIndex, 1);\n            joinRequest[0].user_is_admin = 0;\n            data.Members.push(joinRequest[0]);\n            return {\n              data: data\n            };\n          });\n        } else if (memberState === 3) {}\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.makeRevokeAdmin = (user_id, adminValue) => {\n      adminToggle(this.props.token, user_id, this.state.data.Clan[0].id, adminValue).then(resolved => {\n        console.log(resolved);\n        this.setState(prevState => {\n          let data = { ...prevState.data\n          };\n          let memberIndex = data.Members.findIndex(obj => {\n            return obj.id === user_id;\n          });\n          data.Members[memberIndex].user_is_admin = adminValue;\n          return {\n            data: data\n          };\n        });\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.removeMember = user_id => {\n      deleteMember(this.props.token, user_id, this.state.data.Clan[0].id).then(resolved => {\n        console.log(resolved);\n        this.setState(prevState => {\n          let data = { ...prevState.data\n          };\n          let memberIndex = data.Members.findIndex(obj => {\n            return obj.id === user_id;\n          });\n          data.Members.splice(memberIndex, 1);\n          return {\n            data: data\n          };\n        });\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.updateClan = payload => {\n      updateClanFields(this.props.token, this.state.data.Clan[0].id, payload).then(resolved => {\n        console.log(resolved);\n        this.setState(prevState => {\n          let data = { ...prevState.data\n          };\n          let keys = Object.keys(payload);\n          keys.forEach(k => {\n            data.Clan[0][k] = payload[k];\n          });\n          return {\n            data: data\n          };\n        });\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.removeBuy = dealId => {\n      deleteGroupBuy(this.props.token, this.state.data.Clan[0].id, dealId).then(resolved => {\n        console.log(resolved);\n        console.log(\"BUY ID = \", dealId);\n        this.setState(prevState => {\n          let data = { ...prevState.data\n          };\n          let buyIndex = data.Buys.findIndex(obj => {\n            return obj.id === dealId;\n          });\n          console.log(buyIndex);\n          data.Buys.splice(buyIndex, 1);\n          return {\n            data: data\n          };\n        });\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.addNewNews = message => {\n      insertNews(this.props.token, this.state.data.Clan[0].id, message).then(resolved => {\n        console.log(resolved);\n        this.setState(prevState => {\n          let data = { ...prevState.data\n          };\n          data.News.unshift({\n            message: message\n          });\n          return {\n            data: data\n          };\n        });\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.placeOrder = (deal, purchaseUnits) => {\n      let request = {\n        userId: this.props.user.id,\n        clanId: this.state.data.Clan[0].id,\n        dealId: deal.id,\n        sellerId: deal.user_id,\n        purchaseUnits: purchaseUnits,\n        unitPrice: deal.price,\n        units: deal.units\n      };\n      let options = {\n        method: \"POST\",\n        headers: new Headers({\n          Authorization: \"Bearer \" + this.props.token,\n          \"Content-Type\": \"application/json\"\n        }),\n        body: JSON.stringify({\n          entity: request\n        })\n      };\n      fetch(\"/accounts/groupPurchase\", options).then(res => {\n        return res.json();\n      }).then(res => {\n        console.log(res);\n\n        if (res.success) {\n          // Return to account detail and display error message\n          console.log(res);\n        } else {\n          console.log(\"Unable to retrieve data\");\n        }\n      });\n    };\n\n    this.updateOrder = (deal, purchaseUnits, Purchase) => {\n      let request = {\n        purchaseUnits: purchaseUnits,\n        unitPrice: deal.price,\n        units: deal.units,\n        purchase_id: Purchase.id\n      };\n      let options = {\n        method: \"POST\",\n        headers: new Headers({\n          Authorization: \"Bearer \" + this.props.token,\n          \"Content-Type\": \"application/json\"\n        }),\n        body: JSON.stringify({\n          entity: request\n        })\n      };\n      fetch(\"/accounts/groupPurchaseUpdate\", options).then(res => {\n        return res.json();\n      }).then(res => {\n        console.log(res);\n\n        if (res.success) {\n          console.log(res);\n          this.setState(prevState => {\n            let data = { ...prevState.data\n            };\n            let target = data.Purchases.find(obj => {\n              return obj.id === Purchase.id;\n            });\n\n            if (target) {\n              target.purchase_units = purchaseUnits;\n            }\n\n            return {\n              data: data\n            };\n          });\n        } else {\n          console.log(\"Unable to retrieve data\");\n        }\n      });\n    };\n  }\n\n  componentWillMount() {\n    let query = this.props.history.location.query;\n    let groupId = query ? query.groupId : null;\n    fetchData(this.props.token, this.props.user.id, groupId).then(resolved => {\n      console.log(resolved);\n      this.setState({\n        data: resolved\n      }); // Is User a Clan member?\n\n      let user = resolved.Members.find(obj => {\n        return obj.id === this.props.user.id;\n      });\n\n      if (user) {\n        this.setState({\n          userIsMember: user.user_is_admin === 1 ? 0 : 1\n        });\n      } else {\n        this.setState({\n          userIsMember: 2\n        });\n      } // Did User request to join Clan?\n\n\n      let joinRequest = resolved.JoinRequests.find(obj => {\n        if (obj.id === this.props.user.id) {\n          this.setState({\n            joinRequested: true\n          });\n        }\n      });\n    }).catch(err => {\n      console.log(err);\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(React.Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 305,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      id: \"mygroup-page\",\n      className: \"row row-border justify-content-center mb-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 306,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      id: \"main-content\",\n      className: \"col spartan\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 310,\n        columnNumber: 11\n      }\n    }, this.state.modal && /*#__PURE__*/React.createElement(ItemView, {\n      modal: this.state.modal,\n      closeModal: this.closeModal // options={GroupPageActions(\n      //   this.state.token,\n      //   this.state.user.id,\n      //   this.state.data.Clan[0].id,\n      //   this.state.modal,\n      //   this.state.modalUpdate\n      // )}\n      ,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 312,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(MyGroupHeader, {\n      sendJoinRequest: this.sendJoinRequest,\n      joinRequested: this.state.joinRequested,\n      data: this.state.data,\n      userIsMember: this.state.userIsMember,\n      updateClan: this.updateClan,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 325,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 333,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      id: \"mygroup-profile\",\n      className: \"col-sm-12 col-lg-6 d-flex\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 334,\n        columnNumber: 15\n      }\n    }, this.state.data && /*#__PURE__*/React.createElement(MyGroupProfile, {\n      data: this.state.data,\n      userIsMember: this.state.userIsMember,\n      updateClan: this.updateClan,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 336,\n        columnNumber: 19\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"mygroup-buys\",\n      className: \"col-sm-12 col-lg-6 d-flex\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 344,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(MyGroupBuys, {\n      itemView: this.itemView,\n      data: this.state.data,\n      removeBuy: this.removeBuy,\n      userIsMember: this.state.userIsMember,\n      placeOrder: this.placeOrder,\n      updateOrder: this.updateOrder,\n      userId: this.props.user.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 345,\n        columnNumber: 17\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row mt-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 356,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      id: \"members-card\",\n      className: \"col-sm-12 col-lg-6 d-flex\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 357,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(MyGroupMembers, {\n      data: this.state.data,\n      memberRequest: this.memberRequest,\n      userIsMember: this.state.userIsMember,\n      makeRevokeAdmin: this.makeRevokeAdmin,\n      removeMember: this.removeMember,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 358,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"news-card\",\n      className: \"col-sm-12 col-lg-6 d-flex\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 366,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(MyGroupNews, {\n      addNewNews: this.addNewNews,\n      data: this.state.data,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 367,\n        columnNumber: 17\n      }\n    }))))));\n  }\n\n}\n\nexport default connect(mapStateToProps)(withRouter(MyGroupPage));\n\nfunction fetchData(token, userid, ref) {\n  console.log(\"fetching data......\", token, userid);\n  return new Promise((resolve, reject) => {\n    let request = {\n      userId: userid,\n      clanId: ref\n    };\n    let options = {\n      method: \"POST\",\n      headers: new Headers({\n        Authorization: \"Bearer \" + token,\n        \"Content-Type\": \"application/json\"\n      }),\n      body: JSON.stringify({\n        entity: request\n      })\n    };\n    fetch(\"/accounts/clanView\", options).then(res => {\n      return res.json();\n    }).then(res => {\n      console.log(res);\n\n      if (!res.success) {\n        // Return to account detail and display error message\n        resolve(res);\n      } else {\n        reject(\"Unable to retrieve data\");\n      }\n    });\n  });\n}\n\nfunction joinRequest(token, user, clanId) {\n  console.log(\"fetching data......\");\n  return new Promise((resolve, reject) => {\n    let request = {\n      user: user,\n      clanId: clanId\n    };\n    let options = {\n      method: \"POST\",\n      headers: new Headers({\n        Authorization: \"Bearer \" + token,\n        \"Content-Type\": \"application/json\"\n      }),\n      body: JSON.stringify({\n        entity: request\n      })\n    };\n    fetch(\"/accounts/joinClanRequest\", options).then(res => {\n      return res.json();\n    }).then(res => {\n      console.log(res);\n\n      if (res.success) {\n        // Return to account detail and display error message\n        resolve(res);\n      } else {\n        reject(\"Unable to retrieve data\");\n      }\n    });\n  });\n}\n\nfunction handleMemberRequest(token, user, clanId, memberState) {\n  return new Promise((resolve, reject) => {\n    let request = {\n      user: user,\n      clanId: clanId,\n      memberState: memberState\n    };\n    let options = {\n      method: \"POST\",\n      headers: new Headers({\n        Authorization: \"Bearer \" + token,\n        \"Content-Type\": \"application/json\"\n      }),\n      body: JSON.stringify({\n        entity: request\n      })\n    };\n    fetch(\"/accounts/addUserToGroup\", options).then(res => {\n      return res.json();\n    }).then(res => {\n      console.log(res);\n\n      if (res.success) {\n        // Return to account detail and display error message\n        resolve(res);\n      } else {\n        reject(\"Unable to retrieve data\");\n      }\n    });\n  });\n}\n\nfunction adminToggle(token, user, clanId, adminValue) {\n  return new Promise((resolve, reject) => {\n    let request = {\n      user: user,\n      clanId: clanId,\n      adminValue: adminValue\n    };\n    let options = {\n      method: \"POST\",\n      headers: new Headers({\n        Authorization: \"Bearer \" + token,\n        \"Content-Type\": \"application/json\"\n      }),\n      body: JSON.stringify({\n        entity: request\n      })\n    };\n    fetch(\"/accounts/adminToggle\", options).then(res => {\n      return res.json();\n    }).then(res => {\n      console.log(res);\n\n      if (res.success) {\n        // Return to account detail and display error message\n        resolve(res);\n      } else {\n        reject(\"Unable to retrieve data\");\n      }\n    });\n  });\n}\n\nfunction deleteMember(token, user, clanId) {\n  return new Promise((resolve, reject) => {\n    let request = {\n      user: user,\n      clanId: clanId\n    };\n    let options = {\n      method: \"POST\",\n      headers: new Headers({\n        Authorization: \"Bearer \" + token,\n        \"Content-Type\": \"application/json\"\n      }),\n      body: JSON.stringify({\n        entity: request\n      })\n    };\n    fetch(\"/accounts/deleteMember\", options).then(res => {\n      return res.json();\n    }).then(res => {\n      console.log(res);\n\n      if (res.success) {\n        // Return to account detail and display error message\n        resolve(res);\n      } else {\n        reject(\"Unable to retrieve data\");\n      }\n    });\n  });\n}\n\nfunction updateClanFields(token, clanId, payload) {\n  return new Promise((resolve, reject) => {\n    let request = {\n      values: payload,\n      clanId: clanId\n    };\n    let options = {\n      method: \"POST\",\n      headers: new Headers({\n        Authorization: \"Bearer \" + token,\n        \"Content-Type\": \"application/json\"\n      }),\n      body: JSON.stringify({\n        entity: request\n      })\n    };\n    fetch(\"/accounts/updateClanFields\", options).then(res => {\n      return res.json();\n    }).then(res => {\n      console.log(res);\n\n      if (res.success) {\n        // Return to account detail and display error message\n        resolve(res);\n      } else {\n        reject(\"Unable to retrieve data\");\n      }\n    });\n  });\n}\n\nfunction deleteGroupBuy(token, clanId, dealId) {\n  return new Promise((resolve, reject) => {\n    let request = {\n      clanId: clanId,\n      dealId: dealId\n    };\n    let options = {\n      method: \"POST\",\n      headers: new Headers({\n        Authorization: \"Bearer \" + token,\n        \"Content-Type\": \"application/json\"\n      }),\n      body: JSON.stringify({\n        entity: request\n      })\n    };\n    fetch(\"/accounts/deleteGroupBuy\", options).then(res => {\n      return res.json();\n    }).then(res => {\n      console.log(res);\n\n      if (res.success) {\n        // Return to account detail and display error message\n        resolve(res);\n      } else {\n        reject(\"Unable to retrieve data\");\n      }\n    });\n  });\n}\n\nfunction insertNews(token, clanId, message) {\n  return new Promise((resolve, reject) => {\n    let request = {\n      clanId: clanId,\n      message: message\n    };\n    let options = {\n      method: \"POST\",\n      headers: new Headers({\n        Authorization: \"Bearer \" + token,\n        \"Content-Type\": \"application/json\"\n      }),\n      body: JSON.stringify({\n        entity: request\n      })\n    };\n    fetch(\"/accounts/insertNews\", options).then(res => {\n      return res.json();\n    }).then(res => {\n      console.log(res);\n\n      if (res.success) {\n        // Return to account detail and display error message\n        resolve(res);\n      } else {\n        reject(\"Unable to retrieve data\");\n      }\n    });\n  });\n}","map":{"version":3,"sources":["C:/Users/xmark/Desktop/Code/Servers/FC-SERVER/food-commune/src/components/MyGroupPage.jsx"],"names":["React","Component","ItemView","MyGroupHeader","MyGroupProfile","MyGroupBuys","MyGroupMembers","MyGroupNews","connect","withRouter","mapStateToProps","state","provisional","user","token","MyGroupPage","modal","modalUpdate","joinRequested","userIsMember","itemView","deal","updateBuy","data","Purchases","find","obj","user_id","props","id","deal_id","console","log","setState","closeModal","sendJoinRequest","joinRequest","Clan","then","resolved","catch","err","memberRequest","memberState","handleMemberRequest","prevState","requestIndex","JoinRequests","findIndex","splice","user_is_admin","Members","push","makeRevokeAdmin","adminValue","adminToggle","memberIndex","removeMember","deleteMember","updateClan","payload","updateClanFields","keys","Object","forEach","k","removeBuy","dealId","deleteGroupBuy","buyIndex","Buys","addNewNews","message","insertNews","News","unshift","placeOrder","purchaseUnits","request","userId","clanId","sellerId","unitPrice","price","units","options","method","headers","Headers","Authorization","body","JSON","stringify","entity","fetch","res","json","success","updateOrder","Purchase","purchase_id","target","purchase_units","componentWillMount","query","history","location","groupId","fetchData","render","userid","ref","Promise","resolve","reject","values"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport ItemView from \"./ItemView\";\r\nimport MyGroupHeader from \"./MyGroupHeader\";\r\nimport MyGroupProfile from \"./MyGroupProfile\";\r\nimport MyGroupBuys from \"./MyGroupBuys\";\r\nimport MyGroupMembers from \"./MyGroupMemebers\";\r\nimport MyGroupNews from \"./MyGroupNews\";\r\nimport { connect } from \"react-redux\";\r\nimport { withRouter} from 'react-router-dom'\r\n\r\n/**\r\n * Roles: How user views are affected my their ROLE level\r\n *\r\n * Description: state.userIsMember determines the ROLL.\r\n *              userIsMember = 0 is Admin priviledges.\r\n *              userIsMember = 1 is Non-Admin group user. Cannot see admin options.\r\n *              userIsMember > 1 (2 is not a member, but possible requested to join group).\r\n *\r\n *              Currently only using 0, 1, and 2 for ROLES.\r\n */\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    provisional: state.provisional,\r\n    user: state.user,\r\n    token: state.token,\r\n  };\r\n};\r\n\r\nclass MyGroupPage extends Component {\r\n  state = {\r\n    modal: null,\r\n    modalUpdate: null,\r\n    joinRequested: false,\r\n    userIsMember: 3,\r\n  };\r\n\r\n  componentWillMount() {\r\n    let query = this.props.history.location.query;\r\n    let groupId = query ? query.groupId : null;\r\n  \r\n\r\n    fetchData(this.props.token, this.props.user.id, groupId)\r\n      .then((resolved) => {\r\n        console.log(resolved);\r\n        this.setState({ data: resolved });\r\n\r\n        // Is User a Clan member?\r\n        let user = resolved.Members.find((obj) => {\r\n          return obj.id === this.props.user.id;\r\n        });\r\n        if (user) {\r\n          this.setState({ userIsMember: user.user_is_admin === 1 ? 0 : 1 });\r\n        } else {\r\n          this.setState({ userIsMember: 2 });\r\n        }\r\n\r\n        // Did User request to join Clan?\r\n        let joinRequest = resolved.JoinRequests.find((obj) => {\r\n          if (obj.id === this.props.user.id) {\r\n            this.setState({ joinRequested: true });\r\n          }\r\n        });\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  }\r\n\r\n  itemView = (deal) => {\r\n    let updateBuy = this.state.data.Purchases.find((obj) => {\r\n      return obj.user_id === this.props.user.id && obj.deal_id === deal.id;\r\n    });\r\n    console.log(updateBuy);\r\n    if (updateBuy) {\r\n      this.setState({ modalUpdate: updateBuy, modal: deal });\r\n    } else {\r\n      this.setState({ modal: deal });\r\n    }\r\n  };\r\n\r\n  closeModal = () => {\r\n    this.setState({ modal: null });\r\n  };\r\n\r\n  sendJoinRequest = () => {\r\n    joinRequest(this.props.token, this.props.user, this.state.data.Clan[0].id)\r\n      .then((resolved) => {\r\n        console.log(resolved);\r\n        this.setState({ joinRequested: true });\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  memberRequest = (user_id, memberState) => {\r\n    handleMemberRequest(\r\n      this.props.token,\r\n      user_id,\r\n      this.state.data.Clan[0].id,\r\n      memberState\r\n    )\r\n      .then((resolved) => {\r\n        console.log(resolved);\r\n        if (memberState === 1) {\r\n          this.setState((prevState) => {\r\n            let data = { ...prevState.data };\r\n            let requestIndex = data.JoinRequests.findIndex((obj) => {\r\n              return obj.id === user_id;\r\n            });\r\n            let joinRequest = data.JoinRequests.splice(requestIndex, 1);\r\n            joinRequest[0].user_is_admin = 0;\r\n            data.Members.push(joinRequest[0]);\r\n            return { data: data };\r\n          });\r\n        } else if (memberState === 3) {\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  makeRevokeAdmin = (user_id, adminValue) => {\r\n    adminToggle(\r\n      this.props.token,\r\n      user_id,\r\n      this.state.data.Clan[0].id,\r\n      adminValue\r\n    )\r\n      .then((resolved) => {\r\n        console.log(resolved);\r\n\r\n        this.setState((prevState) => {\r\n          let data = { ...prevState.data };\r\n          let memberIndex = data.Members.findIndex((obj) => {\r\n            return obj.id === user_id;\r\n          });\r\n          data.Members[memberIndex].user_is_admin = adminValue;\r\n\r\n          return { data: data };\r\n        });\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  removeMember = (user_id) => {\r\n    deleteMember(this.props.token, user_id, this.state.data.Clan[0].id)\r\n      .then((resolved) => {\r\n        console.log(resolved);\r\n\r\n        this.setState((prevState) => {\r\n          let data = { ...prevState.data };\r\n          let memberIndex = data.Members.findIndex((obj) => {\r\n            return obj.id === user_id;\r\n          });\r\n          data.Members.splice(memberIndex, 1);\r\n          return { data: data };\r\n        });\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  updateClan = (payload) => {\r\n    updateClanFields(this.props.token, this.state.data.Clan[0].id, payload)\r\n      .then((resolved) => {\r\n        console.log(resolved);\r\n\r\n        this.setState((prevState) => {\r\n          let data = { ...prevState.data };\r\n          let keys = Object.keys(payload);\r\n          keys.forEach((k) => {\r\n            data.Clan[0][k] = payload[k];\r\n          });\r\n\r\n          return { data: data };\r\n        });\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  removeBuy = (dealId) => {\r\n    deleteGroupBuy(this.props.token, this.state.data.Clan[0].id, dealId)\r\n      .then((resolved) => {\r\n        console.log(resolved);\r\n        console.log(\"BUY ID = \", dealId);\r\n        this.setState((prevState) => {\r\n          let data = { ...prevState.data };\r\n          let buyIndex = data.Buys.findIndex((obj) => {\r\n            return obj.id === dealId;\r\n          });\r\n          console.log(buyIndex);\r\n          data.Buys.splice(buyIndex, 1);\r\n          return { data: data };\r\n        });\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  addNewNews = (message) => {\r\n    insertNews(this.props.token, this.state.data.Clan[0].id, message)\r\n      .then((resolved) => {\r\n        console.log(resolved);\r\n        this.setState((prevState) => {\r\n          let data = { ...prevState.data };\r\n          data.News.unshift({ message: message });\r\n          return { data: data };\r\n        });\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  placeOrder = (deal, purchaseUnits) => {\r\n    let request = {\r\n      userId: this.props.user.id,\r\n      clanId: this.state.data.Clan[0].id,\r\n      dealId: deal.id,\r\n      sellerId: deal.user_id,\r\n      purchaseUnits: purchaseUnits,\r\n      unitPrice: deal.price,\r\n      units: deal.units,\r\n    };\r\n    let options = {\r\n      method: \"POST\",\r\n      headers: new Headers({\r\n        Authorization: \"Bearer \" + this.props.token,\r\n        \"Content-Type\": \"application/json\",\r\n      }),\r\n      body: JSON.stringify({\r\n        entity: request,\r\n      }),\r\n    };\r\n    fetch(\"/accounts/groupPurchase\", options)\r\n      .then((res) => {\r\n        return res.json();\r\n      })\r\n      .then((res) => {\r\n        console.log(res);\r\n        if (res.success) {\r\n          // Return to account detail and display error message\r\n          console.log(res);\r\n        } else {\r\n          console.log(\"Unable to retrieve data\");\r\n        }\r\n      });\r\n  };\r\n\r\n  updateOrder = (deal, purchaseUnits, Purchase) => {\r\n    let request = {\r\n      purchaseUnits: purchaseUnits,\r\n      unitPrice: deal.price,\r\n      units: deal.units,\r\n      purchase_id: Purchase.id,\r\n    };\r\n\r\n    let options = {\r\n      method: \"POST\",\r\n      headers: new Headers({\r\n        Authorization: \"Bearer \" + this.props.token,\r\n        \"Content-Type\": \"application/json\",\r\n      }),\r\n      body: JSON.stringify({\r\n        entity: request,\r\n      }),\r\n    };\r\n\r\n    fetch(\"/accounts/groupPurchaseUpdate\", options)\r\n      .then((res) => {\r\n        return res.json();\r\n      })\r\n      .then((res) => {\r\n        console.log(res);\r\n        if (res.success) {\r\n          console.log(res);\r\n          this.setState((prevState) => {\r\n            let data = { ...prevState.data };\r\n            let target = data.Purchases.find((obj) => {\r\n              return obj.id === Purchase.id;\r\n            });\r\n            if (target) {\r\n              target.purchase_units = purchaseUnits;\r\n            }\r\n\r\n            return { data: data };\r\n          });\r\n        } else {\r\n          console.log(\"Unable to retrieve data\");\r\n        }\r\n      });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <React.Fragment>\r\n        <div\r\n          id=\"mygroup-page\"\r\n          className=\"row row-border justify-content-center mb-4\"\r\n        >\r\n          <div id=\"main-content\" className=\"col spartan\">\r\n            {this.state.modal && (\r\n              <ItemView\r\n                modal={this.state.modal}\r\n                closeModal={this.closeModal}\r\n                // options={GroupPageActions(\r\n                //   this.state.token,\r\n                //   this.state.user.id,\r\n                //   this.state.data.Clan[0].id,\r\n                //   this.state.modal,\r\n                //   this.state.modalUpdate\r\n                // )}\r\n              />\r\n            )}\r\n\r\n            <MyGroupHeader\r\n              sendJoinRequest={this.sendJoinRequest}\r\n              joinRequested={this.state.joinRequested}\r\n              data={this.state.data}\r\n              userIsMember={this.state.userIsMember}\r\n              updateClan={this.updateClan}\r\n            />\r\n\r\n            <div className=\"row\">\r\n              <div id=\"mygroup-profile\" className=\"col-sm-12 col-lg-6 d-flex\">\r\n                {this.state.data && (\r\n                  <MyGroupProfile\r\n                    data={this.state.data}\r\n                    userIsMember={this.state.userIsMember}\r\n                    updateClan={this.updateClan}\r\n                  />\r\n                )}\r\n              </div>\r\n\r\n              <div id=\"mygroup-buys\" className=\"col-sm-12 col-lg-6 d-flex\">\r\n                <MyGroupBuys\r\n                  itemView={this.itemView}\r\n                  data={this.state.data}\r\n                  removeBuy={this.removeBuy}\r\n                  userIsMember={this.state.userIsMember}\r\n                  placeOrder={this.placeOrder}\r\n                  updateOrder={this.updateOrder}\r\n                  userId={this.props.user.id}\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"row mt-4\">\r\n              <div id=\"members-card\" className=\"col-sm-12 col-lg-6 d-flex\">\r\n                <MyGroupMembers\r\n                  data={this.state.data}\r\n                  memberRequest={this.memberRequest}\r\n                  userIsMember={this.state.userIsMember}\r\n                  makeRevokeAdmin={this.makeRevokeAdmin}\r\n                  removeMember={this.removeMember}\r\n                />\r\n              </div>\r\n              <div id=\"news-card\" className=\"col-sm-12 col-lg-6 d-flex\">\r\n                <MyGroupNews\r\n                  addNewNews={this.addNewNews}\r\n                  data={this.state.data}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(withRouter(MyGroupPage));\r\n\r\nfunction fetchData(token, userid, ref) {\r\n  console.log(\"fetching data......\", token, userid);\r\n  return new Promise((resolve, reject) => {\r\n    let request = { userId: userid, clanId: ref };\r\n    let options = {\r\n      method: \"POST\",\r\n      headers: new Headers({\r\n        Authorization: \"Bearer \" + token,\r\n        \"Content-Type\": \"application/json\",\r\n      }),\r\n      body: JSON.stringify({\r\n        entity: request,\r\n      }),\r\n    };\r\n    fetch(\"/accounts/clanView\", options)\r\n      .then((res) => {\r\n        return res.json();\r\n      })\r\n      .then((res) => {\r\n        console.log(res);\r\n        if (!res.success) {\r\n          // Return to account detail and display error message\r\n          resolve(res);\r\n        } else {\r\n          reject(\"Unable to retrieve data\");\r\n        }\r\n      });\r\n  });\r\n}\r\n\r\nfunction joinRequest(token, user, clanId) {\r\n  console.log(\"fetching data......\");\r\n  return new Promise((resolve, reject) => {\r\n    let request = { user: user, clanId: clanId };\r\n    let options = {\r\n      method: \"POST\",\r\n      headers: new Headers({\r\n        Authorization: \"Bearer \" + token,\r\n        \"Content-Type\": \"application/json\",\r\n      }),\r\n      body: JSON.stringify({\r\n        entity: request,\r\n      }),\r\n    };\r\n    fetch(\"/accounts/joinClanRequest\", options)\r\n      .then((res) => {\r\n        return res.json();\r\n      })\r\n      .then((res) => {\r\n        console.log(res);\r\n        if (res.success) {\r\n          // Return to account detail and display error message\r\n          resolve(res);\r\n        } else {\r\n          reject(\"Unable to retrieve data\");\r\n        }\r\n      });\r\n  });\r\n}\r\n\r\nfunction handleMemberRequest(token, user, clanId, memberState) {\r\n  return new Promise((resolve, reject) => {\r\n    let request = { user: user, clanId: clanId, memberState: memberState };\r\n    let options = {\r\n      method: \"POST\",\r\n      headers: new Headers({\r\n        Authorization: \"Bearer \" + token,\r\n        \"Content-Type\": \"application/json\",\r\n      }),\r\n      body: JSON.stringify({\r\n        entity: request,\r\n      }),\r\n    };\r\n    fetch(\"/accounts/addUserToGroup\", options)\r\n      .then((res) => {\r\n        return res.json();\r\n      })\r\n      .then((res) => {\r\n        console.log(res);\r\n        if (res.success) {\r\n          // Return to account detail and display error message\r\n          resolve(res);\r\n        } else {\r\n          reject(\"Unable to retrieve data\");\r\n        }\r\n      });\r\n  });\r\n}\r\n\r\nfunction adminToggle(token, user, clanId, adminValue) {\r\n  return new Promise((resolve, reject) => {\r\n    let request = { user: user, clanId: clanId, adminValue: adminValue };\r\n    let options = {\r\n      method: \"POST\",\r\n      headers: new Headers({\r\n        Authorization: \"Bearer \" + token,\r\n        \"Content-Type\": \"application/json\",\r\n      }),\r\n      body: JSON.stringify({\r\n        entity: request,\r\n      }),\r\n    };\r\n    fetch(\"/accounts/adminToggle\", options)\r\n      .then((res) => {\r\n        return res.json();\r\n      })\r\n      .then((res) => {\r\n        console.log(res);\r\n        if (res.success) {\r\n          // Return to account detail and display error message\r\n          resolve(res);\r\n        } else {\r\n          reject(\"Unable to retrieve data\");\r\n        }\r\n      });\r\n  });\r\n}\r\n\r\nfunction deleteMember(token, user, clanId) {\r\n  return new Promise((resolve, reject) => {\r\n    let request = { user: user, clanId: clanId };\r\n    let options = {\r\n      method: \"POST\",\r\n      headers: new Headers({\r\n        Authorization: \"Bearer \" + token,\r\n        \"Content-Type\": \"application/json\",\r\n      }),\r\n      body: JSON.stringify({\r\n        entity: request,\r\n      }),\r\n    };\r\n    fetch(\"/accounts/deleteMember\", options)\r\n      .then((res) => {\r\n        return res.json();\r\n      })\r\n      .then((res) => {\r\n        console.log(res);\r\n        if (res.success) {\r\n          // Return to account detail and display error message\r\n          resolve(res);\r\n        } else {\r\n          reject(\"Unable to retrieve data\");\r\n        }\r\n      });\r\n  });\r\n}\r\n\r\nfunction updateClanFields(token, clanId, payload) {\r\n  return new Promise((resolve, reject) => {\r\n    let request = { values: payload, clanId: clanId };\r\n    let options = {\r\n      method: \"POST\",\r\n      headers: new Headers({\r\n        Authorization: \"Bearer \" + token,\r\n        \"Content-Type\": \"application/json\",\r\n      }),\r\n      body: JSON.stringify({\r\n        entity: request,\r\n      }),\r\n    };\r\n    fetch(\"/accounts/updateClanFields\", options)\r\n      .then((res) => {\r\n        return res.json();\r\n      })\r\n      .then((res) => {\r\n        console.log(res);\r\n        if (res.success) {\r\n          // Return to account detail and display error message\r\n          resolve(res);\r\n        } else {\r\n          reject(\"Unable to retrieve data\");\r\n        }\r\n      });\r\n  });\r\n}\r\n\r\nfunction deleteGroupBuy(token, clanId, dealId) {\r\n  return new Promise((resolve, reject) => {\r\n    let request = { clanId: clanId, dealId: dealId };\r\n    let options = {\r\n      method: \"POST\",\r\n      headers: new Headers({\r\n        Authorization: \"Bearer \" + token,\r\n        \"Content-Type\": \"application/json\",\r\n      }),\r\n      body: JSON.stringify({\r\n        entity: request,\r\n      }),\r\n    };\r\n    fetch(\"/accounts/deleteGroupBuy\", options)\r\n      .then((res) => {\r\n        return res.json();\r\n      })\r\n      .then((res) => {\r\n        console.log(res);\r\n        if (res.success) {\r\n          // Return to account detail and display error message\r\n          resolve(res);\r\n        } else {\r\n          reject(\"Unable to retrieve data\");\r\n        }\r\n      });\r\n  });\r\n}\r\n\r\nfunction insertNews(token, clanId, message) {\r\n  return new Promise((resolve, reject) => {\r\n    let request = { clanId: clanId, message: message };\r\n    let options = {\r\n      method: \"POST\",\r\n      headers: new Headers({\r\n        Authorization: \"Bearer \" + token,\r\n        \"Content-Type\": \"application/json\",\r\n      }),\r\n      body: JSON.stringify({\r\n        entity: request,\r\n      }),\r\n    };\r\n    fetch(\"/accounts/insertNews\", options)\r\n      .then((res) => {\r\n        return res.json();\r\n      })\r\n      .then((res) => {\r\n        console.log(res);\r\n        if (res.success) {\r\n          // Return to account detail and display error message\r\n          resolve(res);\r\n        } else {\r\n          reject(\"Unable to retrieve data\");\r\n        }\r\n      });\r\n  });\r\n}\r\n"]},"metadata":{},"sourceType":"module"}