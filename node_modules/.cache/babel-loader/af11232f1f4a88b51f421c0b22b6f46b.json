{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\xmark\\\\Desktop\\\\Code\\\\Servers\\\\FC-SERVER\\\\food-commune\\\\src\\\\components\\\\MyGroupProfile.jsx\";\nimport React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\n\nclass MyGroupProfile extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      edit: false,\n      area: \"_\",\n      name: \"_\",\n      imageFile: null,\n      imgUpload: false,\n      imgPreview: null\n    };\n\n    this.stars = groupScore => {\n      let score = [];\n\n      for (let s = 0; s < 5; s++) {\n        if (s < groupScore) {\n          score.push( /*#__PURE__*/React.createElement(\"i\", {\n            key: s,\n            className: \"fas fa-star sY\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 18,\n              columnNumber: 20\n            }\n          }));\n        } else {\n          score.push( /*#__PURE__*/React.createElement(\"i\", {\n            key: s,\n            className: \"fas fa-star sG\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 20,\n              columnNumber: 20\n            }\n          }));\n        }\n      }\n\n      return score;\n    };\n\n    this.saveProfile = () => {\n      this.setState({\n        edit: false\n      });\n      let payload = {}; // Append area if has value\n\n      if (this.state.area !== \"_\") payload.area = this.state.area;\n      if (this.state.name !== \"_\") payload.name = this.state.name; // Append file name and user id to payload\n\n      if (this.state.imageFile) {\n        let groupName = this.props.data.Clan[0].name.replace(/\\s|\"|'/g, \"\");\n        let file = this.state.imageFile;\n        let formData = new FormData();\n        formData.append(\"file\", file);\n        payload.image_url = `${groupName}@${file.name}`;\n        payload.image_url = payload.image_url.replace(/\\s|\"|'/g, \"\");\n        console.log(payload); // Send image\n\n        fetch(`/imageUpload/group?groupname=${groupName}`, {\n          body: formData,\n          method: \"POST\"\n        }).then(res => {\n          return res.json();\n        }).then(res => {\n          console.log(res);\n        });\n      }\n\n      if (Object.keys(payload).length !== 0) this.props.updateClan(payload);\n    };\n\n    this.groupImgUpload = () => {\n      this.setState(prevState => {\n        return {\n          imgUpload: true\n        };\n      }, () => {\n        document.getElementById(\"image\").click();\n      });\n    };\n\n    this.imgPreview = ev => {\n      let file = document.getElementById(\"image\").files[0];\n      this.setState({\n        imageFile: file\n      });\n      let Reader = new FileReader();\n\n      Reader.onloadend = e => {\n        this.setState({\n          imgPreview: e.target.result\n        });\n      };\n\n      Reader.readAsDataURL(file);\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(React.Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card bg-light\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-header\",\n      style: {\n        display: \"flex\",\n        justifyContent: \"space-between\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 13\n      }\n    }, \"Group Page\"), !this.props.userIsMember && /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 15\n      }\n    }, !this.state.edit ? /*#__PURE__*/React.createElement(\"div\", {\n      id: \"edit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      style: {\n        cursor: \"pointer\"\n      },\n      className: \"fas fa-pencil-alt\",\n      onClick: () => {\n        this.setState({\n          edit: true\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 21\n      }\n    })) : /*#__PURE__*/React.createElement(\"button\", {\n      id: \"save\",\n      onClick: this.saveProfile,\n      className: \"btn btn-sm btn-success\",\n      style: {\n        font: \"small-caption\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 19\n      }\n    }, \"save\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      id: \"image\",\n      type: \"file\",\n      style: {\n        display: \"none\"\n      },\n      onChange: this.imgPreview,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-6 text-center d-flex justify-content-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 15\n      }\n    }, this.state.edit && /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fas fa-camera-retro fa-3x\",\n      onClick: this.groupImgUpload,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 19\n      }\n    }), !this.state.imgUpload && !this.props.data.Clan[0].image_url && /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fas fa-users fa-7x\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 21\n      }\n    }), !this.state.imgUpload && this.props.data.Clan[0].image_url && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"img-wrap-lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: `/Group_Images/${this.props.data.Clan[0].image_url}`,\n      style: {\n        width: \"inherit\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 21\n      }\n    })), this.state.imgUpload && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"img-wrap-lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      id: \"preview\",\n      src: this.state.imgPreview,\n      style: {\n        width: \"inherit\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 21\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-6 align-self-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row justify-content-center text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 17\n      }\n    }, this.state.edit ? /*#__PURE__*/React.createElement(\"input\", {\n      id: \"name\",\n      placeholder: this.props.data.Clan[0].name,\n      onChange: ev => {\n        this.setState({\n          name: ev.target.value\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 21\n      }\n    }) : this.props.data.Clan[0].name), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 19\n      }\n    }, this.stars(this.props.data.Clan[0].score))))), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"user-details\",\n      className: \"row mt-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row justify-content-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 17\n      }\n    }, \"Area\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row justify-content-center text-muted\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 17\n      }\n    }, this.state.edit ? /*#__PURE__*/React.createElement(\"input\", {\n      id: \"area\",\n      placeholder: \"general location\",\n      onChange: ev => this.setState({\n        area: ev.target.value\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 21\n      }\n    }) : this.props.data.Clan[0].area))))));\n  }\n\n}\n\nexport default MyGroupProfile;","map":{"version":3,"sources":["C:/Users/xmark/Desktop/Code/Servers/FC-SERVER/food-commune/src/components/MyGroupProfile.jsx"],"names":["React","Component","Link","MyGroupProfile","state","edit","area","name","imageFile","imgUpload","imgPreview","stars","groupScore","score","s","push","saveProfile","setState","payload","groupName","props","data","Clan","replace","file","formData","FormData","append","image_url","console","log","fetch","body","method","then","res","json","Object","keys","length","updateClan","groupImgUpload","prevState","document","getElementById","click","ev","files","Reader","FileReader","onloadend","e","target","result","readAsDataURL","render","display","justifyContent","userIsMember","cursor","font","width","value"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,IAAT,QAAqB,kBAArB;;AAEA,MAAMC,cAAN,SAA6BF,SAA7B,CAAuC;AAAA;AAAA;AAAA,SACrCG,KADqC,GAC7B;AACNC,MAAAA,IAAI,EAAE,KADA;AAENC,MAAAA,IAAI,EAAE,GAFA;AAGNC,MAAAA,IAAI,EAAE,GAHA;AAINC,MAAAA,SAAS,EAAE,IAJL;AAKNC,MAAAA,SAAS,EAAE,KALL;AAMNC,MAAAA,UAAU,EAAE;AANN,KAD6B;;AAAA,SAUrCC,KAVqC,GAU5BC,UAAD,IAAgB;AACtB,UAAIC,KAAK,GAAG,EAAZ;;AACA,WAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,CAApB,EAAuBA,CAAC,EAAxB,EAA4B;AAC1B,YAAIA,CAAC,GAAGF,UAAR,EAAoB;AAClBC,UAAAA,KAAK,CAACE,IAAN,eAAW;AAAG,YAAA,GAAG,EAAED,CAAR;AAAW,YAAA,SAAS,EAAC,gBAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAAX;AACD,SAFD,MAEO;AACLD,UAAAA,KAAK,CAACE,IAAN,eAAW;AAAG,YAAA,GAAG,EAAED,CAAR;AAAW,YAAA,SAAS,EAAC,gBAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAAX;AACD;AACF;;AACD,aAAOD,KAAP;AACD,KApBoC;;AAAA,SAsBrCG,WAtBqC,GAsBvB,MAAM;AAClB,WAAKC,QAAL,CAAc;AAAEZ,QAAAA,IAAI,EAAE;AAAR,OAAd;AAEA,UAAIa,OAAO,GAAG,EAAd,CAHkB,CAKlB;;AACA,UAAI,KAAKd,KAAL,CAAWE,IAAX,KAAoB,GAAxB,EAA6BY,OAAO,CAACZ,IAAR,GAAe,KAAKF,KAAL,CAAWE,IAA1B;AAE7B,UAAI,KAAKF,KAAL,CAAWG,IAAX,KAAoB,GAAxB,EAA6BW,OAAO,CAACX,IAAR,GAAe,KAAKH,KAAL,CAAWG,IAA1B,CARX,CAUlB;;AACA,UAAI,KAAKH,KAAL,CAAWI,SAAf,EAA0B;AACxB,YAAIW,SAAS,GAAG,KAAKC,KAAL,CAAWC,IAAX,CAAgBC,IAAhB,CAAqB,CAArB,EAAwBf,IAAxB,CAA6BgB,OAA7B,CAAqC,SAArC,EAAgD,EAAhD,CAAhB;AACA,YAAIC,IAAI,GAAG,KAAKpB,KAAL,CAAWI,SAAtB;AACA,YAAIiB,QAAQ,GAAG,IAAIC,QAAJ,EAAf;AACAD,QAAAA,QAAQ,CAACE,MAAT,CAAgB,MAAhB,EAAwBH,IAAxB;AAEAN,QAAAA,OAAO,CAACU,SAAR,GAAqB,GAAET,SAAU,IAAGK,IAAI,CAACjB,IAAK,EAA9C;AACAW,QAAAA,OAAO,CAACU,SAAR,GAAoBV,OAAO,CAACU,SAAR,CAAkBL,OAAlB,CAA0B,SAA1B,EAAqC,EAArC,CAApB;AACAM,QAAAA,OAAO,CAACC,GAAR,CAAYZ,OAAZ,EARwB,CAUxB;;AACAa,QAAAA,KAAK,CAAE,gCAA+BZ,SAAU,EAA3C,EAA8C;AACjDa,UAAAA,IAAI,EAAEP,QAD2C;AAEjDQ,UAAAA,MAAM,EAAE;AAFyC,SAA9C,CAAL,CAIGC,IAJH,CAISC,GAAD,IAAS;AACb,iBAAOA,GAAG,CAACC,IAAJ,EAAP;AACD,SANH,EAOGF,IAPH,CAOSC,GAAD,IAAS;AACbN,UAAAA,OAAO,CAACC,GAAR,CAAYK,GAAZ;AACD,SATH;AAUD;;AAED,UAAIE,MAAM,CAACC,IAAP,CAAYpB,OAAZ,EAAqBqB,MAArB,KAAgC,CAApC,EAAuC,KAAKnB,KAAL,CAAWoB,UAAX,CAAsBtB,OAAtB;AACxC,KAzDoC;;AAAA,SA2DrCuB,cA3DqC,GA2DpB,MAAM;AACrB,WAAKxB,QAAL,CACGyB,SAAD,IAAe;AACb,eAAO;AAAEjC,UAAAA,SAAS,EAAE;AAAb,SAAP;AACD,OAHH,EAIE,MAAM;AACJkC,QAAAA,QAAQ,CAACC,cAAT,CAAwB,OAAxB,EAAiCC,KAAjC;AACD,OANH;AAQD,KApEoC;;AAAA,SAsErCnC,UAtEqC,GAsEvBoC,EAAD,IAAQ;AACnB,UAAItB,IAAI,GAAGmB,QAAQ,CAACC,cAAT,CAAwB,OAAxB,EAAiCG,KAAjC,CAAuC,CAAvC,CAAX;AACA,WAAK9B,QAAL,CAAc;AAAET,QAAAA,SAAS,EAAEgB;AAAb,OAAd;AACA,UAAIwB,MAAM,GAAG,IAAIC,UAAJ,EAAb;;AAEAD,MAAAA,MAAM,CAACE,SAAP,GAAoBC,CAAD,IAAO;AACxB,aAAKlC,QAAL,CAAc;AAAEP,UAAAA,UAAU,EAAEyC,CAAC,CAACC,MAAF,CAASC;AAAvB,SAAd;AACD,OAFD;;AAIAL,MAAAA,MAAM,CAACM,aAAP,CAAqB9B,IAArB;AACD,KAhFoC;AAAA;;AAkFrC+B,EAAAA,MAAM,GAAG;AACP,wBACE,oBAAC,KAAD,CAAO,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AACE,MAAA,SAAS,EAAC,aADZ;AAEE,MAAA,KAAK,EAAE;AAAEC,QAAAA,OAAO,EAAE,MAAX;AAAmBC,QAAAA,cAAc,EAAE;AAAnC,OAFT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAJF,EAKG,CAAC,KAAKrC,KAAL,CAAWsC,YAAZ,iBACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,CAAC,KAAKtD,KAAL,CAAWC,IAAZ,gBACC;AAAK,MAAA,EAAE,EAAC,MAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AACE,MAAA,KAAK,EAAE;AAAEsD,QAAAA,MAAM,EAAE;AAAV,OADT;AAEE,MAAA,SAAS,EAAC,mBAFZ;AAGE,MAAA,OAAO,EAAE,MAAM;AACb,aAAK1C,QAAL,CAAc;AAAEZ,UAAAA,IAAI,EAAE;AAAR,SAAd;AACD,OALH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CADD,gBAWC;AACE,MAAA,EAAE,EAAC,MADL;AAEE,MAAA,OAAO,EAAE,KAAKW,WAFhB;AAGE,MAAA,SAAS,EAAC,wBAHZ;AAIE,MAAA,KAAK,EAAE;AAAE4C,QAAAA,IAAI,EAAE;AAAR,OAJT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAZJ,CANJ,CADF,eA+BE;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAEE;AAAK,MAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AACE,MAAA,EAAE,EAAC,OADL;AAEE,MAAA,IAAI,EAAC,MAFP;AAGE,MAAA,KAAK,EAAE;AAAEJ,QAAAA,OAAO,EAAE;AAAX,OAHT;AAIE,MAAA,QAAQ,EAAE,KAAK9C,UAJjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,eAOE;AAAK,MAAA,SAAS,EAAC,iDAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,KAAKN,KAAL,CAAWC,IAAX,iBACC;AACE,MAAA,SAAS,EAAC,2BADZ;AAEE,MAAA,OAAO,EAAE,KAAKoC,cAFhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFJ,EAOG,CAAC,KAAKrC,KAAL,CAAWK,SAAZ,IACC,CAAC,KAAKW,KAAL,CAAWC,IAAX,CAAgBC,IAAhB,CAAqB,CAArB,EAAwBM,SAD1B,iBAEG;AAAG,MAAA,SAAS,EAAC,oBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MATN,EAWG,CAAC,KAAKxB,KAAL,CAAWK,SAAZ,IAAyB,KAAKW,KAAL,CAAWC,IAAX,CAAgBC,IAAhB,CAAqB,CAArB,EAAwBM,SAAjD,iBACC;AAAK,MAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AACE,MAAA,GAAG,EAAG,iBAAgB,KAAKR,KAAL,CAAWC,IAAX,CAAgBC,IAAhB,CAAqB,CAArB,EAAwBM,SAAU,EAD1D;AAEE,MAAA,KAAK,EAAE;AAAEiC,QAAAA,KAAK,EAAE;AAAT,OAFT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CAZJ,EAmBG,KAAKzD,KAAL,CAAWK,SAAX,iBACC;AAAK,MAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AACE,MAAA,EAAE,EAAC,SADL;AAEE,MAAA,GAAG,EAAE,KAAKL,KAAL,CAAWM,UAFlB;AAGE,MAAA,KAAK,EAAE;AAAEmD,QAAAA,KAAK,EAAE;AAAT,OAHT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CApBJ,CAPF,eAoCE;AAAK,MAAA,SAAS,EAAC,yBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,wCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,KAAKzD,KAAL,CAAWC,IAAX,gBACC;AACE,MAAA,EAAE,EAAC,MADL;AAEE,MAAA,WAAW,EAAE,KAAKe,KAAL,CAAWC,IAAX,CAAgBC,IAAhB,CAAqB,CAArB,EAAwBf,IAFvC;AAGE,MAAA,QAAQ,EAAGuC,EAAD,IAAQ;AAAC,aAAK7B,QAAL,CAAc;AAACV,UAAAA,IAAI,EAAEuC,EAAE,CAACM,MAAH,CAAUU;AAAjB,SAAd;AAAuC,OAH5D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADD,GAOC,KAAK1C,KAAL,CAAWC,IAAX,CAAgBC,IAAhB,CAAqB,CAArB,EAAwBf,IAR5B,CADF,eAYE;AAAK,MAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,KAAKI,KAAL,CAAW,KAAKS,KAAL,CAAWC,IAAX,CAAgBC,IAAhB,CAAqB,CAArB,EAAwBT,KAAnC,CADH,CADF,CAZF,CApCF,CAFF,eA0DE;AAAK,MAAA,EAAE,EAAC,cAAR;AAAuB,MAAA,SAAS,EAAC,UAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAK,MAAA,SAAS,EAAC,4BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,eAEE;AAAK,MAAA,SAAS,EAAC,uCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,KAAKT,KAAL,CAAWC,IAAX,gBACC;AACE,MAAA,EAAE,EAAC,MADL;AAEE,MAAA,WAAW,EAAC,kBAFd;AAGE,MAAA,QAAQ,EAAGyC,EAAD,IACR,KAAK7B,QAAL,CAAc;AAAEX,QAAAA,IAAI,EAAEwC,EAAE,CAACM,MAAH,CAAUU;AAAlB,OAAd,CAJJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADD,GASC,KAAK1C,KAAL,CAAWC,IAAX,CAAgBC,IAAhB,CAAqB,CAArB,EAAwBhB,IAV5B,CAFF,CADF,CA1DF,CA/BF,CADF,CADF;AAiHD;;AApMoC;;AAuMvC,eAAeH,cAAf","sourcesContent":["import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nclass MyGroupProfile extends Component {\r\n  state = {\r\n    edit: false,\r\n    area: \"_\",\r\n    name: \"_\",\r\n    imageFile: null,\r\n    imgUpload: false,\r\n    imgPreview: null,\r\n  };\r\n\r\n  stars = (groupScore) => {\r\n    let score = [];\r\n    for (let s = 0; s < 5; s++) {\r\n      if (s < groupScore) {\r\n        score.push(<i key={s} className=\"fas fa-star sY\"></i>);\r\n      } else {\r\n        score.push(<i key={s} className=\"fas fa-star sG\"></i>);\r\n      }\r\n    }\r\n    return score;\r\n  };\r\n\r\n  saveProfile = () => {\r\n    this.setState({ edit: false });\r\n\r\n    let payload = {};\r\n\r\n    // Append area if has value\r\n    if (this.state.area !== \"_\") payload.area = this.state.area;\r\n\r\n    if (this.state.name !== \"_\") payload.name = this.state.name;\r\n\r\n    // Append file name and user id to payload\r\n    if (this.state.imageFile) {\r\n      let groupName = this.props.data.Clan[0].name.replace(/\\s|\"|'/g, \"\");\r\n      let file = this.state.imageFile;\r\n      let formData = new FormData();\r\n      formData.append(\"file\", file);\r\n\r\n      payload.image_url = `${groupName}@${file.name}`;\r\n      payload.image_url = payload.image_url.replace(/\\s|\"|'/g, \"\");\r\n      console.log(payload);\r\n\r\n      // Send image\r\n      fetch(`/imageUpload/group?groupname=${groupName}`, {\r\n        body: formData,\r\n        method: \"POST\",\r\n      })\r\n        .then((res) => {\r\n          return res.json();\r\n        })\r\n        .then((res) => {\r\n          console.log(res);\r\n        });\r\n    }\r\n\r\n    if (Object.keys(payload).length !== 0) this.props.updateClan(payload);\r\n  };\r\n\r\n  groupImgUpload = () => {\r\n    this.setState(\r\n      (prevState) => {\r\n        return { imgUpload: true };\r\n      },\r\n      () => {\r\n        document.getElementById(\"image\").click();\r\n      }\r\n    );\r\n  };\r\n\r\n  imgPreview = (ev) => {\r\n    let file = document.getElementById(\"image\").files[0];\r\n    this.setState({ imageFile: file });\r\n    let Reader = new FileReader();\r\n\r\n    Reader.onloadend = (e) => {\r\n      this.setState({ imgPreview: e.target.result });\r\n    };\r\n\r\n    Reader.readAsDataURL(file);\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <React.Fragment>\r\n        <div className=\"card bg-light\">\r\n          <div\r\n            className=\"card-header\"\r\n            style={{ display: \"flex\", justifyContent: \"space-between\" }}\r\n          >\r\n            <div>Group Page</div>\r\n            {!this.props.userIsMember && (\r\n              <div>\r\n                {!this.state.edit ? (\r\n                  <div id=\"edit\">\r\n                    <i\r\n                      style={{ cursor: \"pointer\" }}\r\n                      className=\"fas fa-pencil-alt\"\r\n                      onClick={() => {\r\n                        this.setState({ edit: true });\r\n                      }}\r\n                    ></i>\r\n                  </div>\r\n                ) : (\r\n                  <button\r\n                    id=\"save\"\r\n                    onClick={this.saveProfile}\r\n                    className=\"btn btn-sm btn-success\"\r\n                    style={{ font: \"small-caption\" }}\r\n                  >\r\n                    save\r\n                  </button>\r\n                )}\r\n              </div>\r\n            )}\r\n          </div>\r\n          <div className=\"card-body\">\r\n            {/* ROW */}\r\n            <div className=\"row\">\r\n              <input\r\n                id=\"image\"\r\n                type=\"file\"\r\n                style={{ display: \"none\" }}\r\n                onChange={this.imgPreview}\r\n              ></input>\r\n              <div className=\"col-6 text-center d-flex justify-content-center\">\r\n                {this.state.edit && (\r\n                  <i\r\n                    className=\"fas fa-camera-retro fa-3x\"\r\n                    onClick={this.groupImgUpload}\r\n                  ></i>\r\n                )}\r\n                {!this.state.imgUpload &&\r\n                  !this.props.data.Clan[0].image_url && (\r\n                    <i className=\"fas fa-users fa-7x\"></i>\r\n                  )}\r\n                {!this.state.imgUpload && this.props.data.Clan[0].image_url && (\r\n                  <div className=\"img-wrap-lg\">\r\n                    <img\r\n                      src={`/Group_Images/${this.props.data.Clan[0].image_url}`}\r\n                      style={{ width: \"inherit\" }}\r\n                    ></img>\r\n                  </div>\r\n                )}\r\n                {this.state.imgUpload && (\r\n                  <div className=\"img-wrap-lg\">\r\n                    <img\r\n                      id=\"preview\"\r\n                      src={this.state.imgPreview}\r\n                      style={{ width: \"inherit\" }}\r\n                    ></img>\r\n                  </div>\r\n                )}\r\n              </div>\r\n              <div className=\"col-6 align-self-center\">\r\n                <div className=\"row justify-content-center text-center\">\r\n                  {this.state.edit ? (\r\n                    <input\r\n                      id=\"name\"\r\n                      placeholder={this.props.data.Clan[0].name}\r\n                      onChange={(ev) => {this.setState({name: ev.target.value})}}\r\n                    ></input>\r\n                  ) : (\r\n                    this.props.data.Clan[0].name\r\n                  )}\r\n                </div>\r\n                <div className=\"row\">\r\n                  <div className=\"col text-center\">\r\n                    {this.stars(this.props.data.Clan[0].score)}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            {/* ROW */}\r\n            <div id=\"user-details\" className=\"row mt-4\">\r\n              <div className=\"col-6\">\r\n                <div className=\"row justify-content-center\">Area</div>\r\n                <div className=\"row justify-content-center text-muted\">\r\n                  {this.state.edit ? (\r\n                    <input\r\n                      id=\"area\"\r\n                      placeholder=\"general location\"\r\n                      onChange={(ev) =>\r\n                        this.setState({ area: ev.target.value })\r\n                      }\r\n                    ></input>\r\n                  ) : (\r\n                    this.props.data.Clan[0].area\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nexport default MyGroupProfile;\r\n"]},"metadata":{},"sourceType":"module"}