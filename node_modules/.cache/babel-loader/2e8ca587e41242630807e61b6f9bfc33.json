{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\xmark\\\\Desktop\\\\Code\\\\Servers\\\\Qumoc\\\\food-commune\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\xmark\\\\Desktop\\\\Code\\\\Servers\\\\Qumoc\\\\food-commune\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\xmark\\\\Desktop\\\\Code\\\\Servers\\\\Qumoc\\\\food-commune\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\xmark\\\\Desktop\\\\Code\\\\Servers\\\\Qumoc\\\\food-commune\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import SearchBar from'./SearchBar';import GroupList from'./GroupList';import CreateGroup from'./CreateGroup';var GroupsView=/*#__PURE__*/function(_Component){_inherits(GroupsView,_Component);var _super=_createSuper(GroupsView);function GroupsView(){var _this;_classCallCheck(this,GroupsView);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={searchInput:\"\",showAddGroup:false};_this.viewData=function(){fetchData(_this.state.token,_this.state.user.id).then(function(resolved){console.log(resolved);_this.setState({data:resolved});}).catch(function(err){console.log(err);});};_this.setToken=function(token){_this.setState({token:token});};_this.setUser=function(user){_this.setState({user:user});};_this.onSearch=function(ev){var value=ev.target.value;_this.setState({searchInput:value});};_this.addGroup=function(toggle){_this.setState({showAddGroup:_this.state.showAddGroup?false:true});};_this.newGroup=function(payload){payload.user_id=_this.state.user.id;insertGroup(_this.state.token,payload).then(function(resolved){console.log(resolved);// this.setState((prevState) => {\n//     let Deals = [...prevState.data.Deals];\n//     let deal = Deals.findIndex(obj => { return obj.id === payload.id });\n//     Deals[deal] = payload;\n//     let data = { ...prevState.data, Deals: Deals }  \n//     return { data: data };\n// }, () => {\n//         this.setState({ showAddDeal: false });\n// })\n}).catch(function(err){console.log(err);});};return _this;}_createClass(GroupsView,[{key:\"componentDidMount\",value:function componentDidMount(){var params=new URLSearchParams(window.location.search);var option=params.get(\"option\");if(option)this.setState({showAddGroup:true});}/****************************************************\r\n   * Component Data\r\n   */},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{id:\"nav-view\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"row\",style:{backgroundColor:\"white\"}},this.state.showAddGroup&&/*#__PURE__*/React.createElement(CreateGroup,{newGroup:this.newGroup,addGroup:this.addGroup}),/*#__PURE__*/React.createElement(\"div\",{id:\"group-view\",className:\"col-12\"},/*#__PURE__*/React.createElement(SearchBar,{onSearch:this.onSearch,placeHolderVal:\"Search for group or area...\"}),/*#__PURE__*/React.createElement(GroupList,{searchValue:this.state.searchInput,data:this.state.data,addGroup:this.addGroup}))));}}]);return GroupsView;}(Component);export default GroupsView;function fetchData(token,userid){console.log(\"fetching data......\",token,userid);return new Promise(function(resolve,reject){var request={userId:userid};var options={method:\"POST\",headers:new Headers({Authorization:\"Bearer \"+token,\"Content-Type\":\"application/json\"}),body:JSON.stringify({entity:request})};fetch(\"/foodcommune/accounts/groups\",options).then(function(res){return res.json();}).then(function(res){if(!res.success){// Return to account detail and display error message\nresolve(res);}else{reject(\"Unable to retrieve data\");}});});}function insertGroup(token,payload){console.log(\"fetching data......\");return new Promise(function(resolve,reject){var options={method:\"POST\",headers:new Headers({Authorization:\"Bearer \"+token,\"Content-Type\":\"application/json\"}),body:JSON.stringify({entity:payload})};fetch(\"/foodcommune/accounts/createGroup\",options).then(function(res){return res.json();}).then(function(res){console.log(res);if(res.success){// Return to account detail and display error message\nresolve(res);}else{reject(\"Unable to retrieve data\");}});});}","map":{"version":3,"sources":["C:/Users/xmark/Desktop/Code/Servers/Qumoc/food-commune/src/components/GroupsView.jsx"],"names":["React","Component","SearchBar","GroupList","CreateGroup","GroupsView","state","searchInput","showAddGroup","viewData","fetchData","token","user","id","then","resolved","console","log","setState","data","catch","err","setToken","setUser","onSearch","ev","value","target","addGroup","toggle","newGroup","payload","user_id","insertGroup","params","URLSearchParams","window","location","search","option","get","backgroundColor","userid","Promise","resolve","reject","request","userId","options","method","headers","Headers","Authorization","body","JSON","stringify","entity","fetch","res","json","success"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport SearchBar from './SearchBar';\r\nimport GroupList from './GroupList';\r\nimport CreateGroup from './CreateGroup';\r\n\r\n\r\nclass GroupsView extends Component {\r\n  state = {\r\n    searchInput: \"\",\r\n    showAddGroup: false\r\n    };\r\n    \r\n  componentDidMount() {\r\n    let params = new URLSearchParams(window.location.search);\r\n    let option = params.get(\"option\");\r\n\r\n    if (option) this.setState({ showAddGroup: true });\r\n}\r\n  \r\n  /****************************************************\r\n   * Component Data\r\n   */\r\n  viewData = () => {\r\n    fetchData(this.state.token, this.state.user.id)\r\n      .then(resolved => {\r\n        console.log(resolved);\r\n        this.setState({ data: resolved });\r\n      })\r\n      .catch(err => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  setToken = token => {\r\n    this.setState({ token: token });\r\n  };\r\n\r\n  setUser = user => {\r\n    this.setState({ user: user });\r\n  };\r\n  /*************************************************** */\r\n  onSearch = ev => {\r\n    let value = ev.target.value;\r\n\r\n    this.setState({ searchInput: value });\r\n  };\r\n\r\n  addGroup = (toggle) => {\r\n    this.setState({ showAddGroup: this.state.showAddGroup ? false : true });\r\n  }\r\n\r\n  newGroup = (payload) => {\r\n    payload.user_id = this.state.user.id;\r\n    \r\n    insertGroup(this.state.token, payload)\r\n      .then(resolved => {\r\n          console.log(resolved);\r\n          // this.setState((prevState) => {\r\n          //     let Deals = [...prevState.data.Deals];\r\n          //     let deal = Deals.findIndex(obj => { return obj.id === payload.id });\r\n          //     Deals[deal] = payload;\r\n\r\n          //     let data = { ...prevState.data, Deals: Deals }  \r\n          //     return { data: data };\r\n          // }, () => {\r\n          //         this.setState({ showAddDeal: false });\r\n          // })\r\n      })\r\n      .catch(err => {\r\n        console.log(err);\r\n      });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      \r\n        <React.Fragment>\r\n          {/* <!-- Navigation --> */}\r\n          <div id=\"nav-view\">\r\n            {/* <NavView\r\n              setToken={this.setToken}\r\n              setUser={this.setUser}\r\n              viewData={this.viewData}\r\n            /> */}\r\n          </div>\r\n\r\n          {/* <!-- Main Content --> */}\r\n        <div className=\"row\" style={{ backgroundColor: \"white\" }}>\r\n          {this.state.showAddGroup && <CreateGroup newGroup={this.newGroup} addGroup={this.addGroup}/>}\r\n            <div id=\"group-view\" className=\"col-12\">\r\n              <SearchBar\r\n                onSearch={this.onSearch}\r\n                placeHolderVal={\"Search for group or area...\"}\r\n              />\r\n              <GroupList\r\n                searchValue={this.state.searchInput}\r\n              data={this.state.data}\r\n              addGroup={this.addGroup}\r\n              />\r\n            </div>\r\n          </div>\r\n        </React.Fragment>\r\n      \r\n    );\r\n  }\r\n}\r\n\r\nexport default GroupsView;\r\n\r\nfunction fetchData(token, userid) {\r\n  console.log(\"fetching data......\", token, userid);\r\n  return new Promise((resolve, reject) => {\r\n    let request = { userId: userid };\r\n    let options = {\r\n      method: \"POST\",\r\n      headers: new Headers({\r\n        Authorization: \"Bearer \" + token,\r\n        \"Content-Type\": \"application/json\"\r\n      }),\r\n      body: JSON.stringify({\r\n        entity: request\r\n      })\r\n    };\r\n    fetch(\"/foodcommune/accounts/groups\", options)\r\n      .then(res => {\r\n        return res.json();\r\n      })\r\n      .then(res => {\r\n        if (!res.success) {\r\n          // Return to account detail and display error message\r\n          resolve(res);\r\n        } else {\r\n          reject(\"Unable to retrieve data\");\r\n        }\r\n      });\r\n  });\r\n}\r\n\r\nfunction insertGroup(token, payload) {\r\n  console.log(\"fetching data......\");\r\n  return new Promise((resolve, reject) => {\r\n    let options = {\r\n      method: \"POST\",\r\n      headers: new Headers({\r\n        Authorization: \"Bearer \" + token,\r\n        \"Content-Type\": \"application/json\"\r\n      }),\r\n      body: JSON.stringify({\r\n        entity: payload\r\n      })\r\n    };\r\n    fetch(\"/foodcommune/accounts/createGroup\", options)\r\n      .then(res => {\r\n        return res.json();\r\n      })\r\n      .then(res => {\r\n        console.log(res);\r\n        if (res.success) {\r\n          // Return to account detail and display error message\r\n          resolve(res);\r\n        } else {\r\n          reject(\"Unable to retrieve data\");\r\n        }\r\n      });\r\n  });\r\n}"]},"metadata":{},"sourceType":"module"}