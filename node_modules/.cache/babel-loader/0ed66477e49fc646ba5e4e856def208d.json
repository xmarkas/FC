{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\xmark\\\\Desktop\\\\Code\\\\Servers\\\\Qumoc\\\\food-commune\\\\src\\\\components\\\\MyGroupProfile.jsx\";\nimport React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\n\nclass MyGroupProfile extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      edit: false,\n      area: \"_\",\n      imageFile: null,\n      imgUpload: false,\n      imgPreview: null\n    };\n\n    this.stars = groupScore => {\n      let score = [];\n\n      for (let s = 0; s < 5; s++) {\n        if (s < groupScore) {\n          score.push( /*#__PURE__*/React.createElement(\"i\", {\n            key: s,\n            className: \"fas fa-star sY\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 17,\n              columnNumber: 20\n            }\n          }));\n        } else {\n          score.push( /*#__PURE__*/React.createElement(\"i\", {\n            key: s,\n            className: \"fas fa-star sG\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 19,\n              columnNumber: 20\n            }\n          }));\n        }\n      }\n\n      return score;\n    };\n\n    this.saveProfile = () => {\n      this.setState({\n        edit: false\n      });\n      let payload = {}; // Append area if has value\n\n      if (this.state.area !== \"_\") payload.area = this.state.area; // Append file name and user id to payload\n\n      if (this.state.imageFile) {\n        let groupName = this.props.data.Clan[0].name.replace(/\\s|\"|'/g, \"\");\n        let file = this.state.imageFile;\n        let formData = new FormData();\n        formData.append(\"file\", file);\n        payload.image_url = `${groupName}@${file.name}`;\n        payload.image_url = payload.image_url.replace(/\\s|\"|'/g, \"\");\n        console.log(payload); // Send image\n\n        fetch(`/foodcommune/imageUpload/group?groupname=${groupName}`, {\n          body: formData,\n          method: \"POST\"\n        }).then(res => {\n          return res.json();\n        }).then(res => {\n          console.log(res);\n        });\n      }\n\n      if (Object.keys(payload).length !== 0) this.props.updateClan(payload);\n    };\n\n    this.groupImgUpload = () => {\n      this.setState(prevState => {\n        return {\n          imgUpload: true\n        };\n      }, () => {\n        document.getElementById('image').click();\n      });\n    };\n\n    this.imgPreview = ev => {\n      let file = document.getElementById(\"image\").files[0];\n      this.setState({\n        imageFile: file\n      });\n      let Reader = new FileReader();\n\n      Reader.onloadend = e => {\n        this.setState({\n          imgPreview: e.target.result\n        });\n      };\n\n      Reader.readAsDataURL(file);\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(React.Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card bg-light\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-header\",\n      style: {\n        display: \"flex\",\n        justifyContent: \"space-between\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 13\n      }\n    }, \"Group Page\"), /*#__PURE__*/React.createElement(Link, {\n      to: \"/foodcommune/groups\",\n      className: \"btn btn-sm btn-primary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 13\n      }\n    }, \"groups\"), !this.props.userIsMember && /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 15\n      }\n    }, !this.state.edit ? /*#__PURE__*/React.createElement(\"div\", {\n      id: \"edit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      style: {\n        cursor: \"pointer\"\n      },\n      className: \"fas fa-pencil-alt\",\n      onClick: () => {\n        this.setState({\n          edit: true\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 21\n      }\n    })) : /*#__PURE__*/React.createElement(\"button\", {\n      id: \"save\",\n      onClick: this.saveProfile,\n      className: \"btn btn-sm btn-success\",\n      style: {\n        font: \"small-caption\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 19\n      }\n    }, \"save\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      id: \"image\",\n      type: \"file\",\n      style: {\n        display: \"none\"\n      },\n      onChange: this.imgPreview,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-6 text-center d-flex justify-content-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 15\n      }\n    }, this.state.edit && /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fas fa-camera-retro fa-3x\",\n      onClick: this.groupImgUpload,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 19\n      }\n    }), !this.state.imgUpload && !this.props.data.Clan[0].image_url && /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fas fa-users fa-7x\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 21\n      }\n    }), !this.state.imgUpload && this.props.data.Clan[0].image_url && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"img-wrap-lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: `./Uploads/Group_Images/${this.props.data.Clan[0].image_url}`,\n      style: {\n        width: \"inherit\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 21\n      }\n    })), this.state.imgUpload && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"img-wrap-lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      id: \"preview\",\n      src: this.state.imgPreview,\n      style: {\n        width: \"inherit\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 21\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-6 align-self-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row justify-content-center text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 17\n      }\n    }, this.props.data.Clan[0].name), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 19\n      }\n    }, this.stars(this.props.data.Clan[0].score))))), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"user-details\",\n      className: \"row mt-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row justify-content-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 17\n      }\n    }, \"Area\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row justify-content-center text-muted\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 17\n      }\n    }, this.state.edit ? /*#__PURE__*/React.createElement(\"input\", {\n      id: \"area\",\n      placeholder: \"general location\",\n      onChange: ev => this.setState({\n        area: ev.target.value\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 21\n      }\n    }) : this.props.data.Clan[0].area))))));\n  }\n\n}\n\nexport default MyGroupProfile;","map":{"version":3,"sources":["C:/Users/xmark/Desktop/Code/Servers/Qumoc/food-commune/src/components/MyGroupProfile.jsx"],"names":["React","Component","Link","MyGroupProfile","state","edit","area","imageFile","imgUpload","imgPreview","stars","groupScore","score","s","push","saveProfile","setState","payload","groupName","props","data","Clan","name","replace","file","formData","FormData","append","image_url","console","log","fetch","body","method","then","res","json","Object","keys","length","updateClan","groupImgUpload","prevState","document","getElementById","click","ev","files","Reader","FileReader","onloadend","e","target","result","readAsDataURL","render","display","justifyContent","userIsMember","cursor","font","width","value"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nclass MyGroupProfile extends Component {\r\n  state = {\r\n    edit: false,\r\n    area: \"_\",\r\n    imageFile: null,\r\n    imgUpload: false,\r\n    imgPreview: null\r\n  };\r\n\r\n  stars = groupScore => {\r\n    let score = [];\r\n    for (let s = 0; s < 5; s++) {\r\n      if (s < groupScore) {\r\n        score.push(<i key={s} className=\"fas fa-star sY\"></i>);\r\n      } else {\r\n        score.push(<i key={s} className=\"fas fa-star sG\"></i>);\r\n      }\r\n    }\r\n    return score;\r\n  };\r\n\r\n  saveProfile = () => {\r\n    this.setState({ edit: false });\r\n\r\n    let payload = {};\r\n\r\n    // Append area if has value\r\n    if (this.state.area !== \"_\") payload.area = this.state.area;\r\n\r\n    // Append file name and user id to payload\r\n    if (this.state.imageFile) {\r\n      let groupName = this.props.data.Clan[0].name.replace(/\\s|\"|'/g, \"\");\r\n      let file = this.state.imageFile;\r\n      let formData = new FormData();\r\n      formData.append(\"file\", file);\r\n\r\n      payload.image_url = `${groupName}@${file.name}`;\r\n      payload.image_url = payload.image_url.replace(/\\s|\"|'/g, \"\");\r\n      console.log(payload);\r\n\r\n      // Send image\r\n      fetch(`/foodcommune/imageUpload/group?groupname=${groupName}`, {\r\n        body: formData,\r\n        method: \"POST\"\r\n      })\r\n        .then(res => {\r\n          return res.json();\r\n        })\r\n        .then(res => {\r\n          console.log(res);\r\n        });\r\n    }\r\n    \r\n    if (Object.keys(payload).length !== 0) this.props.updateClan(payload);\r\n  };\r\n\r\n  groupImgUpload = () => {\r\n    this.setState(\r\n      prevState => {\r\n        return { imgUpload: true };\r\n      },\r\n      () => {\r\n        document.getElementById('image').click();\r\n      }\r\n    );\r\n  };\r\n\r\n  imgPreview = ev => {\r\n    let file = document.getElementById(\"image\").files[0];\r\n    this.setState({ imageFile: file });\r\n    let Reader = new FileReader();\r\n\r\n    Reader.onloadend = (e) => {\r\n      this.setState({imgPreview: e.target.result})\r\n    };\r\n\r\n    Reader.readAsDataURL(file);\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <React.Fragment>\r\n        <div className=\"card bg-light\">\r\n          <div\r\n            className=\"card-header\"\r\n            style={{ display: \"flex\", justifyContent: \"space-between\" }}\r\n          >\r\n            <div>Group Page</div>\r\n            <Link to=\"/foodcommune/groups\" className=\"btn btn-sm btn-primary\">groups</Link>\r\n            {/* <button\r\n              className=\"btn btn-sm btn-primary\"\r\n              onClick={() =>\r\n                (window.location.href = \"/foodcommune/groups.html\")\r\n              }\r\n            >\r\n              groups\r\n            </button> */}\r\n            {!this.props.userIsMember && (\r\n              <div>\r\n                {!this.state.edit ? (\r\n                  <div id=\"edit\">\r\n                    <i\r\n                    style={{cursor: \"pointer\"}}\r\n                      className=\"fas fa-pencil-alt\"\r\n                      onClick={() => {\r\n                        this.setState({ edit: true });\r\n                      }}\r\n                    ></i>\r\n                  </div>\r\n                ) : (\r\n                  <button\r\n                    id=\"save\"\r\n                    onClick={this.saveProfile}\r\n                    className=\"btn btn-sm btn-success\"\r\n                    style={{ font: \"small-caption\" }}\r\n                  >\r\n                    save\r\n                  </button>\r\n                )}\r\n              </div>\r\n            )}\r\n          </div>\r\n          <div className=\"card-body\">\r\n            {/* ROW */}\r\n            <div className=\"row\">\r\n              <input\r\n                id=\"image\"\r\n                type=\"file\"\r\n                style={{ display: \"none\" }}\r\n                onChange={this.imgPreview}\r\n              ></input>\r\n              <div className=\"col-6 text-center d-flex justify-content-center\">\r\n                {this.state.edit && (\r\n                  <i\r\n                    className=\"fas fa-camera-retro fa-3x\"\r\n                    onClick={this.groupImgUpload}\r\n                  ></i>\r\n                )}\r\n                {!this.state.imgUpload &&\r\n                  !this.props.data.Clan[0].image_url && (\r\n                    <i className=\"fas fa-users fa-7x\"></i>\r\n                  )}\r\n                {!this.state.imgUpload && this.props.data.Clan[0].image_url && (\r\n                  <div className=\"img-wrap-lg\">\r\n                    <img\r\n                      src={`./Uploads/Group_Images/${this.props.data.Clan[0].image_url}`}\r\n                      style={{ width: \"inherit\" }}\r\n                    ></img>\r\n                  </div>\r\n                )}\r\n                {this.state.imgUpload && (\r\n                  <div className=\"img-wrap-lg\">\r\n                    <img id=\"preview\" src={this.state.imgPreview} style={{ width: \"inherit\" }}></img>\r\n                  </div>\r\n                )}\r\n              </div>\r\n              <div className=\"col-6 align-self-center\">\r\n                <div className=\"row justify-content-center text-center\">\r\n                  {this.props.data.Clan[0].name}\r\n                </div>\r\n                <div className=\"row\">\r\n                  <div className=\"col text-center\">\r\n                    {this.stars(this.props.data.Clan[0].score)}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            {/* ROW */}\r\n            <div id=\"user-details\" className=\"row mt-4\">\r\n              <div className=\"col-6\">\r\n                <div className=\"row justify-content-center\">Area</div>\r\n                <div className=\"row justify-content-center text-muted\">\r\n                  {this.state.edit ? (\r\n                    <input\r\n                      id=\"area\"\r\n                      placeholder=\"general location\"\r\n                      onChange={ev => this.setState({ area: ev.target.value })}\r\n                    ></input>\r\n                  ) : (\r\n                    this.props.data.Clan[0].area\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nexport default MyGroupProfile;"]},"metadata":{},"sourceType":"module"}