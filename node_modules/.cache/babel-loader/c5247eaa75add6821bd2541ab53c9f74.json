{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _values = require('babel-runtime/core-js/object/values');\n\nvar _values2 = _interopRequireDefault(_values);\n\nvar _promise = require('babel-runtime/core-js/promise');\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nvar _extends2 = require('babel-runtime/helpers/extends');\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _regenerator = require('babel-runtime/regenerator');\n\nvar _regenerator2 = _interopRequireDefault(_regenerator);\n\nvar _asyncToGenerator2 = require('babel-runtime/helpers/asyncToGenerator');\n\nvar _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _configurationValidation = require('@okta/configuration-validation');\n\nvar _oktaAuthJs = require('@okta/okta-auth-js');\n\nvar _oktaAuthJs2 = _interopRequireDefault(_oktaAuthJs);\n\nvar _packageInfo = require('./packageInfo');\n\nvar _packageInfo2 = _interopRequireDefault(_packageInfo);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar AuthService = function () {\n  function AuthService(config) {\n    (0, _classCallCheck3.default)(this, AuthService);\n    var testing = {\n      // If the config is undefined, cast it to false\n      disableHttpsCheck: !!config.disableHttpsCheck\n    }; // normalize authJS config. In this SDK, we allow underscore on certain properties, but AuthJS consistently uses camel case.\n\n    var authConfig = (0, _configurationValidation.buildConfigObject)(config);\n    (0, _configurationValidation.assertIssuer)(authConfig.issuer, testing);\n    (0, _configurationValidation.assertClientId)(authConfig.clientId);\n    (0, _configurationValidation.assertRedirectUri)(authConfig.redirectUri); // Automatically enter login flow if session has expired or was ended outside the application\n    // The default behavior can be overriden by passing your own function via config: `config.onSessionExpired`\n\n    if (!authConfig.onSessionExpired) {\n      authConfig.onSessionExpired = this.login.bind(this);\n    }\n\n    this._oktaAuth = new _oktaAuthJs2.default(authConfig);\n    this._oktaAuth.userAgent = _packageInfo2.default.name + '/' + _packageInfo2.default.version + ' ' + this._oktaAuth.userAgent;\n    this._config = authConfig; // use normalized config\n\n    this._listeners = {};\n    this._pending = {}; // manage overlapping async calls \n\n    this.handleAuthentication = this.handleAuthentication.bind(this);\n    this.updateAuthState = this.updateAuthState.bind(this);\n    this.clearAuthState = this.clearAuthState.bind(this);\n    this.emitAuthState = this.emitAuthState.bind(this);\n    this.getAuthState = this.getAuthState.bind(this);\n    this.getUser = this.getUser.bind(this);\n    this.getIdToken = this.getIdToken.bind(this);\n    this.getAccessToken = this.getAccessToken.bind(this);\n    this.login = this.login.bind(this);\n    this.logout = this.logout.bind(this);\n    this._convertLogoutPathToOptions = this._convertLogoutPathToOptions.bind(this);\n    this.redirect = this.redirect.bind(this);\n    this.emit = this.emit.bind(this);\n    this.on = this.on.bind(this);\n    this._subscriberCount = 0;\n    this.clearAuthState();\n  }\n\n  (0, _createClass3.default)(AuthService, [{\n    key: 'getTokenManager',\n    value: function getTokenManager() {\n      return this._oktaAuth.tokenManager;\n    }\n  }, {\n    key: 'handleAuthentication',\n    value: function () {\n      var _ref = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee() {\n        var _ref2, tokens, authState, location;\n\n        return _regenerator2.default.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!this._pending.handleAuthentication) {\n                  _context.next = 2;\n                  break;\n                }\n\n                return _context.abrupt('return', null);\n\n              case 2:\n                _context.prev = 2;\n                this._pending.handleAuthentication = true;\n                _context.next = 6;\n                return this._oktaAuth.token.parseFromUrl();\n\n              case 6:\n                _ref2 = _context.sent;\n                tokens = _ref2.tokens;\n\n                if (tokens.idToken) {\n                  this._oktaAuth.tokenManager.add('idToken', tokens.idToken);\n                }\n\n                if (tokens.accessToken) {\n                  this._oktaAuth.tokenManager.add('accessToken', tokens.accessToken);\n                }\n\n                _context.next = 12;\n                return this.updateAuthState();\n\n              case 12:\n                authState = this.getAuthState();\n\n                if (authState.isAuthenticated) {\n                  location = this.getFromUri();\n                  window.location.assign(location);\n                }\n\n                this._pending.handleAuthentication = null;\n                _context.next = 21;\n                break;\n\n              case 17:\n                _context.prev = 17;\n                _context.t0 = _context['catch'](2);\n                this._pending.handleAuthentication = null;\n                this.emitAuthState({\n                  isAuthenticated: false,\n                  error: _context.t0,\n                  idToken: null,\n                  accessToken: null\n                });\n\n              case 21:\n                return _context.abrupt('return');\n\n              case 22:\n              case 'end':\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[2, 17]]);\n      }));\n\n      function handleAuthentication() {\n        return _ref.apply(this, arguments);\n      }\n\n      return handleAuthentication;\n    }()\n  }, {\n    key: 'clearAuthState',\n    value: function clearAuthState() {\n      var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      this.emitAuthState((0, _extends3.default)({}, AuthService.DEFAULT_STATE, state));\n      return;\n    }\n  }, {\n    key: 'emitAuthState',\n    value: function emitAuthState(state) {\n      this._authState = state;\n      this.emit('authStateChange', this.getAuthState());\n      return;\n    }\n  }, {\n    key: 'getAuthState',\n    value: function getAuthState() {\n      return this._authState;\n    }\n  }, {\n    key: 'updateAuthState',\n    value: function () {\n      var _ref3 = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee2() {\n        var _this = this;\n\n        var authStateUpdate, accessToken, idToken, isAuthenticated;\n        return _regenerator2.default.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                if (!this._pending.authStateUpdate) {\n                  _context2.next = 2;\n                  break;\n                }\n\n                return _context2.abrupt('return', this._pending.authStateUpdate.promise);\n\n              case 2:\n                // create a promise to return in case of multiple parallel requests\n                this._pending.authStateUpdate = {};\n                this._pending.authStateUpdate.promise = new _promise2.default(function (resolve) {\n                  // Promise can only resolve any error is in the resolve value\n                  // and uncaught exceptions make Front SDKs angry\n                  _this._pending.authStateUpdate.resolve = resolve;\n                }); // copy to return after emitAuthState has cleared the pending object\n\n                authStateUpdate = this._pending.authStateUpdate;\n                _context2.prev = 5;\n                _context2.next = 8;\n                return this.getAccessToken();\n\n              case 8:\n                accessToken = _context2.sent;\n                _context2.next = 11;\n                return this.getIdToken();\n\n              case 11:\n                idToken = _context2.sent;\n\n                if (!this._config.isAuthenticated) {\n                  _context2.next = 18;\n                  break;\n                }\n\n                _context2.next = 15;\n                return this._config.isAuthenticated();\n\n              case 15:\n                _context2.t0 = _context2.sent;\n                _context2.next = 19;\n                break;\n\n              case 18:\n                _context2.t0 = !!(accessToken || idToken);\n\n              case 19:\n                isAuthenticated = _context2.t0;\n                this._pending.authStateUpdate = null;\n                this.emitAuthState({\n                  isAuthenticated: isAuthenticated,\n                  idToken: idToken,\n                  accessToken: accessToken\n                });\n                _context2.next = 28;\n                break;\n\n              case 24:\n                _context2.prev = 24;\n                _context2.t1 = _context2['catch'](5);\n                this._pending.authStateUpdate = null;\n                this.emitAuthState({\n                  isAuthenticated: false,\n                  error: _context2.t1,\n                  idToken: null,\n                  accessToken: null\n                });\n\n              case 28:\n                authStateUpdate.resolve();\n                return _context2.abrupt('return', authStateUpdate.promise);\n\n              case 30:\n              case 'end':\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[5, 24]]);\n      }));\n\n      function updateAuthState() {\n        return _ref3.apply(this, arguments);\n      }\n\n      return updateAuthState;\n    }()\n  }, {\n    key: 'getUser',\n    value: function () {\n      var _ref4 = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee3() {\n        var accessToken, idToken;\n        return _regenerator2.default.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return this._oktaAuth.tokenManager.get('accessToken');\n\n              case 2:\n                accessToken = _context3.sent;\n                _context3.next = 5;\n                return this._oktaAuth.tokenManager.get('idToken');\n\n              case 5:\n                idToken = _context3.sent;\n\n                if (!(!accessToken || !idToken)) {\n                  _context3.next = 8;\n                  break;\n                }\n\n                return _context3.abrupt('return', idToken ? idToken.claims : undefined);\n\n              case 8:\n                return _context3.abrupt('return', this._oktaAuth.token.getUserInfo());\n\n              case 9:\n              case 'end':\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function getUser() {\n        return _ref4.apply(this, arguments);\n      }\n\n      return getUser;\n    }()\n  }, {\n    key: 'getIdToken',\n    value: function () {\n      var _ref5 = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee4() {\n        var idToken;\n        return _regenerator2.default.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.prev = 0;\n                _context4.next = 3;\n                return this._oktaAuth.tokenManager.get('idToken');\n\n              case 3:\n                idToken = _context4.sent;\n                return _context4.abrupt('return', idToken.idToken);\n\n              case 7:\n                _context4.prev = 7;\n                _context4.t0 = _context4['catch'](0);\n                return _context4.abrupt('return', undefined);\n\n              case 10:\n              case 'end':\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this, [[0, 7]]);\n      }));\n\n      function getIdToken() {\n        return _ref5.apply(this, arguments);\n      }\n\n      return getIdToken;\n    }()\n  }, {\n    key: 'getAccessToken',\n    value: function () {\n      var _ref6 = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee5() {\n        var accessToken;\n        return _regenerator2.default.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _context5.prev = 0;\n                _context5.next = 3;\n                return this._oktaAuth.tokenManager.get('accessToken');\n\n              case 3:\n                accessToken = _context5.sent;\n                return _context5.abrupt('return', accessToken.accessToken);\n\n              case 7:\n                _context5.prev = 7;\n                _context5.t0 = _context5['catch'](0);\n                return _context5.abrupt('return', undefined);\n\n              case 10:\n              case 'end':\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this, [[0, 7]]);\n      }));\n\n      function getAccessToken() {\n        return _ref6.apply(this, arguments);\n      }\n\n      return getAccessToken;\n    }()\n  }, {\n    key: 'login',\n    value: function () {\n      var _ref7 = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee6(fromUri, additionalParams) {\n        return _regenerator2.default.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                // Save the current url before redirect\n                this.setFromUri(fromUri); // will save current location if fromUri is undefined\n\n                if (!this._config.onAuthRequired) {\n                  _context6.next = 3;\n                  break;\n                }\n\n                return _context6.abrupt('return', this._config.onAuthRequired(this));\n\n              case 3:\n                return _context6.abrupt('return', this.redirect(additionalParams));\n\n              case 4:\n              case 'end':\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this);\n      }));\n\n      function login(_x2, _x3) {\n        return _ref7.apply(this, arguments);\n      }\n\n      return login;\n    }()\n  }, {\n    key: '_convertLogoutPathToOptions',\n    value: function _convertLogoutPathToOptions(redirectUri) {\n      if (typeof redirectUri !== 'string') {\n        return redirectUri;\n      } // If a relative path was passed, convert to absolute URI\n\n\n      if (redirectUri.charAt(0) === '/') {\n        redirectUri = window.location.origin + redirectUri;\n      }\n\n      return {\n        postLogoutRedirectUri: redirectUri\n      };\n    }\n  }, {\n    key: 'logout',\n    value: function () {\n      var _ref8 = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee7() {\n        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        return _regenerator2.default.wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                options = this._convertLogoutPathToOptions(options);\n                _context7.next = 3;\n                return this._oktaAuth.signOut(options);\n\n              case 3:\n                this.clearAuthState();\n\n              case 4:\n              case 'end':\n                return _context7.stop();\n            }\n          }\n        }, _callee7, this);\n      }));\n\n      function logout() {\n        return _ref8.apply(this, arguments);\n      }\n\n      return logout;\n    }()\n  }, {\n    key: 'redirect',\n    value: function () {\n      var _ref9 = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee8() {\n        var additionalParams = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        var params;\n        return _regenerator2.default.wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                // normalize config object\n                params = (0, _configurationValidation.buildConfigObject)(additionalParams); // set defaults\n\n                params.responseType = params.responseType || this._config.responseType || ['id_token', 'token'];\n                params.scopes = params.scopes || this._config.scopes || ['openid', 'email', 'profile'];\n                return _context8.abrupt('return', this._oktaAuth.token.getWithRedirect(params));\n\n              case 4:\n              case 'end':\n                return _context8.stop();\n            }\n          }\n        }, _callee8, this);\n      }));\n\n      function redirect() {\n        return _ref9.apply(this, arguments);\n      }\n\n      return redirect;\n    }()\n  }, {\n    key: 'setFromUri',\n    value: function setFromUri(fromUri) {\n      // Use current location if fromUri was not passed\n      fromUri = fromUri || window.location.href; // If a relative path was passed, convert to absolute URI\n\n      if (fromUri.charAt(0) === '/') {\n        fromUri = window.location.origin + fromUri;\n      }\n\n      localStorage.setItem('secureRouterReferrerPath', fromUri);\n    }\n  }, {\n    key: 'getFromUri',\n    value: function getFromUri() {\n      var referrerKey = 'secureRouterReferrerPath';\n      var location = localStorage.getItem(referrerKey) || window.location.origin;\n      localStorage.removeItem(referrerKey);\n      return location;\n    }\n  }, {\n    key: 'on',\n    value: function on(event, callback) {\n      var _this2 = this;\n\n      var subscriberId = this._subscriberCount++;\n      this._listeners[event] = this._listeners[event] || {};\n      this._listeners[event][subscriberId] = callback;\n      return function () {\n        delete _this2._listeners[event][subscriberId];\n      };\n    }\n  }, {\n    key: 'emit',\n    value: function emit(event, message) {\n      this._listeners[event] = this._listeners[event] || {};\n      (0, _values2.default)(this._listeners[event]).forEach(function (listener) {\n        return listener(message);\n      });\n    }\n  }]);\n  return AuthService;\n}();\n/*\n * Copyright (c) 2017-Present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n\n\nAuthService.DEFAULT_STATE = {\n  isPending: true,\n  isAuthenticated: null,\n  idToken: null,\n  accessToken: null\n};\nexports.default = AuthService;","map":{"version":3,"sources":["C:/Users/xmark/Desktop/Code/Servers/Qumoc/food-commune/node_modules/@okta/okta-react/dist/AuthService.js"],"names":["Object","defineProperty","exports","value","_values","require","_values2","_interopRequireDefault","_promise","_promise2","_extends2","_extends3","_regenerator","_regenerator2","_asyncToGenerator2","_asyncToGenerator3","_classCallCheck2","_classCallCheck3","_createClass2","_createClass3","_configurationValidation","_oktaAuthJs","_oktaAuthJs2","_packageInfo","_packageInfo2","obj","__esModule","default","AuthService","config","testing","disableHttpsCheck","authConfig","buildConfigObject","assertIssuer","issuer","assertClientId","clientId","assertRedirectUri","redirectUri","onSessionExpired","login","bind","_oktaAuth","userAgent","name","version","_config","_listeners","_pending","handleAuthentication","updateAuthState","clearAuthState","emitAuthState","getAuthState","getUser","getIdToken","getAccessToken","logout","_convertLogoutPathToOptions","redirect","emit","on","_subscriberCount","key","getTokenManager","tokenManager","_ref","mark","_callee","_ref2","tokens","authState","location","wrap","_callee$","_context","prev","next","abrupt","token","parseFromUrl","sent","idToken","add","accessToken","isAuthenticated","getFromUri","window","assign","t0","error","stop","apply","arguments","state","length","undefined","DEFAULT_STATE","_authState","_ref3","_callee2","_this","authStateUpdate","_callee2$","_context2","promise","resolve","t1","_ref4","_callee3","_callee3$","_context3","get","claims","getUserInfo","_ref5","_callee4","_callee4$","_context4","_ref6","_callee5","_callee5$","_context5","_ref7","_callee6","fromUri","additionalParams","_callee6$","_context6","setFromUri","onAuthRequired","_x2","_x3","charAt","origin","postLogoutRedirectUri","_ref8","_callee7","options","_callee7$","_context7","signOut","_ref9","_callee8","params","_callee8$","_context8","responseType","scopes","getWithRedirect","href","localStorage","setItem","referrerKey","getItem","removeItem","event","callback","_this2","subscriberId","message","forEach","listener","isPending"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _values = require('babel-runtime/core-js/object/values');\n\nvar _values2 = _interopRequireDefault(_values);\n\nvar _promise = require('babel-runtime/core-js/promise');\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nvar _extends2 = require('babel-runtime/helpers/extends');\n\nvar _extends3 = _interopRequireDefault(_extends2);\n\nvar _regenerator = require('babel-runtime/regenerator');\n\nvar _regenerator2 = _interopRequireDefault(_regenerator);\n\nvar _asyncToGenerator2 = require('babel-runtime/helpers/asyncToGenerator');\n\nvar _asyncToGenerator3 = _interopRequireDefault(_asyncToGenerator2);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _createClass2 = require('babel-runtime/helpers/createClass');\n\nvar _createClass3 = _interopRequireDefault(_createClass2);\n\nvar _configurationValidation = require('@okta/configuration-validation');\n\nvar _oktaAuthJs = require('@okta/okta-auth-js');\n\nvar _oktaAuthJs2 = _interopRequireDefault(_oktaAuthJs);\n\nvar _packageInfo = require('./packageInfo');\n\nvar _packageInfo2 = _interopRequireDefault(_packageInfo);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar AuthService = function () {\n  function AuthService(config) {\n    (0, _classCallCheck3.default)(this, AuthService);\n\n    var testing = {\n      // If the config is undefined, cast it to false\n      disableHttpsCheck: !!config.disableHttpsCheck\n    };\n\n    // normalize authJS config. In this SDK, we allow underscore on certain properties, but AuthJS consistently uses camel case.\n    var authConfig = (0, _configurationValidation.buildConfigObject)(config);\n    (0, _configurationValidation.assertIssuer)(authConfig.issuer, testing);\n    (0, _configurationValidation.assertClientId)(authConfig.clientId);\n    (0, _configurationValidation.assertRedirectUri)(authConfig.redirectUri);\n\n    // Automatically enter login flow if session has expired or was ended outside the application\n    // The default behavior can be overriden by passing your own function via config: `config.onSessionExpired`\n    if (!authConfig.onSessionExpired) {\n      authConfig.onSessionExpired = this.login.bind(this);\n    }\n\n    this._oktaAuth = new _oktaAuthJs2.default(authConfig);\n    this._oktaAuth.userAgent = _packageInfo2.default.name + '/' + _packageInfo2.default.version + ' ' + this._oktaAuth.userAgent;\n    this._config = authConfig; // use normalized config\n    this._listeners = {};\n    this._pending = {}; // manage overlapping async calls \n\n    this.handleAuthentication = this.handleAuthentication.bind(this);\n    this.updateAuthState = this.updateAuthState.bind(this);\n    this.clearAuthState = this.clearAuthState.bind(this);\n    this.emitAuthState = this.emitAuthState.bind(this);\n    this.getAuthState = this.getAuthState.bind(this);\n    this.getUser = this.getUser.bind(this);\n    this.getIdToken = this.getIdToken.bind(this);\n    this.getAccessToken = this.getAccessToken.bind(this);\n    this.login = this.login.bind(this);\n    this.logout = this.logout.bind(this);\n    this._convertLogoutPathToOptions = this._convertLogoutPathToOptions.bind(this);\n    this.redirect = this.redirect.bind(this);\n    this.emit = this.emit.bind(this);\n    this.on = this.on.bind(this);\n\n    this._subscriberCount = 0;\n\n    this.clearAuthState();\n  }\n\n  (0, _createClass3.default)(AuthService, [{\n    key: 'getTokenManager',\n    value: function getTokenManager() {\n      return this._oktaAuth.tokenManager;\n    }\n  }, {\n    key: 'handleAuthentication',\n    value: function () {\n      var _ref = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee() {\n        var _ref2, tokens, authState, location;\n\n        return _regenerator2.default.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!this._pending.handleAuthentication) {\n                  _context.next = 2;\n                  break;\n                }\n\n                return _context.abrupt('return', null);\n\n              case 2:\n                _context.prev = 2;\n\n                this._pending.handleAuthentication = true;\n                _context.next = 6;\n                return this._oktaAuth.token.parseFromUrl();\n\n              case 6:\n                _ref2 = _context.sent;\n                tokens = _ref2.tokens;\n\n\n                if (tokens.idToken) {\n                  this._oktaAuth.tokenManager.add('idToken', tokens.idToken);\n                }\n                if (tokens.accessToken) {\n                  this._oktaAuth.tokenManager.add('accessToken', tokens.accessToken);\n                }\n\n                _context.next = 12;\n                return this.updateAuthState();\n\n              case 12:\n                authState = this.getAuthState();\n\n                if (authState.isAuthenticated) {\n                  location = this.getFromUri();\n\n                  window.location.assign(location);\n                }\n                this._pending.handleAuthentication = null;\n                _context.next = 21;\n                break;\n\n              case 17:\n                _context.prev = 17;\n                _context.t0 = _context['catch'](2);\n\n                this._pending.handleAuthentication = null;\n                this.emitAuthState({\n                  isAuthenticated: false,\n                  error: _context.t0,\n                  idToken: null,\n                  accessToken: null\n                });\n\n              case 21:\n                return _context.abrupt('return');\n\n              case 22:\n              case 'end':\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[2, 17]]);\n      }));\n\n      function handleAuthentication() {\n        return _ref.apply(this, arguments);\n      }\n\n      return handleAuthentication;\n    }()\n  }, {\n    key: 'clearAuthState',\n    value: function clearAuthState() {\n      var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      this.emitAuthState((0, _extends3.default)({}, AuthService.DEFAULT_STATE, state));\n      return;\n    }\n  }, {\n    key: 'emitAuthState',\n    value: function emitAuthState(state) {\n      this._authState = state;\n      this.emit('authStateChange', this.getAuthState());\n      return;\n    }\n  }, {\n    key: 'getAuthState',\n    value: function getAuthState() {\n      return this._authState;\n    }\n  }, {\n    key: 'updateAuthState',\n    value: function () {\n      var _ref3 = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee2() {\n        var _this = this;\n\n        var authStateUpdate, accessToken, idToken, isAuthenticated;\n        return _regenerator2.default.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                if (!this._pending.authStateUpdate) {\n                  _context2.next = 2;\n                  break;\n                }\n\n                return _context2.abrupt('return', this._pending.authStateUpdate.promise);\n\n              case 2:\n\n                // create a promise to return in case of multiple parallel requests\n                this._pending.authStateUpdate = {};\n                this._pending.authStateUpdate.promise = new _promise2.default(function (resolve) {\n                  // Promise can only resolve any error is in the resolve value\n                  // and uncaught exceptions make Front SDKs angry\n                  _this._pending.authStateUpdate.resolve = resolve;\n                });\n                // copy to return after emitAuthState has cleared the pending object\n                authStateUpdate = this._pending.authStateUpdate;\n                _context2.prev = 5;\n                _context2.next = 8;\n                return this.getAccessToken();\n\n              case 8:\n                accessToken = _context2.sent;\n                _context2.next = 11;\n                return this.getIdToken();\n\n              case 11:\n                idToken = _context2.sent;\n\n                if (!this._config.isAuthenticated) {\n                  _context2.next = 18;\n                  break;\n                }\n\n                _context2.next = 15;\n                return this._config.isAuthenticated();\n\n              case 15:\n                _context2.t0 = _context2.sent;\n                _context2.next = 19;\n                break;\n\n              case 18:\n                _context2.t0 = !!(accessToken || idToken);\n\n              case 19:\n                isAuthenticated = _context2.t0;\n\n\n                this._pending.authStateUpdate = null;\n                this.emitAuthState({\n                  isAuthenticated: isAuthenticated,\n                  idToken: idToken,\n                  accessToken: accessToken\n                });\n                _context2.next = 28;\n                break;\n\n              case 24:\n                _context2.prev = 24;\n                _context2.t1 = _context2['catch'](5);\n\n                this._pending.authStateUpdate = null;\n                this.emitAuthState({\n                  isAuthenticated: false,\n                  error: _context2.t1,\n                  idToken: null,\n                  accessToken: null\n                });\n\n              case 28:\n                authStateUpdate.resolve();\n                return _context2.abrupt('return', authStateUpdate.promise);\n\n              case 30:\n              case 'end':\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[5, 24]]);\n      }));\n\n      function updateAuthState() {\n        return _ref3.apply(this, arguments);\n      }\n\n      return updateAuthState;\n    }()\n  }, {\n    key: 'getUser',\n    value: function () {\n      var _ref4 = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee3() {\n        var accessToken, idToken;\n        return _regenerator2.default.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return this._oktaAuth.tokenManager.get('accessToken');\n\n              case 2:\n                accessToken = _context3.sent;\n                _context3.next = 5;\n                return this._oktaAuth.tokenManager.get('idToken');\n\n              case 5:\n                idToken = _context3.sent;\n\n                if (!(!accessToken || !idToken)) {\n                  _context3.next = 8;\n                  break;\n                }\n\n                return _context3.abrupt('return', idToken ? idToken.claims : undefined);\n\n              case 8:\n                return _context3.abrupt('return', this._oktaAuth.token.getUserInfo());\n\n              case 9:\n              case 'end':\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function getUser() {\n        return _ref4.apply(this, arguments);\n      }\n\n      return getUser;\n    }()\n  }, {\n    key: 'getIdToken',\n    value: function () {\n      var _ref5 = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee4() {\n        var idToken;\n        return _regenerator2.default.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.prev = 0;\n                _context4.next = 3;\n                return this._oktaAuth.tokenManager.get('idToken');\n\n              case 3:\n                idToken = _context4.sent;\n                return _context4.abrupt('return', idToken.idToken);\n\n              case 7:\n                _context4.prev = 7;\n                _context4.t0 = _context4['catch'](0);\n                return _context4.abrupt('return', undefined);\n\n              case 10:\n              case 'end':\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this, [[0, 7]]);\n      }));\n\n      function getIdToken() {\n        return _ref5.apply(this, arguments);\n      }\n\n      return getIdToken;\n    }()\n  }, {\n    key: 'getAccessToken',\n    value: function () {\n      var _ref6 = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee5() {\n        var accessToken;\n        return _regenerator2.default.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _context5.prev = 0;\n                _context5.next = 3;\n                return this._oktaAuth.tokenManager.get('accessToken');\n\n              case 3:\n                accessToken = _context5.sent;\n                return _context5.abrupt('return', accessToken.accessToken);\n\n              case 7:\n                _context5.prev = 7;\n                _context5.t0 = _context5['catch'](0);\n                return _context5.abrupt('return', undefined);\n\n              case 10:\n              case 'end':\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this, [[0, 7]]);\n      }));\n\n      function getAccessToken() {\n        return _ref6.apply(this, arguments);\n      }\n\n      return getAccessToken;\n    }()\n  }, {\n    key: 'login',\n    value: function () {\n      var _ref7 = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee6(fromUri, additionalParams) {\n        return _regenerator2.default.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                // Save the current url before redirect\n                this.setFromUri(fromUri); // will save current location if fromUri is undefined\n\n                if (!this._config.onAuthRequired) {\n                  _context6.next = 3;\n                  break;\n                }\n\n                return _context6.abrupt('return', this._config.onAuthRequired(this));\n\n              case 3:\n                return _context6.abrupt('return', this.redirect(additionalParams));\n\n              case 4:\n              case 'end':\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this);\n      }));\n\n      function login(_x2, _x3) {\n        return _ref7.apply(this, arguments);\n      }\n\n      return login;\n    }()\n  }, {\n    key: '_convertLogoutPathToOptions',\n    value: function _convertLogoutPathToOptions(redirectUri) {\n      if (typeof redirectUri !== 'string') {\n        return redirectUri;\n      }\n      // If a relative path was passed, convert to absolute URI\n      if (redirectUri.charAt(0) === '/') {\n        redirectUri = window.location.origin + redirectUri;\n      }\n      return {\n        postLogoutRedirectUri: redirectUri\n      };\n    }\n  }, {\n    key: 'logout',\n    value: function () {\n      var _ref8 = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee7() {\n        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        return _regenerator2.default.wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                options = this._convertLogoutPathToOptions(options);\n                _context7.next = 3;\n                return this._oktaAuth.signOut(options);\n\n              case 3:\n                this.clearAuthState();\n\n              case 4:\n              case 'end':\n                return _context7.stop();\n            }\n          }\n        }, _callee7, this);\n      }));\n\n      function logout() {\n        return _ref8.apply(this, arguments);\n      }\n\n      return logout;\n    }()\n  }, {\n    key: 'redirect',\n    value: function () {\n      var _ref9 = (0, _asyncToGenerator3.default)( /*#__PURE__*/_regenerator2.default.mark(function _callee8() {\n        var additionalParams = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        var params;\n        return _regenerator2.default.wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                // normalize config object\n                params = (0, _configurationValidation.buildConfigObject)(additionalParams);\n\n                // set defaults\n\n                params.responseType = params.responseType || this._config.responseType || ['id_token', 'token'];\n\n                params.scopes = params.scopes || this._config.scopes || ['openid', 'email', 'profile'];\n\n                return _context8.abrupt('return', this._oktaAuth.token.getWithRedirect(params));\n\n              case 4:\n              case 'end':\n                return _context8.stop();\n            }\n          }\n        }, _callee8, this);\n      }));\n\n      function redirect() {\n        return _ref9.apply(this, arguments);\n      }\n\n      return redirect;\n    }()\n  }, {\n    key: 'setFromUri',\n    value: function setFromUri(fromUri) {\n      // Use current location if fromUri was not passed\n      fromUri = fromUri || window.location.href;\n      // If a relative path was passed, convert to absolute URI\n      if (fromUri.charAt(0) === '/') {\n        fromUri = window.location.origin + fromUri;\n      }\n      localStorage.setItem('secureRouterReferrerPath', fromUri);\n    }\n  }, {\n    key: 'getFromUri',\n    value: function getFromUri() {\n      var referrerKey = 'secureRouterReferrerPath';\n      var location = localStorage.getItem(referrerKey) || window.location.origin;\n      localStorage.removeItem(referrerKey);\n      return location;\n    }\n  }, {\n    key: 'on',\n    value: function on(event, callback) {\n      var _this2 = this;\n\n      var subscriberId = this._subscriberCount++;\n      this._listeners[event] = this._listeners[event] || {};\n      this._listeners[event][subscriberId] = callback;\n      return function () {\n        delete _this2._listeners[event][subscriberId];\n      };\n    }\n  }, {\n    key: 'emit',\n    value: function emit(event, message) {\n      this._listeners[event] = this._listeners[event] || {};\n      (0, _values2.default)(this._listeners[event]).forEach(function (listener) {\n        return listener(message);\n      });\n    }\n  }]);\n  return AuthService;\n}(); /*\n      * Copyright (c) 2017-Present, Okta, Inc. and/or its affiliates. All rights reserved.\n      * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n      *\n      * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n      * Unless required by applicable law or agreed to in writing, software\n      * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n      * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n      *\n      * See the License for the specific language governing permissions and limitations under the License.\n      */\n\n\nAuthService.DEFAULT_STATE = {\n  isPending: true,\n  isAuthenticated: null,\n  idToken: null,\n  accessToken: null\n};\n\nexports.default = AuthService;"]},"metadata":{},"sourceType":"script"}