{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\xmark\\\\Desktop\\\\Code\\\\Servers\\\\Qumoc\\\\food-commune\\\\src\\\\components\\\\UserStatus.jsx\";\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { oktaSession } from \"../store/actions/index\";\nimport { session, getToken, signOut } from \"../util/okta\";\nimport { Link, Redirect, Route } from \"react-router-dom\";\nimport DashboardView from \"./DashboardView\";\n\nconst mapStateToProps = state => {\n  return {\n    sessionExists: state.sessionExists,\n    provisional: state.provisional,\n    user: state.user,\n    tokenExpiresAt: state.tokenExpiresAt,\n    expiringSession: state.expiringSession\n  };\n};\n\nfunction mapDispatchToProps(dispatch) {\n  return {};\n}\n\nclass UserStatus extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      userMenu: false\n    };\n\n    this.userMenu = () => {\n      console.log(\"clicked\");\n      this.setState({\n        userMenu: this.state.userMenu ? false : true\n      });\n    };\n\n    this.continueSession = () => {\n      getToken({\n        user: {\n          profile: {\n            login: this.props.user.email\n          }\n        }\n      });\n    };\n\n    this.endSession = () => {\n      signOut(); // return (\n      //   <Route>\n      //     <Redirect to={{ pathname: \"/foodcommune\" }}></Redirect>\n      //   </Route>\n      // );\n    };\n  }\n\n  componentWillMount() {\n    session();\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(React.Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 7\n      }\n    }, this.props.expiringSession && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"session-exp-warning\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      style: {\n        color: \"red\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 13\n      }\n    }, \"Your session is about to expire!\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex justify-content-around mt-5\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-sm btn-danger\",\n      onClick: this.endSession,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 15\n      }\n    }, \"Log Out\"), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-sm btn-success\",\n      onClick: this.continueSession,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 15\n      }\n    }, \"Continue\"))), this.props.user && /*#__PURE__*/React.createElement(Route, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Redirect, {\n      to: {\n        pathname: \"/foodcommune/dashboard\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 13\n      }\n    })), !this.props.user && /*#__PURE__*/React.createElement(React.Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      id: \"open-account\",\n      className: \"nav-item nav-link\",\n      onClick: this.props.createAccount,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 13\n      }\n    }, \"Create Account\"), /*#__PURE__*/React.createElement(\"span\", {\n      id: \"open-signin\",\n      className: \"nav-item nav-link\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/foodcommune/SignIn\",\n      className: \"link-gray\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 15\n      }\n    }, \"Log In\"))), this.props.user && /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      onClick: this.userMenu,\n      style: {\n        display: \"flex\",\n        alignItems: \"center\",\n        position: \"relative\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 13\n      }\n    }, this.props.user.image_url && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"img-wrap-xs mr-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: `./Uploads/Profile_Images/${this.props.user.image_url}`,\n      style: {\n        width: \"inherit\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 19\n      }\n    })), !this.props.user.image_url && /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fas fa-user-circle fa-2x mr-1 fc-green\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      id: \"user\",\n      style: {\n        color: \"dimgray\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 15\n      }\n    }, this.props.user.first_name), /*#__PURE__*/React.createElement(\"i\", {\n      className: \"fas fa-caret-down ml-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 15\n      }\n    }), this.state.userMenu && /*#__PURE__*/React.createElement(\"div\", {\n      id: \"user-menu\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"ul\", {\n      style: {\n        listStyle: \"none\",\n        padding: \"10px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"li\", {\n      style: {\n        cursor: \"pointer\"\n      },\n      onClick: () => this.state.authClient.signOut(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 21\n      }\n    }, \"Sign Out\"), /*#__PURE__*/React.createElement(\"li\", {\n      style: {\n        cursor: \"pointer\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/foodcommune/dashboard\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 23\n      }\n    }, \"Dashboard\")), /*#__PURE__*/React.createElement(\"li\", {\n      style: {\n        cursor: \"pointer\"\n      },\n      onClick: this.tokenExpireCheck,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 21\n      }\n    }, \"Settings\"))))));\n  }\n\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(UserStatus);","map":{"version":3,"sources":["C:/Users/xmark/Desktop/Code/Servers/Qumoc/food-commune/src/components/UserStatus.jsx"],"names":["React","Component","connect","oktaSession","session","getToken","signOut","Link","Redirect","Route","DashboardView","mapStateToProps","state","sessionExists","provisional","user","tokenExpiresAt","expiringSession","mapDispatchToProps","dispatch","UserStatus","userMenu","console","log","setState","continueSession","profile","login","props","email","endSession","componentWillMount","render","color","pathname","createAccount","display","alignItems","position","image_url","width","first_name","listStyle","padding","cursor","authClient","tokenExpireCheck"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { oktaSession } from \"../store/actions/index\";\r\nimport { session, getToken, signOut } from \"../util/okta\";\r\nimport { Link, Redirect, Route } from \"react-router-dom\";\r\nimport DashboardView from \"./DashboardView\";\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    sessionExists: state.sessionExists,\r\n    provisional: state.provisional,\r\n    user: state.user,\r\n    tokenExpiresAt: state.tokenExpiresAt,\r\n    expiringSession: state.expiringSession\r\n  };\r\n};\r\n\r\nfunction mapDispatchToProps(dispatch) {\r\n  return {};\r\n}\r\n\r\nclass UserStatus extends Component {\r\n  state = {\r\n    userMenu: false\r\n  };\r\n\r\n  componentWillMount() {\r\n    session();\r\n  }\r\n\r\n  userMenu = () => {\r\n    console.log(\"clicked\");\r\n    this.setState({ userMenu: this.state.userMenu ? false : true });\r\n  };\r\n\r\n  continueSession = () => {\r\n    getToken({ user: { profile: { login: this.props.user.email } } });\r\n  };\r\n\r\n  endSession = () => {\r\n    signOut();\r\n    // return (\r\n    //   <Route>\r\n    //     <Redirect to={{ pathname: \"/foodcommune\" }}></Redirect>\r\n    //   </Route>\r\n    // );\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <React.Fragment>\r\n        {/* WARNING - SESSION EXPIRING */}\r\n        {this.props.expiringSession && (\r\n          <div className=\"session-exp-warning\">\r\n            <span style={{ color: \"red\" }}>\r\n              Your session is about to expire!\r\n            </span>\r\n            <div className=\"d-flex justify-content-around mt-5\">\r\n              <button\r\n                className=\"btn btn-sm btn-danger\"\r\n                onClick={this.endSession}\r\n              >\r\n                Log Out\r\n              </button>\r\n              <button\r\n                className=\"btn btn-sm btn-success\"\r\n                onClick={this.continueSession}\r\n              >\r\n                Continue\r\n              </button>\r\n            </div>\r\n          </div>\r\n        )}\r\n        {/* REDIRECT SIGNED IN USER */}\r\n        {this.props.user && (\r\n          <Route>\r\n            <Redirect to={{ pathname: \"/foodcommune/dashboard\" }}></Redirect>\r\n          </Route>\r\n        )}\r\n        {/* User sign in/create account */}\r\n        {!this.props.user && (\r\n          <React.Fragment>\r\n            <span\r\n              id=\"open-account\"\r\n              className=\"nav-item nav-link\"\r\n              onClick={this.props.createAccount}\r\n            >\r\n              Create Account\r\n            </span>\r\n            <span id=\"open-signin\" className=\"nav-item nav-link\">\r\n              <Link to=\"/foodcommune/SignIn\" className=\"link-gray\">\r\n                Log In\r\n              </Link>\r\n            </span>\r\n          </React.Fragment>\r\n        )}\r\n        {/* User signed in */}\r\n        {this.props.user && (\r\n          <div>\r\n            <div\r\n              onClick={this.userMenu}\r\n              style={{\r\n                display: \"flex\",\r\n                alignItems: \"center\",\r\n                position: \"relative\"\r\n              }}\r\n            >\r\n              {this.props.user.image_url && (\r\n                <div className=\"img-wrap-xs mr-1\">\r\n                  <img\r\n                    src={`./Uploads/Profile_Images/${this.props.user.image_url}`}\r\n                    style={{ width: \"inherit\" }}\r\n                  ></img>\r\n                </div>\r\n              )}\r\n              {!this.props.user.image_url && (\r\n                <i className=\"fas fa-user-circle fa-2x mr-1 fc-green\"></i>\r\n              )}\r\n              <span id=\"user\" style={{ color: \"dimgray\" }}>\r\n                {this.props.user.first_name}\r\n              </span>\r\n              <i className=\"fas fa-caret-down ml-3\"></i>\r\n              {this.state.userMenu && (\r\n                <div id=\"user-menu\">\r\n                  <ul style={{ listStyle: \"none\", padding: \"10px\" }}>\r\n                    <li\r\n                      style={{ cursor: \"pointer\" }}\r\n                      onClick={() => this.state.authClient.signOut()}\r\n                    >\r\n                      Sign Out\r\n                    </li>\r\n                    <li style={{ cursor: \"pointer\" }}>\r\n                      <Link to=\"/foodcommune/dashboard\">Dashboard</Link>\r\n                    </li>\r\n                    <li\r\n                      style={{ cursor: \"pointer\" }}\r\n                      onClick={this.tokenExpireCheck}\r\n                    >\r\n                      Settings\r\n                    </li>\r\n                  </ul>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        )}\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(UserStatus);\r\n"]},"metadata":{},"sourceType":"module"}