{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\xmark\\\\Desktop\\\\Code\\\\Servers\\\\Qumoc\\\\food-commune\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _objectSpread from\"C:\\\\Users\\\\xmark\\\\Desktop\\\\Code\\\\Servers\\\\Qumoc\\\\food-commune\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"C:\\\\Users\\\\xmark\\\\Desktop\\\\Code\\\\Servers\\\\Qumoc\\\\food-commune\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";/**\r\n *  PEPPER REDUX STORE - REDUCER\r\n * \r\n */import{session,getToken}from'../../util/okta';var initialState={user:null,provisional:null,token:null,sessionExists:null};function rootReducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments.length>1?arguments[1]:undefined;if(Object.keys(reducers).includes(action.type)){return reducers[action.type](state,action.payload);}else{return state;}};var reducers={};reducers.OKTA_SESSION=function(state){// Check for existing user session\nfunction status(){return _status.apply(this,arguments);}function _status(){_status=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var userSession,tokenInfo;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return session();case 2:userSession=_context.sent;_context.next=5;return getToken(userSession);case 5:tokenInfo=_context.sent;console.log(userSession,tokenInfo);return _context.abrupt(\"return\",tokenInfo);case 8:case\"end\":return _context.stop();}}},_callee);}));return _status.apply(this,arguments);}return status().then(function(sessionInfo){if(sessionInfo.provisional){return _objectSpread({},state,{provisional:sessionInfo.provisional});}else{return _objectSpread({},state,{token:sessionInfo.token,user:sessionInfo.user});}});// return session()\n//     .then(session => {\n//         console.log(\"SESSION\", session);\n//         return getToken(session).\n//             then(tokenInfo => {\n//                 console.log(\"TOkenInfo\", tokenInfo);\n//                 if (tokenInfo.provisional) {\n//                     return {...state, provisional: tokenInfo.provisional}\n//                 } else {\n//                     return {...state, token: tokenInfo.token, user: tokenInfo.user}\n//                 }\n//             })\n//             .catch(err => {\n//                 console.log(err);\n//         })\n//     })\n};reducers.DIALPAD_SHOW=function(state,payload){var toggle=state.UI.dialPadShow?false:true;var dialPadShow=payload===\"toggle\"?toggle:payload;var UI=_objectSpread({},state.UI,{dialPadShow:dialPadShow});return _objectSpread({},state,{UI:UI});};export default rootReducer;","map":{"version":3,"sources":["C:/Users/xmark/Desktop/Code/Servers/Qumoc/food-commune/src/store/reducers/index.js"],"names":["session","getToken","initialState","user","provisional","token","sessionExists","rootReducer","state","action","Object","keys","reducers","includes","type","payload","OKTA_SESSION","status","userSession","tokenInfo","console","log","then","sessionInfo","DIALPAD_SHOW","toggle","UI","dialPadShow"],"mappings":"uiBAAA;;;GAIA,OAASA,OAAT,CAAkBC,QAAlB,KAAkC,iBAAlC,CAEA,GAAMC,CAAAA,YAAY,CAAG,CACjBC,IAAI,CAAE,IADW,CAEjBC,WAAW,CAAE,IAFI,CAGjBC,KAAK,CAAE,IAHU,CAIjBC,aAAa,CAAE,IAJE,CAArB,CAQA,QAASC,CAAAA,WAAT,EAAmD,IAA9BC,CAAAA,KAA8B,2DAAtBN,YAAsB,IAARO,CAAAA,MAAQ,2CAC/C,GAAIC,MAAM,CAACC,IAAP,CAAYC,QAAZ,EAAsBC,QAAtB,CAA+BJ,MAAM,CAACK,IAAtC,CAAJ,CAAiD,CAC7C,MAAOF,CAAAA,QAAQ,CAACH,MAAM,CAACK,IAAR,CAAR,CAAsBN,KAAtB,CAA6BC,MAAM,CAACM,OAApC,CAAP,CACH,CAFD,IAEO,CACH,MAAOP,CAAAA,KAAP,CACH,CACJ,EAED,GAAII,CAAAA,QAAQ,CAAG,EAAf,CAEAA,QAAQ,CAACI,YAAT,CAAwB,SAACR,KAAD,CAAW,CAC/B;AAD+B,QAEhBS,CAAAA,MAFgB,4HAE/B,mLAC4BjB,CAAAA,OAAO,EADnC,QACQkB,WADR,qCAE0BjB,CAAAA,QAAQ,CAACiB,WAAD,CAFlC,QAEQC,SAFR,eAGIC,OAAO,CAACC,GAAR,CAAYH,WAAZ,CAAyBC,SAAzB,EAHJ,gCAIWA,SAJX,wDAF+B,yCAS/B,MAAOF,CAAAA,MAAM,GACRK,IADE,CACG,SAAAC,WAAW,CAAI,CACjB,GAAIA,WAAW,CAACnB,WAAhB,CAA6B,CACzB,wBAAYI,KAAZ,EAAmBJ,WAAW,CAAEmB,WAAW,CAACnB,WAA5C,GACH,CAFD,IAEO,CACH,wBAAYI,KAAZ,EAAmBH,KAAK,CAAEkB,WAAW,CAAClB,KAAtC,CAA6CF,IAAI,CAAEoB,WAAW,CAACpB,IAA/D,GACH,CACJ,CAPE,CAAP,CAUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEH,CArCD,CAuCAS,QAAQ,CAACY,YAAT,CAAwB,SAAChB,KAAD,CAAQO,OAAR,CAAoB,CACxC,GAAIU,CAAAA,MAAM,CAAGjB,KAAK,CAACkB,EAAN,CAASC,WAAT,CAAuB,KAAvB,CAA+B,IAA5C,CACA,GAAIA,CAAAA,WAAW,CAAGZ,OAAO,GAAK,QAAZ,CAAuBU,MAAvB,CAAgCV,OAAlD,CACA,GAAIW,CAAAA,EAAE,kBAAQlB,KAAK,CAACkB,EAAd,EAAkBC,WAAW,CAAEA,WAA/B,EAAN,CACA,wBAAYnB,KAAZ,EAAmBkB,EAAE,CAAFA,EAAnB,GACH,CALD,CASA,cAAenB,CAAAA,WAAf","sourcesContent":["/**\r\n *  PEPPER REDUX STORE - REDUCER\r\n * \r\n */\r\nimport { session, getToken } from '../../util/okta';\r\n\r\nconst initialState = {\r\n    user: null,\r\n    provisional: null,\r\n    token: null,\r\n    sessionExists: null\r\n\r\n};\r\n\r\nfunction rootReducer(state = initialState, action) {\r\n    if (Object.keys(reducers).includes(action.type)) {\r\n        return reducers[action.type](state, action.payload);\r\n    } else {\r\n        return state;\r\n    }\r\n};\r\n\r\nlet reducers = {};\r\n\r\nreducers.OKTA_SESSION = (state) => {\r\n    // Check for existing user session\r\n    async function status() {\r\n        let userSession = await session();\r\n        let tokenInfo = await getToken(userSession);\r\n        console.log(userSession, tokenInfo);\r\n        return tokenInfo;\r\n    }\r\n\r\n    return status()\r\n        .then(sessionInfo => {\r\n            if (sessionInfo.provisional) {\r\n                return { ...state, provisional: sessionInfo.provisional }\r\n            } else {\r\n                return { ...state, token: sessionInfo.token, user: sessionInfo.user }\r\n            }\r\n        })\r\n\r\n\r\n    // return session()\r\n    //     .then(session => {\r\n    //         console.log(\"SESSION\", session);\r\n    //         return getToken(session).\r\n    //             then(tokenInfo => {\r\n    //                 console.log(\"TOkenInfo\", tokenInfo);\r\n    //                 if (tokenInfo.provisional) {\r\n    //                     return {...state, provisional: tokenInfo.provisional}\r\n    //                 } else {\r\n    //                     return {...state, token: tokenInfo.token, user: tokenInfo.user}\r\n    //                 }\r\n    //             })\r\n    //             .catch(err => {\r\n    //                 console.log(err);\r\n    //         })\r\n\r\n    //     })\r\n\r\n}\r\n\r\nreducers.DIALPAD_SHOW = (state, payload) => {\r\n    let toggle = state.UI.dialPadShow ? false : true;\r\n    let dialPadShow = payload === \"toggle\" ? toggle : payload;\r\n    let UI = { ...state.UI, dialPadShow: dialPadShow };\r\n    return { ...state, UI }\r\n}\r\n\r\n\r\n\r\nexport default rootReducer;"]},"metadata":{},"sourceType":"module"}