{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\xmark\\\\Desktop\\\\Code\\\\Servers\\\\Qumoc\\\\food-commune\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\xmark\\\\Desktop\\\\Code\\\\Servers\\\\Qumoc\\\\food-commune\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\xmark\\\\Desktop\\\\Code\\\\Servers\\\\Qumoc\\\\food-commune\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\xmark\\\\Desktop\\\\Code\\\\Servers\\\\Qumoc\\\\food-commune\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import MyGroupOrders from\"./MyGroupOrders\";var MyGroupBuys=/*#__PURE__*/function(_Component){_inherits(MyGroupBuys,_Component);var _super=_createSuper(MyGroupBuys);function MyGroupBuys(){var _this;_classCallCheck(this,MyGroupBuys);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={menuIndex:null,viewOrder:null,showBuyOptions:null,buyQuantity:0};_this.totalUnitsPurchased=function(dealId){var units=0;_this.props.data.Purchases.forEach(function(p){if(p.deal_id===dealId){units+=p.purchase_units;}});return units;};_this.seeOrder=function(order){_this.setState({viewOrder:order});};return _this;}_createClass(MyGroupBuys,[{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/React.createElement(React.Fragment,null,this.state.viewOrder&&/*#__PURE__*/React.createElement(MyGroupOrders,{data:this.props.data,Buy:this.state.viewOrder,seeOrder:this.seeOrder}),!this.state.viewOrder&&/*#__PURE__*/React.createElement(\"div\",{className:\"card bg-light\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card-header button-group\"},/*#__PURE__*/React.createElement(\"div\",null,\"Our Buys - Place Your Order Now!\"),/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-sm btn-primary\",style:{font:\"small-caption\",float:\"right\"},onClick:function onClick(){window.location.href=\"/foodcommune/catalog.html\";}},\"catalog\")),/*#__PURE__*/React.createElement(\"div\",{className:\"card-body p-0\",style:{overflowY:\"auto\"}},/*#__PURE__*/React.createElement(\"div\",{className:\"container-fluid\",id:\"group-list\"},/*#__PURE__*/React.createElement(\"ul\",{id:\"group-buys-list\",style:{listStyle:\"none\",padding:\"0\",fontSize:\"small\"}},this.props.data&&this.props.data.Buys.map(function(b,index){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"li\",{key:index,className:\"row group-buy-item\"// onClick={() => this.props.itemView(b)}\n,onClick:function onClick(){return _this2.setState({showBuyOptions:index});}},/*#__PURE__*/React.createElement(\"div\",{className:\"col-2\"},/*#__PURE__*/React.createElement(\"img\",{className:\"seller-img\",src:\"./Uploads/Deal_Images/\"+b.image_url,alt:\"\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-6\",style:{color:\"dimgray\"}},/*#__PURE__*/React.createElement(\"span\",{className:\"item-emph\"},b.description)),/*#__PURE__*/React.createElement(\"div\",{className:\"col-3\",style:{color:\"#28a745\"}},_this2.totalUnitsPurchased(b.id),\"/\",b.units,b.unit_measure),_this2.props.userIsMember==0&&/*#__PURE__*/React.createElement(\"div\",{className:\"col-1 buy-ellips d-flex\",onClick:function onClick(ev){ev.stopPropagation();_this2.setState({menuIndex:index===_this2.state.menuIndex?null:index});}},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-ellipsis-v\"}),_this2.state.menuIndex===index&&/*#__PURE__*/React.createElement(\"div\",{className:\"buy-ellips-menu\"},/*#__PURE__*/React.createElement(\"div\",{onClick:function onClick(){return _this2.props.removeBuy(b.id);}},\"Remove\"),/*#__PURE__*/React.createElement(\"div\",{className:\"mt-1\",onClick:function onClick(){return _this2.seeOrder(b);}},\"Orders\")))),/*#__PURE__*/React.createElement(\"div\",{className:index===_this2.state.showBuyOptions?\"buy-options bo-show\":\"buy-options\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row justify-content-center align-items-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col flex-cc my-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"mr-3\"},/*#__PURE__*/React.createElement(\"span\",{className:\"buy-cost\"},\"Cost $\",(b.price/b.units*_this2.state.buyQuantity).toFixed(2))),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"span\",null,\"Order quantity in \",b.unit_measure),/*#__PURE__*/React.createElement(\"input\",{className:\"ml-2\",style:{borderStyle:\"none\",borderRadius:\"3px\",width:\"50px\",textAlign:\"center\"},value:_this2.state.buyQuantity,type:\"number\",onChange:function onChange(ev){return _this2.setState({buyQuantity:ev.target.value});}})),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-sm btn-success mx-2\",onClick:function onClick(){return _this2.setState({buyQuantity:_this2.state.buyQuantity+1});}},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-plus\"})),/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-sm btn-success mx-2\",onClick:function onClick(){return _this2.setState({buyQuantity:_this2.state.buyQuantity-1});}},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-minus\"}))))),/*#__PURE__*/React.createElement(\"div\",{className:\"row justify-content-center align-items-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col\"},/*#__PURE__*/React.createElement(\"div\",null,\"Description: \",b.summary),/*#__PURE__*/React.createElement(\"div\",null,\"Deal: \",b.units,\" \",b.unit_measure,\" for $\",b.price)))));}))))));}}]);return MyGroupBuys;}(Component);export default MyGroupBuys;","map":{"version":3,"sources":["C:/Users/xmark/Desktop/Code/Servers/Qumoc/food-commune/src/components/MyGroupBuys.jsx"],"names":["React","Component","MyGroupOrders","MyGroupBuys","state","menuIndex","viewOrder","showBuyOptions","buyQuantity","totalUnitsPurchased","dealId","units","props","data","Purchases","forEach","p","deal_id","purchase_units","seeOrder","order","setState","font","float","window","location","href","overflowY","listStyle","padding","fontSize","Buys","map","b","index","image_url","color","description","id","unit_measure","userIsMember","ev","stopPropagation","removeBuy","price","toFixed","borderStyle","borderRadius","width","textAlign","target","value","summary"],"mappings":"otBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,aAAP,KAA0B,iBAA1B,C,GAEMC,CAAAA,W,+UACJC,K,CAAQ,CACNC,SAAS,CAAE,IADL,CAENC,SAAS,CAAE,IAFL,CAGNC,cAAc,CAAE,IAHV,CAINC,WAAW,CAAE,CAJP,C,OAORC,mB,CAAsB,SAAAC,MAAM,CAAI,CAC9B,GAAIC,CAAAA,KAAK,CAAG,CAAZ,CACA,MAAKC,KAAL,CAAWC,IAAX,CAAgBC,SAAhB,CAA0BC,OAA1B,CAAkC,SAAAC,CAAC,CAAI,CACrC,GAAIA,CAAC,CAACC,OAAF,GAAcP,MAAlB,CAA0B,CACxBC,KAAK,EAAIK,CAAC,CAACE,cAAX,CACD,CACF,CAJD,EAMA,MAAOP,CAAAA,KAAP,CACD,C,OAEDQ,Q,CAAW,SAAAC,KAAK,CAAI,CAClB,MAAKC,QAAL,CAAc,CAAEf,SAAS,CAAEc,KAAb,CAAd,EACD,C,8EAEQ,iBACP,mBACE,oBAAC,KAAD,CAAO,QAAP,MACG,KAAKhB,KAAL,CAAWE,SAAX,eACC,oBAAC,aAAD,EACE,IAAI,CAAE,KAAKM,KAAL,CAAWC,IADnB,CAEE,GAAG,CAAE,KAAKT,KAAL,CAAWE,SAFlB,CAGE,QAAQ,CAAE,KAAKa,QAHjB,EAFJ,CAQG,CAAC,KAAKf,KAAL,CAAWE,SAAZ,eACC,2BAAK,SAAS,CAAC,eAAf,eACE,2BAAK,SAAS,CAAC,0BAAf,eACE,kEADF,cAEE,8BACE,SAAS,CAAC,wBADZ,CAEE,KAAK,CAAE,CAAEgB,IAAI,CAAE,eAAR,CAAyBC,KAAK,CAAE,OAAhC,CAFT,CAGE,OAAO,CAAE,kBAAM,CACbC,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAuB,2BAAvB,CACD,CALH,YAFF,CADF,cAaE,2BAAK,SAAS,CAAC,eAAf,CAA+B,KAAK,CAAE,CAAEC,SAAS,CAAE,MAAb,CAAtC,eACE,2BAAK,SAAS,CAAC,iBAAf,CAAiC,EAAE,CAAC,YAApC,eACE,0BACE,EAAE,CAAC,iBADL,CAEE,KAAK,CAAE,CAAEC,SAAS,CAAE,MAAb,CAAqBC,OAAO,CAAE,GAA9B,CAAmCC,QAAQ,CAAE,OAA7C,CAFT,EAIG,KAAKlB,KAAL,CAAWC,IAAX,EACC,KAAKD,KAAL,CAAWC,IAAX,CAAgBkB,IAAhB,CAAqBC,GAArB,CAAyB,SAACC,CAAD,CAAIC,KAAJ,CAAc,CACrC,mBACE,oBAAC,KAAD,CAAO,QAAP,mBACE,0BACE,GAAG,CAAEA,KADP,CAEE,SAAS,CAAC,oBACV;AAHF,CAIE,OAAO,CAAE,yBACP,CAAA,MAAI,CAACb,QAAL,CAAc,CAAEd,cAAc,CAAE2B,KAAlB,CAAd,CADO,EAJX,eASE,2BAAK,SAAS,CAAC,OAAf,eACE,2BACE,SAAS,CAAC,YADZ,CAEE,GAAG,CAAE,yBAA2BD,CAAC,CAACE,SAFpC,CAGE,GAAG,CAAC,EAHN,EADF,CATF,cAiBE,2BAAK,SAAS,CAAC,OAAf,CAAuB,KAAK,CAAE,CAAEC,KAAK,CAAE,SAAT,CAA9B,eACE,4BAAM,SAAS,CAAC,WAAhB,EAA6BH,CAAC,CAACI,WAA/B,CADF,CAjBF,cAoBE,2BAAK,SAAS,CAAC,OAAf,CAAuB,KAAK,CAAE,CAAED,KAAK,CAAE,SAAT,CAA9B,EACG,MAAI,CAAC3B,mBAAL,CAAyBwB,CAAC,CAACK,EAA3B,CADH,KACoCL,CAAC,CAACtB,KADtC,CAEGsB,CAAC,CAACM,YAFL,CApBF,CAwBG,MAAI,CAAC3B,KAAL,CAAW4B,YAAX,EAA2B,CAA3B,eACC,2BACE,SAAS,CAAC,yBADZ,CAEE,OAAO,CAAE,iBAAAC,EAAE,CAAI,CACbA,EAAE,CAACC,eAAH,GACA,MAAI,CAACrB,QAAL,CAAc,CACZhB,SAAS,CACP6B,KAAK,GAAK,MAAI,CAAC9B,KAAL,CAAWC,SAArB,CACI,IADJ,CAEI6B,KAJM,CAAd,EAMD,CAVH,eAYE,yBAAG,SAAS,CAAC,mBAAb,EAZF,CAaG,MAAI,CAAC9B,KAAL,CAAWC,SAAX,GAAyB6B,KAAzB,eACC,2BAAK,SAAS,CAAC,iBAAf,eACE,2BACE,OAAO,CAAE,yBAAM,CAAA,MAAI,CAACtB,KAAL,CAAW+B,SAAX,CAAqBV,CAAC,CAACK,EAAvB,CAAN,EADX,WADF,cAME,2BACE,SAAS,CAAC,MADZ,CAEE,OAAO,CAAE,yBAAM,CAAA,MAAI,CAACnB,QAAL,CAAcc,CAAd,CAAN,EAFX,WANF,CAdJ,CAzBJ,CADF,cAyDE,2BACE,SAAS,CACPC,KAAK,GAAK,MAAI,CAAC9B,KAAL,CAAWG,cAArB,CACI,qBADJ,CAEI,aAJR,eAOE,2BAAK,SAAS,CAAC,+CAAf,eACE,2BAAK,SAAS,CAAC,kBAAf,eACA,2BAAK,SAAS,CAAC,MAAf,eACE,4BAAM,SAAS,CAAC,UAAhB,WAEG,CACE0B,CAAC,CAACW,KAAF,CAAUX,CAAC,CAACtB,KAAb,CACA,MAAI,CAACP,KAAL,CAAWI,WAFZ,EAGCqC,OAHD,CAGS,CAHT,CAFH,CADF,CADA,cAUA,4CACE,qDAAyBZ,CAAC,CAACM,YAA3B,CADF,cAEE,6BACE,SAAS,CAAC,MADZ,CAEE,KAAK,CAAE,CACLO,WAAW,CAAE,MADR,CAELC,YAAY,CAAE,KAFT,CAGLC,KAAK,CAAE,MAHF,CAILC,SAAS,CAAE,QAJN,CAFT,CAQE,KAAK,CAAE,MAAI,CAAC7C,KAAL,CAAWI,WARpB,CASE,IAAI,CAAC,QATP,CAUE,QAAQ,CAAE,kBAAAiC,EAAE,QACV,CAAA,MAAI,CAACpB,QAAL,CAAc,CACZb,WAAW,CAAEiC,EAAE,CAACS,MAAH,CAAUC,KADX,CAAd,CADU,EAVd,EAFF,CAVA,cA6BA,4CACE,8BACE,SAAS,CAAC,6BADZ,CAEE,OAAO,CAAE,yBACP,CAAA,MAAI,CAAC9B,QAAL,CAAc,CACZb,WAAW,CAAE,MAAI,CAACJ,KAAL,CAAWI,WAAX,CAAyB,CAD1B,CAAd,CADO,EAFX,eAQE,yBAAG,SAAS,CAAC,aAAb,EARF,CADF,cAWE,8BACE,SAAS,CAAC,6BADZ,CAEE,OAAO,CAAE,yBACP,CAAA,MAAI,CAACa,QAAL,CAAc,CACZb,WAAW,CAAE,MAAI,CAACJ,KAAL,CAAWI,WAAX,CAAyB,CAD1B,CAAd,CADO,EAFX,eAQE,yBAAG,SAAS,CAAC,cAAb,EARF,CAXF,CA7BA,CADF,CAPF,cA8DE,2BAAK,SAAS,CAAC,+CAAf,eACE,2BAAK,SAAS,CAAC,KAAf,eACE,+CACgByB,CAAC,CAACmB,OADlB,CADF,cAIE,wCACSnB,CAAC,CAACtB,KADX,KACmBsB,CAAC,CAACM,YADrB,UAEGN,CAAC,CAACW,KAFL,CAJF,CADF,CA9DF,CAzDF,CADF,CAsID,CAvID,CALJ,CADF,CADF,CAbF,CATJ,CADF,CA6KD,C,yBArMuB3C,S,EAwM1B,cAAeE,CAAAA,WAAf","sourcesContent":["import React, { Component } from \"react\";\r\nimport MyGroupOrders from \"./MyGroupOrders\";\r\n\r\nclass MyGroupBuys extends Component {\r\n  state = {\r\n    menuIndex: null,\r\n    viewOrder: null,\r\n    showBuyOptions: null,\r\n    buyQuantity: 0\r\n  };\r\n\r\n  totalUnitsPurchased = dealId => {\r\n    let units = 0;\r\n    this.props.data.Purchases.forEach(p => {\r\n      if (p.deal_id === dealId) {\r\n        units += p.purchase_units;\r\n      }\r\n    });\r\n\r\n    return units;\r\n  };\r\n\r\n  seeOrder = order => {\r\n    this.setState({ viewOrder: order });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <React.Fragment>\r\n        {this.state.viewOrder && (\r\n          <MyGroupOrders\r\n            data={this.props.data}\r\n            Buy={this.state.viewOrder}\r\n            seeOrder={this.seeOrder}\r\n          />\r\n        )}\r\n        {!this.state.viewOrder && (\r\n          <div className=\"card bg-light\">\r\n            <div className=\"card-header button-group\">\r\n              <div>Our Buys - Place Your Order Now!</div>\r\n              <button\r\n                className=\"btn btn-sm btn-primary\"\r\n                style={{ font: \"small-caption\", float: \"right\" }}\r\n                onClick={() => {\r\n                  window.location.href = \"/foodcommune/catalog.html\";\r\n                }}\r\n              >\r\n                catalog\r\n              </button>\r\n            </div>\r\n            <div className=\"card-body p-0\" style={{ overflowY: \"auto\" }}>\r\n              <div className=\"container-fluid\" id=\"group-list\">\r\n                <ul\r\n                  id=\"group-buys-list\"\r\n                  style={{ listStyle: \"none\", padding: \"0\", fontSize: \"small\" }}\r\n                >\r\n                  {this.props.data &&\r\n                    this.props.data.Buys.map((b, index) => {\r\n                      return (\r\n                        <React.Fragment>\r\n                          <li\r\n                            key={index}\r\n                            className=\"row group-buy-item\"\r\n                            // onClick={() => this.props.itemView(b)}\r\n                            onClick={() =>\r\n                              this.setState({ showBuyOptions: index })\r\n                            }\r\n                          >\r\n                            {/* Item image */}\r\n                            <div className=\"col-2\">\r\n                              <img\r\n                                className=\"seller-img\"\r\n                                src={\"./Uploads/Deal_Images/\" + b.image_url}\r\n                                alt=\"\"\r\n                              />\r\n                            </div>\r\n                            {/* Item info */}\r\n                            <div className=\"col-6\" style={{ color: \"dimgray\" }}>\r\n                              <span className=\"item-emph\">{b.description}</span>\r\n                            </div>\r\n                            <div className=\"col-3\" style={{ color: \"#28a745\" }}>\r\n                              {this.totalUnitsPurchased(b.id)}/{b.units}\r\n                              {b.unit_measure}\r\n                            </div>\r\n                            {this.props.userIsMember == 0 && (\r\n                              <div\r\n                                className=\"col-1 buy-ellips d-flex\"\r\n                                onClick={ev => {\r\n                                  ev.stopPropagation();\r\n                                  this.setState({\r\n                                    menuIndex:\r\n                                      index === this.state.menuIndex\r\n                                        ? null\r\n                                        : index\r\n                                  });\r\n                                }}\r\n                              >\r\n                                <i className=\"fas fa-ellipsis-v\"></i>\r\n                                {this.state.menuIndex === index && (\r\n                                  <div className=\"buy-ellips-menu\">\r\n                                    <div\r\n                                      onClick={() => this.props.removeBuy(b.id)}\r\n                                    >\r\n                                      Remove\r\n                                    </div>\r\n                                    <div\r\n                                      className=\"mt-1\"\r\n                                      onClick={() => this.seeOrder(b)}\r\n                                    >\r\n                                      Orders\r\n                                    </div>\r\n                                  </div>\r\n                                )}\r\n                              </div>\r\n                            )}\r\n                          </li>\r\n                          <div\r\n                            className={\r\n                              index === this.state.showBuyOptions\r\n                                ? \"buy-options bo-show\"\r\n                                : \"buy-options\"\r\n                            }\r\n                          >\r\n                            <div className=\"row justify-content-center align-items-center\">\r\n                              <div className=\"col flex-cc my-2\">\r\n                              <div className=\"mr-3\">\r\n                                <span className=\"buy-cost\">\r\n                                  Cost $\r\n                                  {(\r\n                                    (b.price / b.units) *\r\n                                    this.state.buyQuantity\r\n                                  ).toFixed(2)}\r\n                                </span>\r\n                              </div>\r\n                              <div>\r\n                                <span>Order quantity in {b.unit_measure}</span>\r\n                                <input\r\n                                  className=\"ml-2\"\r\n                                  style={{\r\n                                    borderStyle: \"none\",\r\n                                    borderRadius: \"3px\",\r\n                                    width: \"50px\",\r\n                                    textAlign: \"center\"\r\n                                  }}\r\n                                  value={this.state.buyQuantity}\r\n                                  type=\"number\"\r\n                                  onChange={ev =>\r\n                                    this.setState({\r\n                                      buyQuantity: ev.target.value\r\n                                    })\r\n                                  }\r\n                                ></input>\r\n                              </div>\r\n                              <div>\r\n                                <button\r\n                                  className=\"btn btn-sm btn-success mx-2\"\r\n                                  onClick={() =>\r\n                                    this.setState({\r\n                                      buyQuantity: this.state.buyQuantity + 1\r\n                                    })\r\n                                  }\r\n                                >\r\n                                  <i className=\"fas fa-plus\"></i>\r\n                                </button>\r\n                                <button\r\n                                  className=\"btn btn-sm btn-success mx-2\"\r\n                                  onClick={() =>\r\n                                    this.setState({\r\n                                      buyQuantity: this.state.buyQuantity - 1\r\n                                    })\r\n                                  }\r\n                                >\r\n                                  <i className=\"fas fa-minus\"></i>\r\n                                </button>\r\n                              </div>\r\n                              </div>\r\n                              \r\n                            </div>\r\n                            <div className=\"row justify-content-center align-items-center\">\r\n                              <div className=\"col\">\r\n                                <div>\r\n                                  Description: {b.summary}\r\n                                </div>\r\n                                <div>\r\n                                  Deal: {b.units} {b.unit_measure} for $\r\n                                  {b.price}\r\n                                </div>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                        </React.Fragment>\r\n                      );\r\n                    })}\r\n                </ul>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nexport default MyGroupBuys;\r\n"]},"metadata":{},"sourceType":"module"}