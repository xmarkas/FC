{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\xmark\\\\Desktop\\\\Code\\\\Servers\\\\Qumoc\\\\food-commune\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\xmark\\\\Desktop\\\\Code\\\\Servers\\\\Qumoc\\\\food-commune\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\xmark\\\\Desktop\\\\Code\\\\Servers\\\\Qumoc\\\\food-commune\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\xmark\\\\Desktop\\\\Code\\\\Servers\\\\Qumoc\\\\food-commune\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import ItemView from'./ItemView';import SearchBar from'./SearchBar';import Catalog from'./Catalog';import{CatalogActions}from'./ItemViewOption';var CatalogView=/*#__PURE__*/function(_Component){_inherits(CatalogView,_Component);var _super=_createSuper(CatalogView);function CatalogView(){var _this;_classCallCheck(this,CatalogView);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={searchInput:\"\",modal:null,data:null};_this.viewData=function(){if(_this.state.token&&_this.state.user){getUserClans(_this.state.token,_this.state.user.id).then(function(resolved){console.log(resolved);_this.setState({userClans:resolved.MyClans});}).catch(function(err){console.log(err);});}};_this.setToken=function(token){_this.setState({token:token});};_this.setUser=function(user){_this.setState({user:user});};_this.onSearch=function(ev){var value=ev.target.value;_this.setState({searchInput:value});};_this.itemView=function(itemIndex){console.log(itemIndex);_this.setState({modal:_this.state.data.Deals[itemIndex]});};_this.closeModal=function(){_this.setState({modal:null});};return _this;}_createClass(CatalogView,[{key:\"componentWillMount\",value:function componentWillMount(){var _this2=this;var data=getCatalog().then(function(resolved){console.log(\"DATAAA\",resolved);_this2.setState({data:resolved});}).catch(function(err){console.log(err);});}/****************************************************\r\n   * Component Data\r\n   */},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{id:\"nav-view\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},this.state.modal&&/*#__PURE__*/React.createElement(ItemView,{modal:this.state.modal,closeModal:this.closeModal,options:CatalogActions(this.state.token,this.state.userClans,this.state.user.id,this.state.modal)//modal as Deal\n}),/*#__PURE__*/React.createElement(\"div\",{id:\"catalog\",className:\"col\"},/*#__PURE__*/React.createElement(SearchBar,{onSearch:this.onSearch,placeHolderVal:rndPlaceHolder()}),this.state.data&&/*#__PURE__*/React.createElement(Catalog,{searchValue:this.state.searchInput,itemView:this.itemView,data:this.state.data}))));}}]);return CatalogView;}(Component);export default CatalogView;function rndPlaceHolder(){var time=new Date().getTime();if(time%2===0){return\"What are you looking for?\";}else if(time%3===0){return\"Carrots, Apples, Tomatoes...\";}else{return\"Strawberries, Onions, Broccoli..\";}}function getCatalog(){return new Promise(function(resolve,reject){var options={method:\"GET\"};fetch(\"https://qumoc.com/foodcommune/site/catalog\",options).then(function(res){return res.json();}).then(function(res){if(res){console.log(res);resolve(res);}else{console.log(\"Unable to retrieve data\");reject(\"Did not load\");}});});}function getUserClans(token,userId){return new Promise(function(resolve,reject){var request={userId:userId};var options={method:\"POST\",headers:new Headers({Authorization:\"Bearer \"+token,\"Content-Type\":\"application/json\"}),body:JSON.stringify({entity:request})};fetch(\"/foodcommune/accounts/userClans\",options).then(function(res){return res.json();}).then(function(res){console.log(res);if(res){// Return to account detail and display error message\nresolve(res);}else{reject(\"Unable to retrieve data\");}});});}","map":{"version":3,"sources":["C:/Users/xmark/Desktop/Code/Servers/Qumoc/food-commune/src/components/CatalogView.jsx"],"names":["React","Component","ItemView","SearchBar","Catalog","CatalogActions","CatalogView","state","searchInput","modal","data","viewData","token","user","getUserClans","id","then","resolved","console","log","setState","userClans","MyClans","catch","err","setToken","setUser","onSearch","ev","value","target","itemView","itemIndex","Deals","closeModal","getCatalog","rndPlaceHolder","time","Date","getTime","Promise","resolve","reject","options","method","fetch","res","json","userId","request","headers","Headers","Authorization","body","JSON","stringify","entity"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport ItemView from './ItemView';\r\nimport SearchBar from './SearchBar';\r\nimport Catalog from './Catalog';\r\nimport {CatalogActions} from './ItemViewOption';\r\n\r\n\r\nclass CatalogView extends Component {\r\n  state = {\r\n    searchInput: \"\",\r\n    modal: null,\r\n    data: null\r\n  };\r\n\r\n  componentWillMount() {\r\n    let data = getCatalog()\r\n      .then(resolved => {\r\n        console.log(\"DATAAA\", resolved);\r\n        this.setState({ data: resolved });\r\n      })\r\n      .catch(err => {\r\n        console.log(err);\r\n      });\r\n  }\r\n\r\n  /****************************************************\r\n   * Component Data\r\n   */\r\n  viewData = () => {\r\n    if (this.state.token && this.state.user) {\r\n      getUserClans(this.state.token, this.state.user.id)\r\n        .then(resolved => {\r\n          console.log(resolved);\r\n          this.setState({ userClans: resolved.MyClans });\r\n        })\r\n        .catch(err => {\r\n          console.log(err);\r\n        });\r\n    }\r\n  };\r\n\r\n  setToken = token => {\r\n    this.setState({ token: token });\r\n  };\r\n\r\n  setUser = user => {\r\n    this.setState({ user: user });\r\n  };\r\n  /*************************************************** */\r\n\r\n  onSearch = ev => {\r\n    let value = ev.target.value;\r\n\r\n    this.setState({ searchInput: value });\r\n  };\r\n\r\n  itemView = itemIndex => {\r\n    console.log(itemIndex);\r\n    this.setState({ modal: this.state.data.Deals[itemIndex] });\r\n  };\r\n\r\n  closeModal = () => {\r\n    this.setState({ modal: null });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <React.Fragment>\r\n        {/* <!-- Navigation --> */}\r\n        <div id=\"nav-view\">\r\n          {/* <NavView\r\n            setToken={this.setToken}\r\n            setUser={this.setUser}\r\n            viewData={this.viewData}\r\n          /> */}\r\n        </div>\r\n\r\n        {/* <!-- Main Content --> */}\r\n        <div className=\"row\">\r\n          {this.state.modal && (\r\n            <ItemView\r\n              modal={this.state.modal}\r\n              closeModal={this.closeModal}\r\n              options={CatalogActions(this.state.token, this.state.userClans, this.state.user.id, this.state.modal)} //modal as Deal\r\n            />\r\n          )}\r\n          <div id=\"catalog\" className=\"col\">\r\n            <SearchBar\r\n              onSearch={this.onSearch}\r\n              placeHolderVal={rndPlaceHolder()}\r\n            />\r\n            {this.state.data && (\r\n              <Catalog\r\n                searchValue={this.state.searchInput}\r\n                itemView={this.itemView}\r\n                data={this.state.data}\r\n              />\r\n            )}\r\n          </div>\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nexport default CatalogView;\r\n\r\nfunction rndPlaceHolder() {\r\n  let time = new Date().getTime();\r\n\r\n  if (time % 2 === 0) {\r\n    return \"What are you looking for?\";\r\n  } else if (time % 3 === 0) {\r\n    return \"Carrots, Apples, Tomatoes...\";\r\n  } else {\r\n    return \"Strawberries, Onions, Broccoli..\";\r\n  }\r\n}\r\n\r\nfunction getCatalog() {\r\n  return new Promise((resolve, reject) => {\r\n    let options = {\r\n      method: \"GET\"\r\n      \r\n    };\r\n    fetch(\"https://qumoc.com/foodcommune/site/catalog\", options)\r\n      .then(res => {\r\n        return res.json();\r\n      })\r\n      .then(res => {\r\n        if (res) {\r\n          console.log(res);\r\n          resolve(res);\r\n        } else {\r\n          console.log(\"Unable to retrieve data\");\r\n          reject(\"Did not load\");\r\n        }\r\n      });\r\n  });\r\n}\r\n\r\nfunction getUserClans(token, userId) {\r\n  return new Promise((resolve, reject) => {\r\n    let request = { userId: userId };\r\n    let options = {\r\n      method: \"POST\",\r\n      headers: new Headers({\r\n        Authorization: \"Bearer \" + token,\r\n        \"Content-Type\": \"application/json\"\r\n      }),\r\n      body: JSON.stringify({\r\n        entity: request\r\n      })\r\n    };\r\n    fetch(\"/foodcommune/accounts/userClans\", options)\r\n      .then(res => {\r\n        return res.json();\r\n      })\r\n      .then(res => {\r\n        console.log(res);\r\n        if (res) {\r\n          // Return to account detail and display error message\r\n          resolve(res);\r\n        } else {\r\n          reject(\"Unable to retrieve data\");\r\n        }\r\n      });\r\n  });\r\n}\r\n"]},"metadata":{},"sourceType":"module"}