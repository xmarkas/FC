{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\xmark\\\\Desktop\\\\Code\\\\Servers\\\\Qumoc\\\\food-commune\\\\src\\\\components\\\\MyGroupPage.jsx\";\nimport React, { Component } from 'react';\nimport ItemView from './ItemView';\nimport MyGroupHeader from './MyGroupHeader';\nimport MyGroupProfile from './MyGroupProfile';\nimport MyGroupBuys from './MyGroupBuys';\nimport MyGroupMembers from './MyGroupMemebers';\nimport MyGroupNews from './MyGroupNews';\nimport { connect } from \"react-redux\";\n/**\r\n * Roles: How user views are affected my their ROLE level\r\n *\r\n * Description: state.userIsMember determines the ROLL.\r\n *              userIsMember = 0 is Admin priviledges.\r\n *              userIsMember = 1 is Non-Admin group user. Cannot see admin options.\r\n *              userIsMember > 1 (2 is not a member, but possible requested to join group).\r\n *\r\n *              Currently only using 0, 1, and 2 for ROLES.\r\n */\n\nconst mapStateToProps = state => {\n  return {\n    provisional: state.provisional,\n    user: state.user,\n    token: state.token\n  };\n};\n\nclass MyGroupPage extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      modal: null,\n      modalUpdate: null,\n      joinRequested: false,\n      userIsMember: 3\n    };\n\n    this.itemView = deal => {\n      let updateBuy = this.state.data.Purchases.find(obj => {\n        return obj.user_id === this.props.user.id && obj.deal_id === deal.id;\n      });\n      console.log(updateBuy);\n\n      if (updateBuy) {\n        this.setState({\n          modalUpdate: updateBuy,\n          modal: deal\n        });\n      } else {\n        this.setState({\n          modal: deal\n        });\n      }\n    };\n\n    this.closeModal = () => {\n      this.setState({\n        modal: null\n      });\n    };\n\n    this.sendJoinRequest = () => {\n      joinRequest(this.props.token, this.props.user, this.state.data.Clan[0].id).then(resolved => {\n        console.log(resolved);\n        this.setState({\n          joinRequested: true\n        });\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.leaveGroup = () => {\n      removeUserFromGroup(this.props.token, this.props.user, this.state.data.Clan[0].id).then(resolved => {\n        console.log(resolved);\n        this.setState({\n          userIsMember: false,\n          joinRequested: false\n        });\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.memberRequest = (user_id, memberState) => {\n      handleMemberRequest(this.props.token, user_id, this.state.data.Clan[0].id, memberState).then(resolved => {\n        console.log(resolved);\n\n        if (memberState === 1) {\n          this.setState(prevState => {\n            let data = { ...prevState.data\n            };\n            let requestIndex = data.JoinRequests.findIndex(obj => {\n              return obj.id === user_id;\n            });\n            let joinRequest = data.JoinRequests.splice(requestIndex, 1);\n            joinRequest[0].user_is_admin = 0;\n            data.Members.push(joinRequest[0]);\n            return {\n              data: data\n            };\n          });\n        } else if (memberState === 3) {}\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.makeRevokeAdmin = (user_id, adminValue) => {\n      adminToggle(this.props.token, user_id, this.state.data.Clan[0].id, adminValue).then(resolved => {\n        console.log(resolved);\n        this.setState(prevState => {\n          let data = { ...prevState.data\n          };\n          let memberIndex = data.Members.findIndex(obj => {\n            return obj.id === user_id;\n          });\n          data.Members[memberIndex].user_is_admin = adminValue;\n          return {\n            data: data\n          };\n        });\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.removeMember = user_id => {\n      deleteMember(this.props.token, user_id, this.state.data.Clan[0].id).then(resolved => {\n        console.log(resolved);\n        this.setState(prevState => {\n          let data = { ...prevState.data\n          };\n          let memberIndex = data.Members.findIndex(obj => {\n            return obj.id === user_id;\n          });\n          data.Members.splice(memberIndex, 1);\n          return {\n            data: data\n          };\n        });\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.updateClan = payload => {\n      updateClanFields(this.props.token, this.state.data.Clan[0].id, payload).then(resolved => {\n        console.log(resolved);\n        this.setState(prevState => {\n          let data = { ...prevState.data\n          };\n          let keys = Object.keys(payload);\n          keys.forEach(k => {\n            data.Clan[0][k] = payload[k];\n          });\n          return {\n            data: data\n          };\n        });\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.removeBuy = dealId => {\n      deleteGroupBuy(this.props.token, this.state.data.Clan[0].id, dealId).then(resolved => {\n        console.log(resolved);\n        console.log(\"BUY ID = \", dealId);\n        this.setState(prevState => {\n          let data = { ...prevState.data\n          };\n          let buyIndex = data.Buys.findIndex(obj => {\n            return obj.id === dealId;\n          });\n          console.log(buyIndex);\n          data.Buys.splice(buyIndex, 1);\n          return {\n            data: data\n          };\n        });\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.addNewNews = message => {\n      insertNews(this.props.token, this.state.data.Clan[0].id, message).then(resolved => {\n        console.log(resolved);\n        this.setState(prevState => {\n          let data = { ...prevState.data\n          };\n          data.News.unshift({\n            message: message\n          });\n          return {\n            data: data\n          };\n        });\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n  }\n\n  componentWillMount() {\n    let params = new URLSearchParams(window.location.search);\n    let ref = params.get(\"ref\");\n    fetchData(this.props.token, this.props.user.id, ref).then(resolved => {\n      console.log(resolved);\n      this.setState({\n        data: resolved\n      }); // Is User a Clan member?\n\n      let user = resolved.Members.find(obj => {\n        return obj.id === this.props.user.id;\n      });\n\n      if (user) {\n        this.setState({\n          userIsMember: user.user_is_admin === 1 ? 0 : 1\n        });\n      } else {\n        this.setState({\n          userIsMember: 2\n        });\n      } // Did User request to join Clan?\n\n\n      let joinRequest = resolved.JoinRequests.find(obj => {\n        if (obj.id === this.props.user.id) {\n          this.setState({\n            joinRequested: true\n          });\n        }\n      });\n    }).catch(err => {\n      console.log(err);\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(React.Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      id: \"mygroup-page\",\n      className: \"row row-border justify-content-center mb-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      id: \"main-content\",\n      className: \"col spartan\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 11\n      }\n    }, this.state.modal && /*#__PURE__*/React.createElement(ItemView, {\n      modal: this.state.modal,\n      closeModal: this.closeModal // options={GroupPageActions(\n      //   this.state.token,\n      //   this.state.user.id,\n      //   this.state.data.Clan[0].id,\n      //   this.state.modal,\n      //   this.state.modalUpdate\n      // )}\n      ,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(MyGroupHeader, {\n      sendJoinRequest: this.sendJoinRequest,\n      joinRequested: this.state.joinRequested,\n      data: this.state.data,\n      userIsMember: this.state.userIsMember,\n      leaveGroup: this.leaveGroup,\n      updateClan: this.updateClan,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      id: \"mygroup-profile\",\n      className: \"col-sm-12 col-lg-6 d-flex\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 15\n      }\n    }, this.state.data && /*#__PURE__*/React.createElement(MyGroupProfile, {\n      data: this.state.data,\n      userIsMember: this.state.userIsMember,\n      updateClan: this.updateClan,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 19\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"mygroup-buys\",\n      className: \"col-sm-12 col-lg-6 d-flex\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(MyGroupBuys, {\n      itemView: this.itemView,\n      data: this.state.data,\n      removeBuy: this.removeBuy,\n      userIsMember: this.state.userIsMember,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 17\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row mt-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 289,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      id: \"members-card\",\n      className: \"col-sm-12 col-lg-6 d-flex\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 290,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(MyGroupMembers, {\n      data: this.state.data,\n      memberRequest: this.memberRequest,\n      userIsMember: this.state.userIsMember,\n      makeRevokeAdmin: this.makeRevokeAdmin,\n      removeMember: this.removeMember,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 291,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"news-card\",\n      className: \"col-sm-12 col-lg-6 d-flex\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 299,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(MyGroupNews, {\n      addNewNews: this.addNewNews,\n      data: this.state.data,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 300,\n        columnNumber: 17\n      }\n    }))))));\n  }\n\n}\n\nexport default connect(mapStateToProps)(MyGroupPage);\n\nfunction fetchData(token, userid, ref) {\n  console.log(\"fetching data......\", token, userid);\n  return new Promise((resolve, reject) => {\n    let request = {\n      userId: userid,\n      clanId: ref\n    };\n    let options = {\n      method: \"POST\",\n      headers: new Headers({\n        Authorization: \"Bearer \" + token,\n        \"Content-Type\": \"application/json\"\n      }),\n      body: JSON.stringify({\n        entity: request\n      })\n    };\n    fetch(\"/foodcommune/accounts/clanView\", options).then(res => {\n      return res.json();\n    }).then(res => {\n      console.log(res);\n\n      if (!res.success) {\n        // Return to account detail and display error message\n        resolve(res);\n      } else {\n        reject(\"Unable to retrieve data\");\n      }\n    });\n  });\n}\n\nfunction joinRequest(token, user, clanId) {\n  console.log(\"fetching data......\");\n  return new Promise((resolve, reject) => {\n    let request = {\n      user: user,\n      clanId: clanId\n    };\n    let options = {\n      method: \"POST\",\n      headers: new Headers({\n        Authorization: \"Bearer \" + token,\n        \"Content-Type\": \"application/json\"\n      }),\n      body: JSON.stringify({\n        entity: request\n      })\n    };\n    fetch(\"/foodcommune/accounts/joinClanRequest\", options).then(res => {\n      return res.json();\n    }).then(res => {\n      console.log(res);\n\n      if (res.success) {\n        // Return to account detail and display error message\n        resolve(res);\n      } else {\n        reject(\"Unable to retrieve data\");\n      }\n    });\n  });\n}\n\nfunction removeUserFromGroup(token, user, clanId) {\n  console.log(\"fetching data......\");\n  return new Promise((resolve, reject) => {\n    let request = {\n      user: user,\n      clanId: clanId\n    };\n    let options = {\n      method: \"POST\",\n      headers: new Headers({\n        Authorization: \"Bearer \" + token,\n        \"Content-Type\": \"application/json\"\n      }),\n      body: JSON.stringify({\n        entity: request\n      })\n    };\n    fetch(\"/foodcommune/accounts/removeUserFromClan\", options).then(res => {\n      return res.json();\n    }).then(res => {\n      console.log(res);\n\n      if (res.success) {\n        // Return to account detail and display error message\n        resolve(res);\n      } else {\n        reject(\"Unable to retrieve data\");\n      }\n    });\n  });\n}\n\nfunction handleMemberRequest(token, user, clanId, memberState) {\n  return new Promise((resolve, reject) => {\n    let request = {\n      user: user,\n      clanId: clanId,\n      memberState: memberState\n    };\n    let options = {\n      method: \"POST\",\n      headers: new Headers({\n        Authorization: \"Bearer \" + token,\n        \"Content-Type\": \"application/json\"\n      }),\n      body: JSON.stringify({\n        entity: request\n      })\n    };\n    fetch(\"/foodcommune/accounts/addUserToGroup\", options).then(res => {\n      return res.json();\n    }).then(res => {\n      console.log(res);\n\n      if (res.success) {\n        // Return to account detail and display error message\n        resolve(res);\n      } else {\n        reject(\"Unable to retrieve data\");\n      }\n    });\n  });\n}\n\nfunction adminToggle(token, user, clanId, adminValue) {\n  return new Promise((resolve, reject) => {\n    let request = {\n      user: user,\n      clanId: clanId,\n      adminValue: adminValue\n    };\n    let options = {\n      method: \"POST\",\n      headers: new Headers({\n        Authorization: \"Bearer \" + token,\n        \"Content-Type\": \"application/json\"\n      }),\n      body: JSON.stringify({\n        entity: request\n      })\n    };\n    fetch(\"/foodcommune/accounts/adminToggle\", options).then(res => {\n      return res.json();\n    }).then(res => {\n      console.log(res);\n\n      if (res.success) {\n        // Return to account detail and display error message\n        resolve(res);\n      } else {\n        reject(\"Unable to retrieve data\");\n      }\n    });\n  });\n}\n\nfunction deleteMember(token, user, clanId) {\n  return new Promise((resolve, reject) => {\n    let request = {\n      user: user,\n      clanId: clanId\n    };\n    let options = {\n      method: \"POST\",\n      headers: new Headers({\n        Authorization: \"Bearer \" + token,\n        \"Content-Type\": \"application/json\"\n      }),\n      body: JSON.stringify({\n        entity: request\n      })\n    };\n    fetch(\"/foodcommune/accounts/deleteMember\", options).then(res => {\n      return res.json();\n    }).then(res => {\n      console.log(res);\n\n      if (res.success) {\n        // Return to account detail and display error message\n        resolve(res);\n      } else {\n        reject(\"Unable to retrieve data\");\n      }\n    });\n  });\n}\n\nfunction updateClanFields(token, clanId, payload) {\n  return new Promise((resolve, reject) => {\n    let request = {\n      values: payload,\n      clanId: clanId\n    };\n    let options = {\n      method: \"POST\",\n      headers: new Headers({\n        Authorization: \"Bearer \" + token,\n        \"Content-Type\": \"application/json\"\n      }),\n      body: JSON.stringify({\n        entity: request\n      })\n    };\n    fetch(\"/foodcommune/accounts/updateClanFields\", options).then(res => {\n      return res.json();\n    }).then(res => {\n      console.log(res);\n\n      if (res.success) {\n        // Return to account detail and display error message\n        resolve(res);\n      } else {\n        reject(\"Unable to retrieve data\");\n      }\n    });\n  });\n}\n\nfunction deleteGroupBuy(token, clanId, dealId) {\n  return new Promise((resolve, reject) => {\n    let request = {\n      clanId: clanId,\n      dealId: dealId\n    };\n    let options = {\n      method: \"POST\",\n      headers: new Headers({\n        Authorization: \"Bearer \" + token,\n        \"Content-Type\": \"application/json\"\n      }),\n      body: JSON.stringify({\n        entity: request\n      })\n    };\n    fetch(\"/foodcommune/accounts/deleteGroupBuy\", options).then(res => {\n      return res.json();\n    }).then(res => {\n      console.log(res);\n\n      if (res.success) {\n        // Return to account detail and display error message\n        resolve(res);\n      } else {\n        reject(\"Unable to retrieve data\");\n      }\n    });\n  });\n}\n\nfunction insertNews(token, clanId, message) {\n  return new Promise((resolve, reject) => {\n    let request = {\n      clanId: clanId,\n      message: message\n    };\n    let options = {\n      method: \"POST\",\n      headers: new Headers({\n        Authorization: \"Bearer \" + token,\n        \"Content-Type\": \"application/json\"\n      }),\n      body: JSON.stringify({\n        entity: request\n      })\n    };\n    fetch(\"/foodcommune/accounts/insertNews\", options).then(res => {\n      return res.json();\n    }).then(res => {\n      console.log(res);\n\n      if (res.success) {\n        // Return to account detail and display error message\n        resolve(res);\n      } else {\n        reject(\"Unable to retrieve data\");\n      }\n    });\n  });\n}","map":{"version":3,"sources":["C:/Users/xmark/Desktop/Code/Servers/Qumoc/food-commune/src/components/MyGroupPage.jsx"],"names":["React","Component","ItemView","MyGroupHeader","MyGroupProfile","MyGroupBuys","MyGroupMembers","MyGroupNews","connect","mapStateToProps","state","provisional","user","token","MyGroupPage","modal","modalUpdate","joinRequested","userIsMember","itemView","deal","updateBuy","data","Purchases","find","obj","user_id","props","id","deal_id","console","log","setState","closeModal","sendJoinRequest","joinRequest","Clan","then","resolved","catch","err","leaveGroup","removeUserFromGroup","memberRequest","memberState","handleMemberRequest","prevState","requestIndex","JoinRequests","findIndex","splice","user_is_admin","Members","push","makeRevokeAdmin","adminValue","adminToggle","memberIndex","removeMember","deleteMember","updateClan","payload","updateClanFields","keys","Object","forEach","k","removeBuy","dealId","deleteGroupBuy","buyIndex","Buys","addNewNews","message","insertNews","News","unshift","componentWillMount","params","URLSearchParams","window","location","search","ref","get","fetchData","render","userid","Promise","resolve","reject","request","userId","clanId","options","method","headers","Headers","Authorization","body","JSON","stringify","entity","fetch","res","json","success","values"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport ItemView from './ItemView';\r\nimport MyGroupHeader from './MyGroupHeader';\r\nimport MyGroupProfile from './MyGroupProfile';\r\nimport MyGroupBuys from './MyGroupBuys';\r\nimport MyGroupMembers from './MyGroupMemebers';\r\nimport MyGroupNews from './MyGroupNews';\r\nimport { connect } from \"react-redux\";\r\n\r\n\r\n/**\r\n * Roles: How user views are affected my their ROLE level\r\n *\r\n * Description: state.userIsMember determines the ROLL.\r\n *              userIsMember = 0 is Admin priviledges.\r\n *              userIsMember = 1 is Non-Admin group user. Cannot see admin options.\r\n *              userIsMember > 1 (2 is not a member, but possible requested to join group).\r\n *\r\n *              Currently only using 0, 1, and 2 for ROLES.\r\n */\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    provisional: state.provisional,\r\n    user: state.user,\r\n    token: state.token\r\n  };\r\n};\r\n\r\nclass MyGroupPage extends Component {\r\n  state = {\r\n    modal: null,\r\n    modalUpdate: null,\r\n    joinRequested: false,\r\n    userIsMember: 3\r\n  };\r\n\r\n  componentWillMount() {\r\n    let params = new URLSearchParams(window.location.search);\r\n    let ref = params.get(\"ref\");\r\n\r\n    fetchData(this.props.token, this.props.user.id, ref)\r\n      .then(resolved => {\r\n        console.log(resolved);\r\n        this.setState({ data: resolved });\r\n\r\n        // Is User a Clan member?\r\n        let user = resolved.Members.find(obj => {\r\n          return obj.id === this.props.user.id;\r\n        });\r\n        if (user) {\r\n          this.setState({ userIsMember: user.user_is_admin === 1 ? 0 : 1 });\r\n        } else {\r\n          this.setState({ userIsMember: 2 });\r\n        }\r\n\r\n        // Did User request to join Clan?\r\n        let joinRequest = resolved.JoinRequests.find(obj => {\r\n          if (obj.id === this.props.user.id) {\r\n            this.setState({ joinRequested: true });\r\n          }\r\n        });\r\n      })\r\n      .catch(err => {\r\n        console.log(err);\r\n      });\r\n  }\r\n\r\n  itemView = deal => {\r\n    let updateBuy = this.state.data.Purchases.find(obj => {\r\n      return obj.user_id === this.props.user.id && obj.deal_id === deal.id;\r\n    });\r\n    console.log(updateBuy);\r\n    if (updateBuy) {\r\n      this.setState({ modalUpdate: updateBuy, modal: deal });\r\n    } else {\r\n      this.setState({ modal: deal });\r\n    }\r\n  };\r\n\r\n  closeModal = () => {\r\n    this.setState({ modal: null });\r\n  };\r\n\r\n  sendJoinRequest = () => {\r\n    joinRequest(this.props.token, this.props.user, this.state.data.Clan[0].id)\r\n      .then(resolved => {\r\n        console.log(resolved);\r\n        this.setState({ joinRequested: true });\r\n      })\r\n      .catch(err => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  leaveGroup = () => {\r\n    removeUserFromGroup(\r\n      this.props.token,\r\n      this.props.user,\r\n      this.state.data.Clan[0].id\r\n    )\r\n      .then(resolved => {\r\n        console.log(resolved);\r\n        this.setState({ userIsMember: false, joinRequested: false });\r\n      })\r\n      .catch(err => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  memberRequest = (user_id, memberState) => {\r\n    handleMemberRequest(\r\n      this.props.token,\r\n      user_id,\r\n      this.state.data.Clan[0].id,\r\n      memberState\r\n    )\r\n      .then(resolved => {\r\n        console.log(resolved);\r\n        if (memberState === 1) {\r\n          this.setState(prevState => {\r\n            let data = { ...prevState.data };\r\n            let requestIndex = data.JoinRequests.findIndex(obj => {\r\n              return obj.id === user_id;\r\n            });\r\n            let joinRequest = data.JoinRequests.splice(requestIndex, 1);\r\n            joinRequest[0].user_is_admin = 0;\r\n            data.Members.push(joinRequest[0]);\r\n            return { data: data };\r\n          });\r\n        } else if (memberState === 3) {\r\n        }\r\n      })\r\n      .catch(err => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  makeRevokeAdmin = (user_id, adminValue) => {\r\n    adminToggle(\r\n      this.props.token,\r\n      user_id,\r\n      this.state.data.Clan[0].id,\r\n      adminValue\r\n    )\r\n      .then(resolved => {\r\n        console.log(resolved);\r\n\r\n        this.setState(prevState => {\r\n          let data = { ...prevState.data };\r\n          let memberIndex = data.Members.findIndex(obj => {\r\n            return obj.id === user_id;\r\n          });\r\n          data.Members[memberIndex].user_is_admin = adminValue;\r\n\r\n          return { data: data };\r\n        });\r\n      })\r\n      .catch(err => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  removeMember = user_id => {\r\n    deleteMember(this.props.token, user_id, this.state.data.Clan[0].id)\r\n      .then(resolved => {\r\n        console.log(resolved);\r\n\r\n        this.setState(prevState => {\r\n          let data = { ...prevState.data };\r\n          let memberIndex = data.Members.findIndex(obj => {\r\n            return obj.id === user_id;\r\n          });\r\n          data.Members.splice(memberIndex, 1);\r\n          return { data: data };\r\n        });\r\n      })\r\n      .catch(err => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  updateClan = payload => {\r\n    updateClanFields(this.props.token, this.state.data.Clan[0].id, payload)\r\n      .then(resolved => {\r\n        console.log(resolved);\r\n\r\n        this.setState(prevState => {\r\n          let data = { ...prevState.data };\r\n          let keys = Object.keys(payload);\r\n          keys.forEach(k => {\r\n            data.Clan[0][k] = payload[k];\r\n          });\r\n\r\n          return { data: data };\r\n        });\r\n      })\r\n      .catch(err => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  removeBuy = dealId => {\r\n    deleteGroupBuy(this.props.token, this.state.data.Clan[0].id, dealId)\r\n      .then(resolved => {\r\n        console.log(resolved);\r\n        console.log(\"BUY ID = \", dealId);\r\n        this.setState(prevState => {\r\n          let data = { ...prevState.data };\r\n          let buyIndex = data.Buys.findIndex(obj => {\r\n            return obj.id === dealId;\r\n          });\r\n          console.log(buyIndex);\r\n          data.Buys.splice(buyIndex, 1);\r\n          return { data: data };\r\n        });\r\n      })\r\n      .catch(err => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  addNewNews = message => {\r\n    insertNews(this.props.token, this.state.data.Clan[0].id, message)\r\n      .then(resolved => {\r\n        console.log(resolved);\r\n        this.setState((prevState) => {\r\n          let data = { ...prevState.data };\r\n          data.News.unshift({ message: message });\r\n          return { data: data };\r\n        })\r\n      })\r\n      .catch(err => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <React.Fragment>\r\n        <div\r\n          id=\"mygroup-page\"\r\n          className=\"row row-border justify-content-center mb-4\"\r\n        >\r\n          <div id=\"main-content\" className=\"col spartan\">\r\n            {this.state.modal && (\r\n              <ItemView\r\n                modal={this.state.modal}\r\n                closeModal={this.closeModal}\r\n                // options={GroupPageActions(\r\n                //   this.state.token,\r\n                //   this.state.user.id,\r\n                //   this.state.data.Clan[0].id,\r\n                //   this.state.modal,\r\n                //   this.state.modalUpdate\r\n                // )}\r\n              />\r\n            )}\r\n\r\n            <MyGroupHeader\r\n              sendJoinRequest={this.sendJoinRequest}\r\n              joinRequested={this.state.joinRequested}\r\n              data={this.state.data}\r\n              userIsMember={this.state.userIsMember}\r\n              leaveGroup={this.leaveGroup}\r\n              updateClan={this.updateClan}\r\n            />\r\n\r\n            <div className=\"row\">\r\n              <div id=\"mygroup-profile\" className=\"col-sm-12 col-lg-6 d-flex\">\r\n                {this.state.data && (\r\n                  <MyGroupProfile\r\n                    data={this.state.data}\r\n                    userIsMember={this.state.userIsMember}\r\n                    updateClan={this.updateClan}\r\n                  />\r\n                )}\r\n              </div>\r\n\r\n              <div id=\"mygroup-buys\" className=\"col-sm-12 col-lg-6 d-flex\">\r\n                <MyGroupBuys\r\n                  itemView={this.itemView}\r\n                  data={this.state.data}\r\n                  removeBuy={this.removeBuy}\r\n                  userIsMember={this.state.userIsMember}\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"row mt-4\">\r\n              <div id=\"members-card\" className=\"col-sm-12 col-lg-6 d-flex\">\r\n                <MyGroupMembers\r\n                  data={this.state.data}\r\n                  memberRequest={this.memberRequest}\r\n                  userIsMember={this.state.userIsMember}\r\n                  makeRevokeAdmin={this.makeRevokeAdmin}\r\n                  removeMember={this.removeMember}\r\n                />\r\n              </div>\r\n              <div id=\"news-card\" className=\"col-sm-12 col-lg-6 d-flex\">\r\n                <MyGroupNews\r\n                  addNewNews={this.addNewNews}\r\n                  data={this.state.data}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(MyGroupPage);\r\n\r\nfunction fetchData(token, userid, ref) {\r\n  console.log(\"fetching data......\", token, userid);\r\n  return new Promise((resolve, reject) => {\r\n    let request = { userId: userid, clanId: ref };\r\n    let options = {\r\n      method: \"POST\",\r\n      headers: new Headers({\r\n        Authorization: \"Bearer \" + token,\r\n        \"Content-Type\": \"application/json\"\r\n      }),\r\n      body: JSON.stringify({\r\n        entity: request\r\n      })\r\n    };\r\n    fetch(\"/foodcommune/accounts/clanView\", options)\r\n      .then(res => {\r\n        return res.json();\r\n      })\r\n      .then(res => {\r\n        console.log(res);\r\n        if (!res.success) {\r\n          // Return to account detail and display error message\r\n          resolve(res);\r\n        } else {\r\n          reject(\"Unable to retrieve data\");\r\n        }\r\n      });\r\n  });\r\n}\r\n\r\nfunction joinRequest(token, user, clanId) {\r\n  console.log(\"fetching data......\");\r\n  return new Promise((resolve, reject) => {\r\n    let request = { user: user, clanId: clanId };\r\n    let options = {\r\n      method: \"POST\",\r\n      headers: new Headers({\r\n        Authorization: \"Bearer \" + token,\r\n        \"Content-Type\": \"application/json\"\r\n      }),\r\n      body: JSON.stringify({\r\n        entity: request\r\n      })\r\n    };\r\n    fetch(\"/foodcommune/accounts/joinClanRequest\", options)\r\n      .then(res => {\r\n        return res.json();\r\n      })\r\n      .then(res => {\r\n        console.log(res);\r\n        if (res.success) {\r\n          // Return to account detail and display error message\r\n          resolve(res);\r\n        } else {\r\n          reject(\"Unable to retrieve data\");\r\n        }\r\n      });\r\n  });\r\n}\r\n\r\nfunction removeUserFromGroup(token, user, clanId) {\r\n  console.log(\"fetching data......\");\r\n  return new Promise((resolve, reject) => {\r\n    let request = { user: user, clanId: clanId };\r\n    let options = {\r\n      method: \"POST\",\r\n      headers: new Headers({\r\n        Authorization: \"Bearer \" + token,\r\n        \"Content-Type\": \"application/json\"\r\n      }),\r\n      body: JSON.stringify({\r\n        entity: request\r\n      })\r\n    };\r\n    fetch(\"/foodcommune/accounts/removeUserFromClan\", options)\r\n      .then(res => {\r\n        return res.json();\r\n      })\r\n      .then(res => {\r\n        console.log(res);\r\n        if (res.success) {\r\n          // Return to account detail and display error message\r\n          resolve(res);\r\n        } else {\r\n          reject(\"Unable to retrieve data\");\r\n        }\r\n      });\r\n  });\r\n}\r\n\r\nfunction handleMemberRequest(token, user, clanId, memberState) {\r\n  return new Promise((resolve, reject) => {\r\n    let request = { user: user, clanId: clanId, memberState: memberState };\r\n    let options = {\r\n      method: \"POST\",\r\n      headers: new Headers({\r\n        Authorization: \"Bearer \" + token,\r\n        \"Content-Type\": \"application/json\"\r\n      }),\r\n      body: JSON.stringify({\r\n        entity: request\r\n      })\r\n    };\r\n    fetch(\"/foodcommune/accounts/addUserToGroup\", options)\r\n      .then(res => {\r\n        return res.json();\r\n      })\r\n      .then(res => {\r\n        console.log(res);\r\n        if (res.success) {\r\n          // Return to account detail and display error message\r\n          resolve(res);\r\n        } else {\r\n          reject(\"Unable to retrieve data\");\r\n        }\r\n      });\r\n  });\r\n}\r\n\r\nfunction adminToggle(token, user, clanId, adminValue) {\r\n  return new Promise((resolve, reject) => {\r\n    let request = { user: user, clanId: clanId, adminValue: adminValue };\r\n    let options = {\r\n      method: \"POST\",\r\n      headers: new Headers({\r\n        Authorization: \"Bearer \" + token,\r\n        \"Content-Type\": \"application/json\"\r\n      }),\r\n      body: JSON.stringify({\r\n        entity: request\r\n      })\r\n    };\r\n    fetch(\"/foodcommune/accounts/adminToggle\", options)\r\n      .then(res => {\r\n        return res.json();\r\n      })\r\n      .then(res => {\r\n        console.log(res);\r\n        if (res.success) {\r\n          // Return to account detail and display error message\r\n          resolve(res);\r\n        } else {\r\n          reject(\"Unable to retrieve data\");\r\n        }\r\n      });\r\n  });\r\n}\r\n\r\nfunction deleteMember(token, user, clanId) {\r\n  return new Promise((resolve, reject) => {\r\n    let request = { user: user, clanId: clanId };\r\n    let options = {\r\n      method: \"POST\",\r\n      headers: new Headers({\r\n        Authorization: \"Bearer \" + token,\r\n        \"Content-Type\": \"application/json\"\r\n      }),\r\n      body: JSON.stringify({\r\n        entity: request\r\n      })\r\n    };\r\n    fetch(\"/foodcommune/accounts/deleteMember\", options)\r\n      .then(res => {\r\n        return res.json();\r\n      })\r\n      .then(res => {\r\n        console.log(res);\r\n        if (res.success) {\r\n          // Return to account detail and display error message\r\n          resolve(res);\r\n        } else {\r\n          reject(\"Unable to retrieve data\");\r\n        }\r\n      });\r\n  });\r\n}\r\n\r\nfunction updateClanFields(token, clanId, payload) {\r\n  return new Promise((resolve, reject) => {\r\n    let request = { values: payload, clanId: clanId };\r\n    let options = {\r\n      method: \"POST\",\r\n      headers: new Headers({\r\n        Authorization: \"Bearer \" + token,\r\n        \"Content-Type\": \"application/json\"\r\n      }),\r\n      body: JSON.stringify({\r\n        entity: request\r\n      })\r\n    };\r\n    fetch(\"/foodcommune/accounts/updateClanFields\", options)\r\n      .then(res => {\r\n        return res.json();\r\n      })\r\n      .then(res => {\r\n        console.log(res);\r\n        if (res.success) {\r\n          // Return to account detail and display error message\r\n          resolve(res);\r\n        } else {\r\n          reject(\"Unable to retrieve data\");\r\n        }\r\n      });\r\n  });\r\n}\r\n\r\nfunction deleteGroupBuy(token, clanId, dealId) {\r\n  return new Promise((resolve, reject) => {\r\n    let request = { clanId: clanId, dealId: dealId };\r\n    let options = {\r\n      method: \"POST\",\r\n      headers: new Headers({\r\n        Authorization: \"Bearer \" + token,\r\n        \"Content-Type\": \"application/json\"\r\n      }),\r\n      body: JSON.stringify({\r\n        entity: request\r\n      })\r\n    };\r\n    fetch(\"/foodcommune/accounts/deleteGroupBuy\", options)\r\n      .then(res => {\r\n        return res.json();\r\n      })\r\n      .then(res => {\r\n        console.log(res);\r\n        if (res.success) {\r\n          // Return to account detail and display error message\r\n          resolve(res);\r\n        } else {\r\n          reject(\"Unable to retrieve data\");\r\n        }\r\n      });\r\n  });\r\n}\r\n\r\nfunction insertNews(token, clanId, message) {\r\n  return new Promise((resolve, reject) => {\r\n    let request = { clanId: clanId, message: message };\r\n    let options = {\r\n      method: \"POST\",\r\n      headers: new Headers({\r\n        Authorization: \"Bearer \" + token,\r\n        \"Content-Type\": \"application/json\"\r\n      }),\r\n      body: JSON.stringify({\r\n        entity: request\r\n      })\r\n    };\r\n    fetch(\"/foodcommune/accounts/insertNews\", options)\r\n      .then(res => {\r\n        return res.json();\r\n      })\r\n      .then(res => {\r\n        console.log(res);\r\n        if (res.success) {\r\n          // Return to account detail and display error message\r\n          resolve(res);\r\n        } else {\r\n          reject(\"Unable to retrieve data\");\r\n        }\r\n      });\r\n  });\r\n}"]},"metadata":{},"sourceType":"module"}