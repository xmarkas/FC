{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\xmark\\\\Desktop\\\\Code\\\\Servers\\\\FC-SERVER\\\\food-commune\\\\src\\\\components\\\\DashboardView.jsx\";\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport AddDeal from \"./AddDeal\";\nimport Profile from \"./Profile\";\nimport Buys from \"./Buys\";\nimport Deals from \"./Deals\";\nimport MyGroups from \"./MyGroups\";\n\nconst mapStateToProps = state => {\n  return {\n    user: state.user,\n    token: state.token\n  };\n};\n\nclass DashboardView extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      data: null,\n      showAddDeal: false,\n      editDeal: null\n    };\n\n    this.newDeal = payload => {\n      insertDeal(this.props.token, this.props.user.id, payload).then(resolved => {\n        this.setState(prevState => {\n          let Deals = [...prevState.data.Deals];\n          Deals.push(payload);\n          let data = { ...prevState.data,\n            Deals: Deals\n          };\n          return {\n            data: data\n          };\n        }, () => {\n          this.setState({\n            showAddDeal: false\n          });\n        });\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.updateDeal = payload => {\n      updateDealEdit(this.props.token, this.props.user.id, payload).then(resolved => {\n        this.setState(prevState => {\n          let Deals = [...prevState.data.Deals];\n          let deal = Deals.findIndex(obj => {\n            return obj.id === payload.id;\n          });\n          Deals[deal] = payload;\n          let data = { ...prevState.data,\n            Deals: Deals\n          };\n          return {\n            data: data\n          };\n        }, () => {\n          this.setState({\n            showAddDeal: false\n          });\n        });\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.removeDeal = payload => {\n      removeDealDB(this.props.token, this.props.user.id, payload).then(resolved => {\n        this.setState(prevState => {\n          let Deals = [...prevState.data.Deals];\n          let deal = Deals.findIndex(obj => {\n            return obj.id === payload;\n          });\n          Deals.splice(deal, 1);\n          let data = { ...prevState.data,\n            Deals: Deals\n          };\n          return {\n            data: data\n          };\n        });\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.showAddDeal = toggle => {\n      this.setState({\n        showAddDeal: this.state.showAddDeal ? false : true,\n        editDeal: null\n      });\n    };\n\n    this.editDeal = index => {\n      this.setState({\n        editDeal: this.state.data.Deals[index],\n        showAddDeal: true\n      });\n    };\n\n    this.updateProfile = payload => {\n      updateUserProfile(this.props.token, this.props.user.id, payload).then(resolved => {\n        this.setState(prevState => {\n          let user = { ...prevState.user\n          };\n          let keys = Object.keys(payload);\n          keys.forEach(k => {\n            user[k] = payload[k];\n          });\n          return {\n            user: user\n          };\n        });\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.leaveGroup = clanId => {\n      removeUserFromGroup(this.props.token, this.props.user, clanId).then(resolved => {\n        console.log(resolved);\n        this.setState(prevState => {\n          let clans = [...prevState.data.MyClans];\n          let clanIndex = clans.findIndex(obj => obj.id === clanId);\n          clans.splice(clanIndex, 1);\n          let data = { ...prevState.data,\n            MyClans: clans\n          };\n          return {\n            data: data\n          };\n        });\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n\n    this.removeFromWishList = itemId => {\n      removeItemFromWishList(this.props.token, this.props.user, itemId).then(resolved => {\n        this.setState(prevState => {\n          let buys = [...prevState.data.Buys];\n          let itemIndex = buys.findIndex(obj => obj.id === itemId);\n          buys.splice(itemIndex, 1);\n          let data = { ...prevState.data,\n            Buys: buys\n          };\n          return {\n            data: data\n          };\n        });\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n  }\n\n  componentWillMount() {\n    fetchData(this.props.token, this.props.user.id).then(resolved => {\n      this.setState({\n        data: resolved\n      });\n    }).catch(err => {\n      console.log(err);\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(React.Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      id: \"dashboard\",\n      className: \"row row-border justify-content-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 9\n      }\n    }, this.state.showAddDeal && /*#__PURE__*/React.createElement(AddDeal, {\n      editDeal: this.state.editDeal,\n      showAddDeal: this.showAddDeal,\n      user: this.props.user,\n      newDeal: this.newDeal,\n      updateDeal: this.updateDeal,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"main-content\",\n      className: \"col-sm-12 col-md-10 spartan py-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      id: \"profile-card\",\n      className: \"col-sm-12 col-lg-6 d-flex\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Profile, {\n      updateProfile: this.updateProfile,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 17\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      id: \"groups-card\",\n      className: \"col-sm-12 col-lg-6 d-flex\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(MyGroups, {\n      data: this.state.data,\n      leaveGroup: this.leaveGroup,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 17\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row mt-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      id: \"buys-card\",\n      className: \"col-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Buys, {\n      data: this.state.data,\n      showAddDeal: this.showAddDeal,\n      editDeal: this.editDeal,\n      removeDeal: this.removeDeal,\n      user: this.props.user,\n      token: this.props.token,\n      removeFromWishList: this.removeFromWishList,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 17\n      }\n    }))))));\n  }\n\n}\n\nexport default connect(mapStateToProps)(DashboardView);\n\nfunction fetchData(token, userid) {\n  return new Promise((resolve, reject) => {\n    let request = {\n      userId: userid\n    };\n    let options = {\n      method: \"POST\",\n      headers: new Headers({\n        Authorization: \"Bearer \" + token,\n        \"Content-Type\": \"application/json\"\n      }),\n      body: JSON.stringify({\n        entity: request\n      })\n    };\n    fetch(\"/accounts/dashboard\", options).then(res => {\n      if (res) return res.json();\n    }).then(res => {\n      if (!res.success) {\n        // Return to account detail and display error message\n        resolve(res);\n      } else {\n        reject(\"Unable to retrieve data\");\n      }\n    });\n  });\n}\n\nfunction insertDeal(token, userid, payload) {\n  console.log(\"fetching data......\", token, userid);\n  payload.user_id = userid; // Append user_id to payload\n\n  return new Promise((resolve, reject) => {\n    let options = {\n      method: \"POST\",\n      headers: new Headers({\n        Authorization: \"Bearer \" + token,\n        \"Content-Type\": \"application/json\"\n      }),\n      body: JSON.stringify({\n        entity: payload\n      })\n    };\n    fetch(\"/accounts/insertDeal\", options).then(res => {\n      return res.json();\n    }).then(res => {\n      if (res.success) {\n        // Return to account detail and display error message\n        resolve(res);\n      } else {\n        reject(res);\n      }\n    });\n  });\n}\n\nfunction updateDealEdit(token, userid, payload) {\n  payload.user_id = userid; // Append user_id to payload\n\n  return new Promise((resolve, reject) => {\n    let options = {\n      method: \"POST\",\n      headers: new Headers({\n        Authorization: \"Bearer \" + token,\n        \"Content-Type\": \"application/json\"\n      }),\n      body: JSON.stringify({\n        entity: payload\n      })\n    };\n    fetch(\"/accounts/updateDeal\", options).then(res => {\n      return res.json();\n    }).then(res => {\n      if (res.success) {\n        // Return to account detail and display error message\n        resolve(res);\n      } else {\n        reject(res);\n      }\n    });\n  });\n}\n\nfunction removeDealDB(token, userid, payload) {\n  return new Promise((resolve, reject) => {\n    let options = {\n      method: \"POST\",\n      headers: new Headers({\n        Authorization: \"Bearer \" + token,\n        \"Content-Type\": \"application/json\"\n      }),\n      body: JSON.stringify({\n        entity: {\n          dealId: payload\n        }\n      })\n    };\n    fetch(\"/accounts/removeDealDB\", options).then(res => {\n      return res.json();\n    }).then(res => {\n      if (res.success) {\n        // Return to account detail and display error message\n        resolve(res);\n      } else {\n        reject(res);\n      }\n    });\n  });\n}\n\nfunction updateUserProfile(token, userid, payload) {\n  let payloadObj = {\n    userId: userid,\n    values: payload\n  };\n  return new Promise((resolve, reject) => {\n    let options = {\n      method: \"POST\",\n      headers: new Headers({\n        Authorization: \"Bearer \" + token,\n        \"Content-Type\": \"application/json\"\n      }),\n      body: JSON.stringify({\n        entity: payloadObj\n      })\n    };\n    fetch(\"/accounts/updateUserProfile\", options).then(res => {\n      return res.json();\n    }).then(res => {\n      if (res.success) {\n        // Return to account detail and display error message\n        resolve(res);\n      } else {\n        reject(res);\n      }\n    });\n  });\n}\n\nfunction removeUserFromGroup(token, user, clanId) {\n  return new Promise((resolve, reject) => {\n    let request = {\n      user: user,\n      clanId: clanId\n    };\n    let options = {\n      method: \"POST\",\n      headers: new Headers({\n        Authorization: \"Bearer \" + token,\n        \"Content-Type\": \"application/json\"\n      }),\n      body: JSON.stringify({\n        entity: request\n      })\n    };\n    fetch(\"/accounts/removeUserFromClan\", options).then(res => {\n      return res.json();\n    }).then(res => {\n      if (res.success) {\n        // Return to account detail and display error message\n        resolve(res);\n      } else {\n        reject(\"Unable to retrieve data\");\n      }\n    });\n  });\n}\n\nfunction removeItemFromWishList(token, user, itemId) {\n  return new Promise((resolve, reject) => {\n    let request = {\n      user: user,\n      itemId: itemId\n    };\n    let options = {\n      method: \"POST\",\n      headers: new Headers({\n        Authorization: \"Bearer \" + token,\n        \"Content-Type\": \"application/json\"\n      }),\n      body: JSON.stringify({\n        entity: request\n      })\n    };\n    fetch(\"/accounts/deleteWishListBuy\", options).then(res => {\n      return res.json();\n    }).then(res => {\n      if (res.success) {\n        // Return to account detail and display error message\n        resolve(res);\n      } else {\n        reject(\"Unable to retrieve data\");\n      }\n    });\n  });\n}","map":{"version":3,"sources":["C:/Users/xmark/Desktop/Code/Servers/FC-SERVER/food-commune/src/components/DashboardView.jsx"],"names":["React","Component","connect","AddDeal","Profile","Buys","Deals","MyGroups","mapStateToProps","state","user","token","DashboardView","data","showAddDeal","editDeal","newDeal","payload","insertDeal","props","id","then","resolved","setState","prevState","push","catch","err","console","log","updateDeal","updateDealEdit","deal","findIndex","obj","removeDeal","removeDealDB","splice","toggle","index","updateProfile","updateUserProfile","keys","Object","forEach","k","leaveGroup","clanId","removeUserFromGroup","clans","MyClans","clanIndex","removeFromWishList","itemId","removeItemFromWishList","buys","itemIndex","componentWillMount","fetchData","render","userid","Promise","resolve","reject","request","userId","options","method","headers","Headers","Authorization","body","JSON","stringify","entity","fetch","res","json","success","user_id","dealId","payloadObj","values"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport AddDeal from \"./AddDeal\";\r\nimport Profile from \"./Profile\";\r\nimport Buys from \"./Buys\";\r\nimport Deals from \"./Deals\";\r\nimport MyGroups from \"./MyGroups\";\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    user: state.user,\r\n    token: state.token\r\n  };\r\n};\r\n\r\nclass DashboardView extends Component {\r\n  state = {\r\n    data: null,\r\n    showAddDeal: false,\r\n    editDeal: null\r\n  };\r\n\r\n  componentWillMount() {\r\n    fetchData(this.props.token, this.props.user.id)\r\n      .then(resolved => {\r\n        this.setState({ data: resolved });\r\n      })\r\n      .catch(err => {\r\n        console.log(err);\r\n      });\r\n  }\r\n\r\n  newDeal = payload => {\r\n    insertDeal(this.props.token, this.props.user.id, payload)\r\n      .then(resolved => {\r\n        this.setState(\r\n          prevState => {\r\n            let Deals = [...prevState.data.Deals];\r\n\r\n            Deals.push(payload);\r\n            let data = { ...prevState.data, Deals: Deals };\r\n            return { data: data };\r\n          },\r\n          () => {\r\n            this.setState({ showAddDeal: false });\r\n          }\r\n        );\r\n      })\r\n      .catch(err => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  updateDeal = payload => {\r\n    updateDealEdit(this.props.token, this.props.user.id, payload)\r\n      .then(resolved => {\r\n        this.setState(\r\n          prevState => {\r\n            let Deals = [...prevState.data.Deals];\r\n            let deal = Deals.findIndex(obj => {\r\n              return obj.id === payload.id;\r\n            });\r\n            Deals[deal] = payload;\r\n\r\n            let data = { ...prevState.data, Deals: Deals };\r\n            return { data: data };\r\n          },\r\n          () => {\r\n            this.setState({ showAddDeal: false });\r\n          }\r\n        );\r\n      })\r\n      .catch(err => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  removeDeal = payload => {\r\n    removeDealDB(this.props.token, this.props.user.id, payload)\r\n      .then(resolved => {\r\n        this.setState(\r\n          prevState => {\r\n            let Deals = [...prevState.data.Deals];\r\n            let deal = Deals.findIndex(obj => {\r\n              return obj.id === payload;\r\n            });\r\n            Deals.splice(deal, 1);\r\n\r\n            let data = { ...prevState.data, Deals: Deals };\r\n            return { data: data };\r\n          }\r\n        );\r\n      })\r\n      .catch(err => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  showAddDeal = toggle => {\r\n    this.setState({\r\n      showAddDeal: this.state.showAddDeal ? false : true,\r\n      editDeal: null\r\n    });\r\n  };\r\n\r\n  editDeal = index => {\r\n    this.setState({\r\n      editDeal: this.state.data.Deals[index],\r\n      showAddDeal: true\r\n    });\r\n  };\r\n\r\n  updateProfile = payload => {\r\n    updateUserProfile(this.props.token, this.props.user.id, payload)\r\n      .then(resolved => {\r\n        this.setState(prevState => {\r\n          let user = { ...prevState.user };\r\n          let keys = Object.keys(payload);\r\n          keys.forEach(k => {\r\n            user[k] = payload[k];\r\n          });\r\n\r\n          return { user: user };\r\n        });\r\n      })\r\n      .catch(err => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  leaveGroup = (clanId) => {\r\n    removeUserFromGroup(\r\n      this.props.token,\r\n      this.props.user,\r\n      clanId\r\n    )\r\n      .then(resolved => {\r\n        console.log(resolved);\r\n        this.setState((prevState) => {\r\n          let clans = [...prevState.data.MyClans];\r\n          let clanIndex = clans.findIndex(obj => obj.id === clanId);\r\n          clans.splice(clanIndex, 1);\r\n          let data = { ...prevState.data, MyClans: clans };\r\n          return { data: data };\r\n        })\r\n      })\r\n      .catch(err => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  removeFromWishList = (itemId) => {\r\n    removeItemFromWishList(\r\n      this.props.token,\r\n      this.props.user,\r\n      itemId\r\n    )\r\n      .then(resolved => {\r\n        this.setState((prevState) => {\r\n          let buys = [...prevState.data.Buys];\r\n          let itemIndex = buys.findIndex(obj => obj.id === itemId);\r\n          buys.splice(itemIndex, 1);\r\n          let data = { ...prevState.data, Buys: buys };\r\n          return { data: data };\r\n        })\r\n      })\r\n      .catch(err => {\r\n        console.log(err);\r\n      });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <React.Fragment>\r\n        {/* Dashboard */}\r\n        <div id=\"dashboard\" className=\"row row-border justify-content-center\">\r\n          {/* Add Deal */}\r\n          {this.state.showAddDeal && (\r\n            <AddDeal\r\n              editDeal={this.state.editDeal}\r\n              showAddDeal={this.showAddDeal}\r\n              user={this.props.user}\r\n              newDeal={this.newDeal}\r\n              updateDeal={this.updateDeal}\r\n            />\r\n          )}\r\n          <div id=\"main-content\" className=\"col-sm-12 col-md-10 spartan py-4\">\r\n            <div className=\"row\">\r\n              <div id=\"profile-card\" className=\"col-sm-12 col-lg-6 d-flex\">\r\n                {/* <!-- PROFILE --> */}\r\n\r\n                <Profile updateProfile={this.updateProfile} />\r\n              </div>\r\n\r\n              <div id=\"groups-card\" className=\"col-sm-12 col-lg-6 d-flex\">\r\n                {/* <!-- GROUPS --> */}\r\n                <MyGroups data={this.state.data} leaveGroup={this.leaveGroup} />\r\n              </div>\r\n            </div>\r\n            <div className=\"row mt-4\">\r\n              <div id=\"buys-card\" className=\"col-12\">\r\n                {/* <!-- BUYS --> */}\r\n                <Buys\r\n                  data={this.state.data}\r\n                  showAddDeal={this.showAddDeal}\r\n                  editDeal={this.editDeal}\r\n                  removeDeal={this.removeDeal}\r\n                  user={this.props.user}\r\n                  token={this.props.token}\r\n                  removeFromWishList={this.removeFromWishList}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(DashboardView);\r\n\r\nfunction fetchData(token, userid) {\r\n  return new Promise((resolve, reject) => {\r\n    let request = { userId: userid };\r\n    let options = {\r\n      method: \"POST\",\r\n      headers: new Headers({\r\n        Authorization: \"Bearer \" + token,\r\n        \"Content-Type\": \"application/json\"\r\n      }),\r\n      body: JSON.stringify({\r\n        entity: request\r\n      })\r\n    };\r\n    fetch(\"/accounts/dashboard\", options)\r\n      .then(res => {\r\n        if (res) return res.json();\r\n      })\r\n      .then(res => {\r\n        if (!res.success) {\r\n          // Return to account detail and display error message\r\n          resolve(res);\r\n        } else {\r\n          reject(\"Unable to retrieve data\");\r\n        }\r\n      });\r\n  });\r\n}\r\n\r\nfunction insertDeal(token, userid, payload) {\r\n  console.log(\"fetching data......\", token, userid);\r\n  payload.user_id = userid; // Append user_id to payload\r\n  return new Promise((resolve, reject) => {\r\n    let options = {\r\n      method: \"POST\",\r\n      headers: new Headers({\r\n        Authorization: \"Bearer \" + token,\r\n        \"Content-Type\": \"application/json\"\r\n      }),\r\n      body: JSON.stringify({\r\n        entity: payload\r\n      })\r\n    };\r\n    fetch(\"/accounts/insertDeal\", options)\r\n      .then(res => {\r\n        return res.json();\r\n      })\r\n      .then(res => {\r\n        if (res.success) {\r\n          // Return to account detail and display error message\r\n          resolve(res);\r\n        } else {\r\n          reject(res);\r\n        }\r\n      });\r\n  });\r\n}\r\n\r\nfunction updateDealEdit(token, userid, payload) {\r\n  payload.user_id = userid; // Append user_id to payload\r\n  return new Promise((resolve, reject) => {\r\n    let options = {\r\n      method: \"POST\",\r\n      headers: new Headers({\r\n        Authorization: \"Bearer \" + token,\r\n        \"Content-Type\": \"application/json\"\r\n      }),\r\n      body: JSON.stringify({\r\n        entity: payload\r\n      })\r\n    };\r\n    fetch(\"/accounts/updateDeal\", options)\r\n      .then(res => {\r\n        return res.json();\r\n      })\r\n      .then(res => {\r\n        if (res.success) {\r\n          // Return to account detail and display error message\r\n          resolve(res);\r\n        } else {\r\n          reject(res);\r\n        }\r\n      });\r\n  });\r\n}\r\n\r\nfunction removeDealDB(token, userid, payload) {\r\n  return new Promise((resolve, reject) => {\r\n    let options = {\r\n      method: \"POST\",\r\n      headers: new Headers({\r\n        Authorization: \"Bearer \" + token,\r\n        \"Content-Type\": \"application/json\"\r\n      }),\r\n      body: JSON.stringify({\r\n        entity: { dealId: payload }\r\n      })\r\n    };\r\n    fetch(\"/accounts/removeDealDB\", options)\r\n      .then(res => {\r\n        return res.json();\r\n      })\r\n      .then(res => {\r\n        if (res.success) {\r\n          // Return to account detail and display error message\r\n          resolve(res);\r\n        } else {\r\n          reject(res);\r\n        }\r\n      });\r\n  });\r\n}\r\n\r\nfunction updateUserProfile(token, userid, payload) {\r\n  let payloadObj = { userId: userid, values: payload };\r\n  return new Promise((resolve, reject) => {\r\n    let options = {\r\n      method: \"POST\",\r\n      headers: new Headers({\r\n        Authorization: \"Bearer \" + token,\r\n        \"Content-Type\": \"application/json\"\r\n      }),\r\n      body: JSON.stringify({\r\n        entity: payloadObj\r\n      })\r\n    };\r\n    fetch(\"/accounts/updateUserProfile\", options)\r\n      .then(res => {\r\n        return res.json();\r\n      })\r\n      .then(res => {\r\n        if (res.success) {\r\n          // Return to account detail and display error message\r\n          resolve(res);\r\n        } else {\r\n          reject(res);\r\n        }\r\n      });\r\n  });\r\n}\r\n\r\nfunction removeUserFromGroup(token, user, clanId) {\r\n  return new Promise((resolve, reject) => {\r\n    let request = { user: user, clanId: clanId };\r\n    let options = {\r\n      method: \"POST\",\r\n      headers: new Headers({\r\n        Authorization: \"Bearer \" + token,\r\n        \"Content-Type\": \"application/json\"\r\n      }),\r\n      body: JSON.stringify({\r\n        entity: request\r\n      })\r\n    };\r\n    fetch(\"/accounts/removeUserFromClan\", options)\r\n      .then(res => {\r\n        return res.json();\r\n      })\r\n      .then(res => {\r\n        if (res.success) {\r\n          // Return to account detail and display error message\r\n          resolve(res);\r\n        } else {\r\n          reject(\"Unable to retrieve data\");\r\n        }\r\n      });\r\n  });\r\n}\r\n\r\nfunction removeItemFromWishList(token, user, itemId) {\r\n  return new Promise((resolve, reject) => {\r\n    let request = { user: user, itemId: itemId };\r\n    let options = {\r\n      method: \"POST\",\r\n      headers: new Headers({\r\n        Authorization: \"Bearer \" + token,\r\n        \"Content-Type\": \"application/json\"\r\n      }),\r\n      body: JSON.stringify({\r\n        entity: request\r\n      })\r\n    };\r\n    fetch(\"/accounts/deleteWishListBuy\", options)\r\n      .then(res => {\r\n        return res.json();\r\n      })\r\n      .then(res => {\r\n        if (res.success) {\r\n          // Return to account detail and display error message\r\n          resolve(res);\r\n        } else {\r\n          reject(\"Unable to retrieve data\");\r\n        }\r\n      });\r\n  });\r\n}"]},"metadata":{},"sourceType":"module"}